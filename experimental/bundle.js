/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={487:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},12:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,i=0;n<t.length;n++,i+=8)e[i>>>5]|=t[n]<<24-i%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],i=0;i<t.length;i+=3)for(var o=t[i]<<16|t[i+1]<<8|t[i+2],r=0;r<4;r++)8*i+6*r<=8*t.length?n.push(e.charAt(o>>>6*(3-r)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],i=0,o=0;i<t.length;o=++i%4)0!=o&&n.push((e.indexOf(t.charAt(i-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(i))>>>6-2*o);return n}},t.exports=n},738:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},243:function(t,e){!function(t){"use strict";function e(t){var e,n,i,o;for(n=1,i=arguments.length;n<i;n++)for(e in o=arguments[n])t[e]=o[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var o=0;function r(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,n){var i,o,r,s;return s=function(){i=!1,o&&(r.apply(n,o),o=!1)},r=function(){i?o=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)},r}function a(t,e,n){var i=e[1],o=e[0],r=i-o;return t===i&&n?t:((t-o)%r+r)%r+o}function l(){return!1}function u(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return h(t).split(/\s+/)}function d(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function f(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var p=/\{ *([\w_-]+) *\}/g;function _(t,e){return t.replace(p,(function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function m(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var g="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function y(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-b));return b=e+n,window.setTimeout(t,n)}var x=window.requestAnimationFrame||y("RequestAnimationFrame")||w,E=window.cancelAnimationFrame||y("CancelAnimationFrame")||y("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function T(t,e,n){if(!n||x!==w)return x.call(window,i(t,e));t.call(e)}function k(t){t&&E.call(window,t)}var S={extend:e,create:n,bind:i,lastId:o,stamp:r,throttle:s,wrapNum:a,falseFn:l,formatNum:u,trim:h,splitWords:c,setOptions:d,getParamString:f,template:_,isArray:v,indexOf:m,emptyImageUrl:g,requestFn:x,cancelFn:E,requestAnimFrame:T,cancelAnimFrame:k};function P(){}P.extend=function(t){var i=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=i.__super__=this.prototype,r=n(o);for(var s in r.constructor=i,i.prototype=r,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(i[s]=this[s]);return t.statics&&(e(i,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=e(n(r.options),t.options)),e(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},i},P.include=function(t){return e(this.prototype,t),this},P.mergeOptions=function(t){return e(this.prototype.options,t),this},P.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var A={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var o=0,r=(t=c(t)).length;o<r;o++)this._on(t[o],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var o=0,r=(t=c(t)).length;o<r;o++)this._off(t[o],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var o={fn:e,ctx:n},r=i,s=0,a=r.length;s<a;s++)if(r[s].fn===e&&r[s].ctx===n)return;r.push(o)},_off:function(t,e,n){var i,o,r;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(o=0,r=i.length;o<r;o++){var s=i[o];if(s.ctx===n&&s.fn===e)return s.fn=l,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(o,1)}}else{for(o=0,r=i.length;o<r;o++)i[o].fn=l;delete this._events[t]}},fire:function(t,n,i){if(!this.listens(t,i))return this;var o=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var s=0,a=r.length;s<a;s++){var l=r[s];l.fn.call(l.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],e);return this}var r=i((function(){this.off(t,e,n).off(t,r,n)}),this);return this.on(t,e,n).on(t,r,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[r(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[r(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var I=P.extend(A);function M(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var z=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function N(t,e,n){return t instanceof M?t:v(t)?new M(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new M(t.x,t.y):new M(t,e,n)}function B(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function C(t,e){return!t||t instanceof B?t:new B(t,e)}function O(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function R(t,e){return t instanceof O?t:new O(t,e)}function F(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function D(t,e,n){return t instanceof F?t:v(t)&&"object"!=typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,n)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(t){return this.clone()._add(N(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(N(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new M(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new M(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=z(this.x),this.y=z(this.y),this},distanceTo:function(t){var e=(t=N(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=N(t)).x===this.x&&t.y===this.y},contains:function(t){return t=N(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},B.prototype={extend:function(t){return t=N(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new M(this.min.x,this.max.y)},getTopRight:function(){return new M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof M?N(t):C(t))instanceof B?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=C(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,s=o.y>=e.y&&i.y<=n.y;return r&&s},overlaps:function(t){t=C(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>e.x&&i.x<n.x,s=o.y>e.y&&i.y<n.y;return r&&s},isValid:function(){return!(!this.min||!this.max)}},O.prototype={extend:function(t){var e,n,i=this._southWest,o=this._northEast;if(t instanceof F)e=t,n=t;else{if(!(t instanceof O))return t?this.extend(D(t)||R(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||o?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new O(new F(e.lat-i,e.lng-o),new F(n.lat+i,n.lng+o))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof F||"lat"in t?D(t):R(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof O?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=R(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,s=o.lng>=e.lng&&i.lng<=n.lng;return r&&s},overlaps:function(t){t=R(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&i.lat<n.lat,s=o.lng>e.lng&&i.lng<n.lng;return r&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=R(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){return!!t&&(t=D(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,D(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return R([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var Z,j={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new B(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?a(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?a(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,o=e.lng-n.lng;if(0===i&&0===o)return t;var r=t.getSouthWest(),s=t.getNorthEast();return new O(new F(r.lat-i,r.lng-o),new F(s.lat-i,s.lng-o))}},U=e({},j,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,r=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=r*r+Math.cos(i)*Math.cos(o)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),H=6378137,W={R:H,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=Math.sin(i*e);return new M(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(Z=H*Math.PI,new B([-Z,-Z],[Z,Z]))};function G(t,e,n,i){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function K(t,e,n,i){return new G(t,e,n,i)}G.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new M((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var X=e({},U,{code:"EPSG:3857",projection:W,transformation:function(){var t=.5/(Math.PI*W.R);return K(t,.5,-t,.5)}()}),V=e({},X,{code:"EPSG:900913"});function q(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t,e){var n,i,o,r,s,a,l="";for(n=0,o=t.length;n<o;n++){for(i=0,r=(s=t[n]).length;i<r;i++)l+=(i?"L":"M")+(a=s[i]).x+" "+a.y;l+=e?Lt?"z":"x":""}return l||"M0 0"}var Y=document.documentElement.style,$="ActiveXObject"in window,Q=$&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=It("webkit"),nt=It("android"),it=It("android 2")||It("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=nt&&It("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,at=!tt&&It("chrome"),lt=It("gecko")&&!et&&!st&&!$,ut=!at&&It("safari"),ht=It("phantom"),ct="OTransition"in Y,dt=0===navigator.platform.indexOf("Win"),ft=$&&"transition"in Y,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,_t="MozPerspective"in Y,vt=!window.L_DISABLE_3D&&(ft||pt||_t)&&!ct&&!ht,mt="undefined"!=typeof orientation||It("mobile"),gt=mt&&et,yt=mt&&pt,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!bt),xt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Et=mt&&st,Tt=mt&&lt,kt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,St=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t}(),Pt=!!document.createElement("canvas").getContext,Lt=!(!document.createElementNS||!q("svg").createSVGRect),At=!Lt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function It(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Mt={ie:$,ielt9:Q,edge:tt,webkit:et,android:nt,android23:it,androidStock:rt,opera:st,chrome:at,gecko:lt,safari:ut,phantom:ht,opera12:ct,win:dt,ie3d:ft,webkit3d:pt,gecko3d:_t,any3d:vt,mobile:mt,mobileWebkit:gt,mobileWebkit3d:yt,msPointer:bt,pointer:wt,touch:xt,mobileOpera:Et,mobileGecko:Tt,retina:kt,passiveEvents:St,canvas:Pt,svg:Lt,vml:At},zt=bt?"MSPointerDown":"pointerdown",Nt=bt?"MSPointerMove":"pointermove",Bt=bt?"MSPointerUp":"pointerup",Ct=bt?"MSPointerCancel":"pointercancel",Ot={},Rt=!1;function Ft(t,e,n,o){return"touchstart"===e?function(t,e,n){var o=i((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Ce(t),Ut(t,e)}));t["_leaflet_touchstart"+n]=o,t.addEventListener(zt,o,!1),Rt||(document.addEventListener(zt,Dt,!0),document.addEventListener(Nt,Zt,!0),document.addEventListener(Bt,jt,!0),document.addEventListener(Ct,jt,!0),Rt=!0)}(t,n,o):"touchmove"===e?function(t,e,n){var i=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Ut(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Nt,i,!1)}(t,n,o):"touchend"===e&&function(t,e,n){var i=function(t){Ut(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(Bt,i,!1),t.addEventListener(Ct,i,!1)}(t,n,o),this}function Dt(t){Ot[t.pointerId]=t}function Zt(t){Ot[t.pointerId]&&(Ot[t.pointerId]=t)}function jt(t){delete Ot[t.pointerId]}function Ut(t,e){for(var n in t.touches=[],Ot)t.touches.push(Ot[n]);t.changedTouches=[t],e(t)}var Ht=bt?"MSPointerDown":wt?"pointerdown":"touchstart",Wt=bt?"MSPointerUp":wt?"pointerup":"touchend",Gt="_leaflet_";var Kt,Xt,Vt,qt,Jt,Yt=fe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$t=fe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Qt="webkitTransition"===$t||"OTransition"===$t?$t+"End":"transitionend";function te(t){return"string"==typeof t?document.getElementById(t):t}function ee(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ne(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ie(t){var e=t.parentNode;e&&e.removeChild(t)}function oe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function re(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function se(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ae(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ce(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function le(t,e){if(void 0!==t.classList)for(var n=c(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!ae(t,e)){var r=ce(t);he(t,(r?r+" ":"")+e)}}function ue(t,e){void 0!==t.classList?t.classList.remove(e):he(t,h((" "+ce(t)+" ").replace(" "+e+" "," ")))}function he(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ce(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function de(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function fe(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function pe(t,e,n){var i=e||new M(0,0);t.style[Yt]=(ft?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function _e(t,e){t._leaflet_pos=e,vt?pe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ve(t){return t._leaflet_pos||new M(0,0)}if("onselectstart"in document)Kt=function(){ke(window,"selectstart",Ce)},Xt=function(){Pe(window,"selectstart",Ce)};else{var me=fe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Kt=function(){if(me){var t=document.documentElement.style;Vt=t[me],t[me]="none"}},Xt=function(){me&&(document.documentElement.style[me]=Vt,Vt=void 0)}}function ge(){ke(window,"dragstart",Ce)}function ye(){Pe(window,"dragstart",Ce)}function be(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(we(),qt=t,Jt=t.style.outline,t.style.outline="none",ke(window,"keydown",we))}function we(){qt&&(qt.style.outline=Jt,qt=void 0,Jt=void 0,Pe(window,"keydown",we))}function xe(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Ee(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Te={TRANSFORM:Yt,TRANSITION:$t,TRANSITION_END:Qt,get:te,getStyle:ee,create:ne,remove:ie,empty:oe,toFront:re,toBack:se,hasClass:ae,addClass:le,removeClass:ue,setClass:he,getClass:ce,setOpacity:de,testProp:fe,setTransform:pe,setPosition:_e,getPosition:ve,disableTextSelection:Kt,enableTextSelection:Xt,disableImageDrag:ge,enableImageDrag:ye,preventOutline:be,restoreOutline:we,getSizedParentNode:xe,getScale:Ee};function ke(t,e,n,i){if("object"==typeof e)for(var o in e)Ie(t,o,e[o],n);else for(var r=0,s=(e=c(e)).length;r<s;r++)Ie(t,e[r],n,i);return this}var Se="_leaflet_events";function Pe(t,e,n,i){if("object"==typeof e)for(var o in e)Me(t,o,e[o],n);else if(e)for(var r=0,s=(e=c(e)).length;r<s;r++)Me(t,e[r],n,i);else{for(var a in t[Se])Me(t,a,t[Se][a]);delete t[Se]}return this}function Le(){if(wt)return!(tt||ut)}var Ae={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ie(t,e,n,i){var o=e+r(n)+(i?"_"+r(i):"");if(t[Se]&&t[Se][o])return this;var s=function(e){return n.call(i||t,e||window.event)},a=s;wt&&0===e.indexOf("touch")?Ft(t,e,s,o):xt&&"dblclick"===e&&!Le()?function(t,e,n){var i,o,r=!1;function s(t){if(wt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),n=e-(i||e);o=t.touches?t.touches[0]:t,r=n>0&&n<=250,i=e}function a(t){if(r&&!o.cancelBubble){if(wt){if("mouse"===t.pointerType)return;var n,s,a={};for(s in o)n=o[s],a[s]=n&&n.bind?n.bind(o):n;o=a}o.type="dblclick",o.button=0,e(o),i=null}}t[Gt+Ht+n]=s,t[Gt+Wt+n]=a,t[Gt+"dblclick"+n]=e,t.addEventListener(Ht,s,!!St&&{passive:!1}),t.addEventListener(Wt,a,!!St&&{passive:!1}),t.addEventListener("dblclick",e,!1)}(t,s,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ae[e]||e,s,!!St&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,He(t,e)&&a(e)},t.addEventListener(Ae[e],s,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[Se]=t[Se]||{},t[Se][o]=s}function Me(t,e,n,i){var o=e+r(n)+(i?"_"+r(i):""),s=t[Se]&&t[Se][o];if(!s)return this;wt&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(zt,i,!1):"touchmove"===e?t.removeEventListener(Nt,i,!1):"touchend"===e&&(t.removeEventListener(Bt,i,!1),t.removeEventListener(Ct,i,!1))}(t,e,o):xt&&"dblclick"===e&&!Le()?function(t,e){var n=t[Gt+Ht+e],i=t[Gt+Wt+e],o=t[Gt+"dblclick"+e];t.removeEventListener(Ht,n,!!St&&{passive:!1}),t.removeEventListener(Wt,i,!!St&&{passive:!1}),t.removeEventListener("dblclick",o,!1)}(t,o):"removeEventListener"in t?t.removeEventListener(Ae[e]||e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[Se][o]=null}function ze(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ue(t),this}function Ne(t){return Ie(t,"wheel",ze),this}function Be(t){return ke(t,"mousedown touchstart dblclick",ze),Ie(t,"click",je),this}function Ce(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Oe(t){return Ce(t),ze(t),this}function Re(t,e){if(!e)return new M(t.clientX,t.clientY);var n=Ee(e),i=n.boundingClientRect;return new M((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Fe=dt&&at?2*window.devicePixelRatio:lt?window.devicePixelRatio:1;function De(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Fe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ze={};function je(t){Ze[t.type]=!0}function Ue(t){var e=Ze[t.type];return Ze[t.type]=!1,e}function He(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var We={on:ke,off:Pe,stopPropagation:ze,disableScrollPropagation:Ne,disableClickPropagation:Be,preventDefault:Ce,stop:Oe,getMousePosition:Re,getWheelDelta:De,fakeStop:je,skipped:Ue,isExternalTarget:He,addListener:ke,removeListener:Pe},Ge=I.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=ve(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),_e(this._el,n),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ke=I.extend({options:{crs:X,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(D(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$t&&vt&&!Et&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ke(this._proxy,Qt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(D(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=(t instanceof M?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/i),s=this.containerPointToLatLng(o.add(r));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():R(t);var n=N(e.paddingTopLeft||e.padding||[0,0]),i=N(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var r=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(s.add(a).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(!(t=R(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=N(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ge,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){le(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!vt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),o=this.project(t),r=this.getSize(),s=this._zoom;t=D(t),e=void 0===e?s:e;var a=Math.max(r.x,r.y),l=a*this.getZoomScale(s,e),u=o.distanceTo(i)||1,h=1.42,c=2.0164;function d(t){var e=(l*l-a*a+(t?-1:1)*c*c*u*u)/(2*(t?l:a)*c*u),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var _=d(0);function v(t){return a*(p(_)*(f(e=_+h*t)/p(e))-f(_))/c;var e}var m=Date.now(),g=(d(1)-_)/h,y=n.duration?1e3*n.duration:1e3*g*.8;return this._moveStart(!0,n.noMoveStart),function n(){var r=(Date.now()-m)/y,l=function(t){return 1-Math.pow(1-t,1.5)}(r)*g;r<=1?(this._flyToFrame=T(n,this),this._move(this.unproject(i.add(o.subtract(i).multiplyBy(v(l)/u)),s),this.getScaleZoom(a/function(t){return a*(p(_)/p(_+h*t))}(l),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=R(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,R(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=N((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=N(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),r=this.project(o),s=this.project(t),a=this.getPixelBounds(),l=a.getSize().divideBy(2),u=C([a.min.add(n),a.max.subtract(i)]);if(!u.contains(s)){this._enforcingBounds=!0;var h=r.subtract(s),c=N(s.x+h.x,s.y+h.y);(s.x<u.min.x||s.x>u.max.x)&&(c.x=r.x-h.x,h.x>0?c.x+=l.x-n.x:c.x-=l.x-i.x),(s.y<u.min.y||s.y>u.max.y)&&(c.y=r.y-h.y,h.y>0?c.y+=l.y-n.y:c.y-=l.y-i.y),this.panTo(this.unproject(c),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),r=n.divideBy(2).round(),s=o.divideBy(2).round(),a=r.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=i(this._handleGeolocationResponse,this),o=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,o,t):navigator.geolocation.getCurrentPosition(n,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new F(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var o=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(o,i.maxZoom):o)}var r={latlng:e,bounds:n,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(r[s]=t.coords[s]);this.fire("locationfound",r)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ie(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ne("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new O(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=R(t),n=N(n||[0,0]);var i=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(n),u=C(this.project(a,i),this.project(s,i)).getSize(),h=vt?this.options.zoomSnap:1,c=l.x/u.x,d=l.y/u.y,f=e?Math.max(c,d):Math.min(c,d);return i=this.getScaleZoom(f,i),h&&(i=Math.round(i/(h/100))*(h/100),i=e?Math.ceil(i/h)*h:Math.floor(i/h)*h),Math.max(o,Math.min(r,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new B(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(D(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(N(t),e)},layerPointToLatLng:function(t){var e=N(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(D(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(D(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(R(t))},distance:function(t,e){return this.options.crs.distance(D(t),D(e))},containerPointToLayerPoint:function(t){return N(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return N(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(N(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(D(t)))},mouseEventToContainerPoint:function(t){return Re(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=te(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");ke(e,"scroll",this._onScroll,this),this._containerId=r(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,le(t,"leaflet-container"+(xt?" leaflet-touch":"")+(kt?" leaflet-retina":"")+(Q?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ee(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(le(t.markerPane,"leaflet-zoom-hide"),le(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){_e(this._mapPane,new M(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){_e(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[r(this._container)]=this;var e=t?Pe:ke;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=T((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],o="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((n=this._targets[r(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(o&&!He(s,t))break;if(i.push(n),o)break}if(s===this._container)break;s=s.parentNode}return i.length||a||o||!He(s,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!Ue(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||be(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var o=e({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,n))).length){var r=i[0];"contextmenu"===n&&r.listens(n,!0)&&Ce(t);var s={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var a=r.getLatLng&&(!r._radius||r._radius<=10);s.containerPoint=a?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?r.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(n,s,!0),s.originalEvent._stopped||!1===i[l].options.bubblingMouseEvents&&-1!==m(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ve(this._mapPane)||new M(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return C([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new B(i.subtract(o),i.add(o)),s=this._getBoundsOffset(r,n,e);return s.round().equals([0,0])?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new B(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=C(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=i.min.subtract(t.min),r=i.max.subtract(t.max);return new M(this._rebound(o.x,-r.x),this._rebound(o.y,-r.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=vt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=Yt,n=this._proxy.style[e];pe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();pe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(o)||(T((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,o){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),T((function(){this._moveEnd(!0)}),this))}});var Xe=P.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return le(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ve=function(t){return new Xe(t)};Ke.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ne("div",e+"control-container",this._container);function i(i,o){var r=e+i+" "+e+o;t[i+o]=ne("div",r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ie(this._controlCorners[t]);ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var qe=Xe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in d(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Xe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(r(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ne("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Be(e),Ne(e);var i=this._section=ne("section",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||ke(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=ne("a",t+"-toggle",e);o.href="#",o.title="Layers",xt?(ke(o,"click",Oe),ke(o,"click",this.expand,this)):ke(o,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ne("div",t+"-base",i),this._separator=ne("div",t+"-separator",i),this._overlaysList=ne("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&r(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oe(this._baseLayersList),oe(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,o=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(r(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+r(this),i),this._layerControlInputs.push(e),e.layerId=r(t.layer),ke(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var s=document.createElement("div");return n.appendChild(s),s.appendChild(e),s.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],o=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||o.push(e);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])&&this._map.removeLayer(o[r]);for(r=0;r<i.length;r++)this._map.hasLayer(i[r])||this._map.addLayer(i[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Je=Xe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ne("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,o){var r=ne("a",n,i);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),Be(r),ke(r,"click",Oe),ke(r,"click",o,this),ke(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ue(this._zoomInButton,e),ue(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&le(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&le(this._zoomInButton,e)}});Ke.mergeOptions({zoomControl:!0}),Ke.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Je,this.addControl(this.zoomControl))}));var Ye=Xe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ne("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ne("div",e,n)),t.imperial&&(this._iScale=ne("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,o=3.2808399*t;o>5280?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(o),this._updateScale(this._iScale,i+" ft",i/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),$e=Xe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ne("div","leaflet-control-attribution"),Be(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ke.mergeOptions({attributionControl:!0}),Ke.addInitHook((function(){this.options.attributionControl&&(new $e).addTo(this)}));Xe.Layers=qe,Xe.Zoom=Je,Xe.Scale=Ye,Xe.Attribution=$e,Ve.layers=function(t,e,n){return new qe(t,e,n)},Ve.zoom=function(t){return new Je(t)},Ve.scale=function(t){return new Ye(t)},Ve.attribution=function(t){return new $e(t)};var Qe=P.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qe.addTo=function(t,e){return t.addHandler(e,this),this};var tn,en={Events:A},nn=xt?"touchstart mousedown":"mousedown",on={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},rn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},sn=I.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){d(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(ke(this._dragStartTarget,nn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sn._dragging===this&&this.finishDrag(),Pe(this._dragStartTarget,nn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!ae(this._element,"leaflet-zoom-anim")&&!(sn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(sn._dragging=this,this._preventOutline&&be(this._element),ge(),Kt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=xe(this._element);this._startPoint=new M(e.clientX,e.clientY),this._parentScale=Ee(n),ke(document,rn[t.type],this._onMove,this),ke(document,on[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new M(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ce(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ve(this._element).subtract(n),le(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,k(this._animRequest),this._lastEvent=t,this._animRequest=T(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),_e(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ue(document.body,"leaflet-dragging"),this._lastTarget&&(ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rn)Pe(document,rn[t],this._onMove,this),Pe(document,on[t],this._onUp,this);ye(),Xt(),this._moved&&this._moving&&(k(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,sn._dragging=!1}});function an(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,un(t,i,e,0,n-1);var o,r=[];for(o=0;o<n;o++)i[o]&&r.push(t[o]);return r}(t=function(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;i<r;i++)fn(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<r-1&&n.push(t[r-1]),n}(t,n),n)}function ln(t,e,n){return Math.sqrt(pn(t,e,n,!0))}function un(t,e,n,i,o){var r,s,a,l=0;for(s=i+1;s<=o-1;s++)(a=pn(t[s],t[i],t[o],!0))>l&&(r=s,l=a);l>n&&(e[r]=1,un(t,e,n,i,r),un(t,e,n,r,o))}function hn(t,e,n,i,o){var r,s,a,l=i?tn:dn(t,n),u=dn(e,n);for(tn=u;;){if(!(l|u))return[t,e];if(l&u)return!1;a=dn(s=cn(t,e,r=l||u,n,o),n),r===l?(t=s,l=a):(e=s,u=a)}}function cn(t,e,n,i,o){var r,s,a=e.x-t.x,l=e.y-t.y,u=i.min,h=i.max;return 8&n?(r=t.x+a*(h.y-t.y)/l,s=h.y):4&n?(r=t.x+a*(u.y-t.y)/l,s=u.y):2&n?(r=h.x,s=t.y+l*(h.x-t.x)/a):1&n&&(r=u.x,s=t.y+l*(u.x-t.x)/a),new M(r,s,o)}function dn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function fn(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function pn(t,e,n,i){var o,r=e.x,s=e.y,a=n.x-r,l=n.y-s,u=a*a+l*l;return u>0&&((o=((t.x-r)*a+(t.y-s)*l)/u)>1?(r=n.x,s=n.y):o>0&&(r+=a*o,s+=l*o)),a=t.x-r,l=t.y-s,i?a*a+l*l:new M(r,s)}function _n(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),_n(t)}var mn={simplify:an,pointToSegmentDistance:ln,closestPointOnSegment:function(t,e,n){return pn(t,e,n)},clipSegment:hn,_getEdgeIntersection:cn,_getBitCode:dn,_sqClosestPointOnSegment:pn,isFlat:_n,_flat:vn};function gn(t,e,n){var i,o,r,s,a,l,u,h,c,d=[1,4,2,8];for(o=0,u=t.length;o<u;o++)t[o]._code=dn(t[o],e);for(s=0;s<4;s++){for(h=d[s],i=[],o=0,r=(u=t.length)-1;o<u;r=o++)a=t[o],l=t[r],a._code&h?l._code&h||((c=cn(l,a,h,e,n))._code=dn(c,e),i.push(c)):(l._code&h&&((c=cn(l,a,h,e,n))._code=dn(c,e),i.push(c)),i.push(a));t=i}return t}var yn={clipPolygon:gn},bn={project:function(t){return new M(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new B([-180,-90],[180,90])},wn={R:6378137,R_MINOR:6356752.314245179,bounds:new B([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),s=r*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),r/2);return i=-n*Math.log(Math.max(a,1e-10)),new M(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),s=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(s),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=r*Math.sin(a),e=Math.pow((1-e)/(1+e),r/2),a+=u=Math.PI/2-2*Math.atan(s*e)-a;return new F(a*n,t.x*n/i)}},xn={LonLat:bn,Mercator:wn,SphericalMercator:W},En=e({},U,{code:"EPSG:3395",projection:wn,transformation:function(){var t=.5/(Math.PI*wn.R);return K(t,.5,-t,.5)}()}),Tn=e({},U,{code:"EPSG:4326",projection:bn,transformation:K(1/180,1,-1/180,.5)}),kn=e({},j,{projection:bn,transformation:K(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});j.Earth=U,j.EPSG3395=En,j.EPSG3857=X,j.EPSG900913=V,j.EPSG4326=Tn,j.Simple=kn;var Sn=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[r(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[r(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ke.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=r(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=r(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&r(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[r(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=r(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var o=this._zoomBoundLayers[i].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pn=Sn.extend({initialize:function(t,e){var n,i;if(d(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return r(t)}}),Ln=Pn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new O;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),An=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var o=N(i),r=N("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return kt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var In=An.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return In.imagePath||(In.imagePath=this._detectIconPath()),(this.options.imagePath||In.imagePath)+An.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ne("div","leaflet-default-icon-path",document.body),e=ee(t,"background-image")||ee(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Mn=Qe.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new sn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),le(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=ve(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),l=C(s.min._subtract(a).add(o),s.max._subtract(a).subtract(o));if(!l.contains(r)){var u=N((Math.max(l.max.x,r.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(i);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),_e(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=T(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=ve(e._icon),o=e._map.layerPointToLatLng(i);n&&_e(n,i),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),zn=Sn.extend({options:{icon:new In,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=D(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=D(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),le(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(le(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ie(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&_e(this._icon,t),this._shadow&&_e(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&de(this._icon,t),this._shadow&&de(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Nn=Sn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Bn=Nn.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=D(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=D(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Nn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new B(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Cn=Bn.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),d(this,n),this._latlng=D(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new O(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Nn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===U.distance){var o=Math.PI/180,r=this._mRadius/U.R/o,s=n.project([e+r,t]),a=n.project([e-r,t]),l=s.add(a).divideBy(2),u=n.unproject(l).lat,h=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(u*o))/(Math.cos(e*o)*Math.cos(u*o)))/o;(isNaN(h)||0===h)&&(h=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(h)?0:l.x-n.project([u,t-h]).x,this._radiusY=l.y-s.y}else{var c=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(c).x}this._updateBounds()}});var On=Nn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,o=null,r=pn,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],u=1,h=l.length;u<h;u++){var c=r(t,e=l[u-1],n=l[u],!0);c<i&&(i=c,o=r(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,s,a=this._rings[0],l=a.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,i=0;t<l-1;t++)if(o=a[t],r=a[t+1],(i+=n=o.distanceTo(r))>e)return s=(i-e)/n,this._map.layerPointToLatLng([r.x-s*(r.x-o.x),r.y-s*(r.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=D(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new O,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return _n(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=_n(t),i=0,o=t.length;i<o;i++)n?(e[i]=D(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new M(t,t);this._pxBounds=new B([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var i,o,r=t[0]instanceof F,s=t.length;if(r){for(o=[],i=0;i<s;i++)o[i]=this._map.latLngToLayerPoint(t[i]),n.extend(o[i]);e.push(o)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,o,r,s,a,l=this._parts;for(e=0,i=0,o=this._rings.length;e<o;e++)for(n=0,r=(a=this._rings[e]).length;n<r-1;n++)(s=hn(a[n],a[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(s[0]),s[1]===a[n+1]&&n!==r-2||(l[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=an(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,o,r,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(i=0,o=(s=(a=this._parts[n]).length)-1;i<s;o=i++)if((e||0!==i)&&ln(t,a[o],a[i])<=l)return!0;return!1}});On._flat=vn;var Rn=On.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,s,a,l,u=this._rings[0],h=u.length;if(!h)return null;for(r=s=a=0,t=0,e=h-1;t<h;e=t++)n=u[t],i=u[e],o=n.y*i.x-i.y*n.x,s+=(n.x+i.x)*o,a+=(n.y+i.y)*o,r+=3*o;return l=0===r?u[0]:[s/r,a/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=On.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof F&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){On.prototype._setLatLngs.call(this,t),_n(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return _n(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new M(e,e);if(t=new B(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,o=0,r=this._rings.length;o<r;o++)(i=gn(this._rings[o],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,o,r,s,a,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(r=0,s=(l=(e=this._parts[o]).length)-1;r<l;s=r++)n=e[r],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u||On.prototype._containsPoint.call(this,t,!0)}});var Fn=Ln.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=v(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)((i=o[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var s=Dn(t,r);return s?(s.feature=Kn(t),s.defaultOptions=s.options,this.resetStyle(s),r.onEachFeature&&r.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Dn(t,e){var n,i,o,r,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,l=[],u=e&&e.pointToLayer,h=e&&e.coordsToLatLng||jn;if(!a&&!s)return null;switch(s.type){case"Point":return Zn(u,t,n=h(a),e);case"MultiPoint":for(o=0,r=a.length;o<r;o++)n=h(a[o]),l.push(Zn(u,t,n,e));return new Ln(l);case"LineString":case"MultiLineString":return i=Un(a,"LineString"===s.type?0:1,h),new On(i,e);case"Polygon":case"MultiPolygon":return i=Un(a,"Polygon"===s.type?1:2,h),new Rn(i,e);case"GeometryCollection":for(o=0,r=s.geometries.length;o<r;o++){var c=Dn({geometry:s.geometries[o],type:"Feature",properties:t.properties},e);c&&l.push(c)}return new Ln(l);default:throw new Error("Invalid GeoJSON object.")}}function Zn(t,e,n,i){return t?t(e,n):new zn(n,i&&i.markersInheritOptions&&i)}function jn(t){return new F(t[1],t[0],t[2])}function Un(t,e,n){for(var i,o=[],r=0,s=t.length;r<s;r++)i=e?Un(t[r],e-1,n):(n||jn)(t[r]),o.push(i);return o}function Hn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function Wn(t,e,n,i){for(var o=[],r=0,s=t.length;r<s;r++)o.push(e?Wn(t[r],e-1,n,i):Hn(t[r],i));return!e&&n&&o.push(o[0]),o}function Gn(t,n){return t.feature?e({},t.feature,{geometry:n}):Kn(n)}function Kn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Xn={toGeoJSON:function(t){return Gn(this,{type:"Point",coordinates:Hn(this.getLatLng(),t)})}};function Vn(t,e){return new Fn(t,e)}zn.include(Xn),Cn.include(Xn),Bn.include(Xn),On.include({toGeoJSON:function(t){var e=!_n(this._latlngs);return Gn(this,{type:(e?"Multi":"")+"LineString",coordinates:Wn(this._latlngs,e?1:0,!1,t)})}}),Rn.include({toGeoJSON:function(t){var e=!_n(this._latlngs),n=e&&!_n(this._latlngs[0]),i=Wn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Gn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Pn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Gn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer((function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(n)i.push(o.geometry);else{var r=Kn(o);"FeatureCollection"===r.type?i.push.apply(i,r.features):i.push(r)}}})),n?Gn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var qn=Vn,Jn=Sn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=R(e),d(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&re(this._image),this},bringToBack:function(){return this._map&&se(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=R(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ne("img");le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;pe(this._image,n,e)},_reset:function(){var t=this._image,e=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();_e(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){de(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Yn=Jn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ne("video");if(le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),o=[],r=0;r<n.length;r++)o.push(n[r].src);this._url=n.length>0?o:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var s=0;s<this._url.length;s++){var a=ne("source");a.src=this._url[s],e.appendChild(a)}}}});var $n=Jn.extend({_initImage:function(){var t=this._image=this._url;le(t,"leaflet-image-layer"),this._zoomAnimated&&le(t,"leaflet-zoom-animated"),this.options.className&&le(t,this.options.className),t.onselectstart=l,t.onmousemove=l}});var Qn=Sn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&de(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&de(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(de(this._container,0),this._removeTimeout=setTimeout(i(ie,void 0,this._container),200)):ie(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=D(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&re(this._container),this},bringToBack:function(){return this._map&&se(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Sn||(n=e,e=t),e instanceof Ln)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=N(this.options.offset),n=this._getAnchor();this._zoomAnimated?_e(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),ti=Qn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Qn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Nn||this._source.on("preclick",ze))},onRemove:function(t){Qn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Nn||this._source.off("preclick",ze))},getEvents:function(){var t=Qn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ne("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ne("div",t+"-content-wrapper",e);if(this._contentNode=ne("div",t+"-content",n),Be(e),Ne(this._contentNode),ke(e,"contextmenu",ze),this._tipContainer=ne("div",t+"-tip-container",e),this._tip=ne("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ne("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",ke(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&i>o?(e.height=o+"px",le(t,r)):ue(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();_e(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(ee(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,o=new M(this._containerLeft,-n-this._containerBottom);o._add(ve(this._container));var r=t.layerPointToContainerPoint(o),s=N(this.options.autoPanPadding),a=N(this.options.autoPanPaddingTopLeft||s),l=N(this.options.autoPanPaddingBottomRight||s),u=t.getSize(),h=0,c=0;r.x+i+l.x>u.x&&(h=r.x+i-u.x+l.x),r.x-h-a.x<0&&(h=r.x-a.x),r.y+n+l.y>u.y&&(c=r.y+n-u.y+l.y),r.y-c-a.y<0&&(c=r.y-a.y),(h||c)&&t.fire("autopanstart").panBy([h,c])}},_onCloseButtonClick:function(t){this._close(),Oe(t)},_getAnchor:function(){return N(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ke.mergeOptions({closePopupOnClick:!0}),Ke.include({openPopup:function(t,e,n){return t instanceof ti||(t=new ti(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Sn.include({bindPopup:function(t,e){return t instanceof ti?(d(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new ti(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Oe(t),e instanceof Nn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var ei=Qn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Qn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Qn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Qn.prototype.getEvents.call(this);return xt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ne("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,o=this._container,r=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(t),a=this.options.direction,l=o.offsetWidth,u=o.offsetHeight,h=N(this.options.offset),c=this._getAnchor();"top"===a?(e=l/2,n=u):"bottom"===a?(e=l/2,n=0):"center"===a?(e=l/2,n=u/2):"right"===a?(e=0,n=u/2):"left"===a?(e=l,n=u/2):s.x<r.x?(a="right",e=0,n=u/2):(a="left",e=l+2*(h.x+c.x),n=u/2),t=t.subtract(N(e,n,!0)).add(h).add(c),ue(o,"leaflet-tooltip-right"),ue(o,"leaflet-tooltip-left"),ue(o,"leaflet-tooltip-top"),ue(o,"leaflet-tooltip-bottom"),le(o,"leaflet-tooltip-"+a),_e(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&de(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return N(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ke.include({openTooltip:function(t,e,n){return t instanceof ei||(t=new ei(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Sn.include({bindTooltip:function(t,e){return t instanceof ei?(d(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new ei(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),xt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(le(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ue(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ni=An.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(oe(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=N(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});An.Default=In;var ii=Sn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:mt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ie(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(re(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(se(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof M?t:new M(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),o=0,r=n.length;o<r;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Q){de(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var o=this._tiles[i];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);de(o.el,r),r<1?e=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(k(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ie(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],o=this._map;return i||((i=this._levels[t]={}).el=ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,o.getCenter(),o.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ie(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var o=Math.floor(t/2),r=Math.floor(e/2),s=n-1,a=new M(+o,+r);a.z=+s;var l=this._tileCoordsToKey(a),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),s>i&&this._retainParent(o,r,s,i))},_retainChildren:function(t,e,n,i){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var s=new M(o,r);s.z=n+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(o,r,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var o=Math.round(e);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var r=this.options.updateWhenZooming&&o!==this._tileZoom;i&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();vt?pe(t.el,o,i):_e(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*i);return new B(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),r=o.getCenter(),s=[],a=this.options.keepBuffer,l=new B(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var h=this._tiles[u].coords;h.z===this._tileZoom&&l.contains(new M(h.x,h.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var c=o.min.y;c<=o.max.y;c++)for(var d=o.min.x;d<=o.max.x;d++){var f=new M(d,c);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:s.push(f)}}if(s.sort((function(t,e){return t.distanceTo(r)-e.distanceTo(r)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var _=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],_);this._level.el.appendChild(_)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return R(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),o=i.add(n);return[e.unproject(i,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new O(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new M(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ie(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){le(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,Q&&this.options.opacity<1&&de(t,this.options.opacity),nt&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&T(i(this._tileReady,this,t,null,r)),_e(r,n),this._tiles[o]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var o=this._tileCoordsToKey(t);(n=this._tiles[o])&&(n.loaded=+new Date,this._map._fadeAnimated?(de(n.el,0),k(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(le(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Q||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new M(this._wrapX?a(t.x,this._wrapX):t.x,this._wrapY?a(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new B(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var oi=ii.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&kt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return ke(n,"load",i(this._tileOnLoad,this,e,n)),ke(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:kt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return _(this._url,e(n,this.options))},_tileOnLoad:function(t,e){Q?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=g,ie(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return rt||e.el.setAttribute("src",g),ii.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==g))return ii.prototype._tileReady.call(this,t,e,n)}});function ri(t,e){return new oi(t,e)}var si=oi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var o in n)o in this.options||(i[o]=n[o]);var r=(n=d(this,n)).detectRetina&&kt?2:1,s=this.getTileSize();i.width=s.x*r,i.height=s.y*r,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,oi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=C(n.project(e[0]),n.project(e[1])),o=i.min,r=i.max,s=(this._wmsVersion>=1.3&&this._crs===Tn?[o.y,o.x,r.y,r.x]:[o.x,o.y,r.x,r.y]).join(","),a=oi.prototype.getTileUrl.call(this,t);return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});oi.WMS=si,ri.wms=function(t,e){return new si(t,e)};var ai=Sn.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t),r(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=ve(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),s=this._map.project(t,e).subtract(r),a=o.multiplyBy(-n).add(i).add(o).subtract(s);vt?pe(this._container,a,n):_e(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new B(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),li=ai.extend({getEvents:function(){var t=ai.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ai.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ke(t,"mousemove",this._onMouseMove,this),ke(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ke(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,ie(this._container),Pe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ai.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=kt?2:1;_e(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",kt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ai.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[r(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[r(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),o=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,o,r,s=t._parts,a=s.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(i=0,o=s[n].length;i<o;i++)r=s[n][i],l[i?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,i,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&(je(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ue(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,o,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(o=n);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(le(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function ui(t){return Pt?new li(t):null}var hi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ci={_initContainer:function(){this._container=ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ai.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hi("shape");le(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ie(e),t.removeInteractiveTarget(e),delete this._layers[r(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,o=t._container;o.stroked=!!i.stroke,o.filled=!!i.fill,i.stroke?(e||(e=t._stroke=hi("stroke")),o.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(o.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=hi("fill")),o.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){re(t._container)},_bringToBack:function(t){se(t._container)}},di=At?hi:q,fi=ai.extend({getEvents:function(){var t=ai.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=di("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=di("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ie(this._container),Pe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ai.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),_e(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=di("path");t.options.className&&le(e,t.options.className),t.options.interactive&&le(e,"leaflet-interactive"),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ie(t._path),t.removeInteractiveTarget(t._path),delete this._layers[r(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,J(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){re(t._path)},_bringToBack:function(t){se(t._path)}});function pi(t){return Lt||At?new fi(t):null}At&&fi.include(ci),Ke.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ui(t)||pi(t)}});var _i=Rn.extend({initialize:function(t,e){Rn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=R(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});fi.create=di,fi.pointsToPath=J,Fn.geometryToLayer=Dn,Fn.coordsToLatLng=jn,Fn.coordsToLatLngs=Un,Fn.latLngToCoords=Hn,Fn.latLngsToCoords=Wn,Fn.getFeature=Gn,Fn.asFeature=Kn,Ke.mergeOptions({boxZoom:!0});var vi=Qe.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Kt(),ge(),this._startPoint=this._map.mouseEventToContainerPoint(t),ke(document,{contextmenu:Oe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ne("div","leaflet-zoom-box",this._container),le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new B(this._point,this._startPoint),n=e.getSize();_e(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ie(this._box),ue(this._container,"leaflet-crosshair")),Xt(),ye(),Pe(document,{contextmenu:Oe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new O(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ke.addInitHook("addHandler","boxZoom",vi),Ke.mergeOptions({doubleClickZoom:!0});var mi=Qe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});Ke.addInitHook("addHandler","doubleClickZoom",mi),Ke.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gi=Qe.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new sn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ue(this._map._container,"leaflet-grab"),ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=R(this._map.options.maxBounds);this._offsetLimit=C(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,s=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=o.multiplyBy(s/r),l=a.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),h=a.multiplyBy(u/l),c=u/(n.inertiaDeceleration*s),d=h.multiplyBy(-c/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),T((function(){e.panBy(d,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Ke.addInitHook("addHandler","dragging",gi),Ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yi=Qe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ke(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Pe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=N(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Oe(t)}}});Ke.addInitHook("addHandler","keyboard",yi),Ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bi=Qe.extend({addHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=De(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),o),Oe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(o/n)*n:o,s=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Ke.addInitHook("addHandler","scrollWheelZoom",bi),Ke.mergeOptions({tap:!0,tapTolerance:15});var wi=Qe.extend({addHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Ce(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new M(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&le(n,"leaflet-active"),this._holdTimeout=setTimeout(i((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),ke(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Pe(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&ue(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new M(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!xt||wt&&!ut||Ke.addInitHook("addHandler","tap",wi),Ke.mergeOptions({touchZoom:xt&&!it,bounceAtZoomLimits:!0});var xi=Qe.extend({addHooks:function(){le(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend",this._onTouchEnd,this),Ce(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var s=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var a=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=T(a,this,!0),Ce(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,k(this._animRequest),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ke.addInitHook("addHandler","touchZoom",xi),Ke.BoxZoom=vi,Ke.DoubleClickZoom=mi,Ke.Drag=gi,Ke.Keyboard=yi,Ke.ScrollWheelZoom=bi,Ke.Tap=wi,Ke.TouchZoom=xi,t.version="1.7.1",t.Control=Xe,t.control=Ve,t.Browser=Mt,t.Evented=I,t.Mixin=en,t.Util=S,t.Class=P,t.Handler=Qe,t.extend=e,t.bind=i,t.stamp=r,t.setOptions=d,t.DomEvent=We,t.DomUtil=Te,t.PosAnimation=Ge,t.Draggable=sn,t.LineUtil=mn,t.PolyUtil=yn,t.Point=M,t.point=N,t.Bounds=B,t.bounds=C,t.Transformation=G,t.transformation=K,t.Projection=xn,t.LatLng=F,t.latLng=D,t.LatLngBounds=O,t.latLngBounds=R,t.CRS=j,t.GeoJSON=Fn,t.geoJSON=Vn,t.geoJson=qn,t.Layer=Sn,t.LayerGroup=Pn,t.layerGroup=function(t,e){return new Pn(t,e)},t.FeatureGroup=Ln,t.featureGroup=function(t,e){return new Ln(t,e)},t.ImageOverlay=Jn,t.imageOverlay=function(t,e,n){return new Jn(t,e,n)},t.VideoOverlay=Yn,t.videoOverlay=function(t,e,n){return new Yn(t,e,n)},t.SVGOverlay=$n,t.svgOverlay=function(t,e,n){return new $n(t,e,n)},t.DivOverlay=Qn,t.Popup=ti,t.popup=function(t,e){return new ti(t,e)},t.Tooltip=ei,t.tooltip=function(t,e){return new ei(t,e)},t.Icon=An,t.icon=function(t){return new An(t)},t.DivIcon=ni,t.divIcon=function(t){return new ni(t)},t.Marker=zn,t.marker=function(t,e){return new zn(t,e)},t.TileLayer=oi,t.tileLayer=ri,t.GridLayer=ii,t.gridLayer=function(t){return new ii(t)},t.SVG=fi,t.svg=pi,t.Renderer=ai,t.Canvas=li,t.canvas=ui,t.Path=Nn,t.CircleMarker=Bn,t.circleMarker=function(t,e){return new Bn(t,e)},t.Circle=Cn,t.circle=function(t,e,n){return new Cn(t,e,n)},t.Polyline=On,t.polyline=function(t,e){return new On(t,e)},t.Polygon=Rn,t.polygon=function(t,e){return new Rn(t,e)},t.Rectangle=_i,t.rectangle=function(t,e){return new _i(t,e)},t.Map=Ke,t.map=function(t,e){return new Ke(t,e)};var Ei=window.L;t.noConflict=function(){return window.L=Ei,this},window.L=t}(e)},486:function(t,e,n){var i;t=n.nmd(t),function(){var o,r="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=32,u=128,h=1/0,c=9007199254740991,d=NaN,f=4294967295,p=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],_="[object Arguments]",v="[object Array]",m="[object Boolean]",g="[object Date]",y="[object Error]",b="[object Function]",w="[object GeneratorFunction]",x="[object Map]",E="[object Number]",T="[object Object]",k="[object Promise]",S="[object RegExp]",P="[object Set]",L="[object String]",A="[object Symbol]",I="[object WeakMap]",M="[object ArrayBuffer]",z="[object DataView]",N="[object Float32Array]",B="[object Float64Array]",C="[object Int8Array]",O="[object Int16Array]",R="[object Int32Array]",F="[object Uint8Array]",D="[object Uint8ClampedArray]",Z="[object Uint16Array]",j="[object Uint32Array]",U=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,X=RegExp(G.source),V=RegExp(K.source),q=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),it=/^\s+/,ot=/\s/,rt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,ht=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,_t=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yt=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="a-z\\xdf-\\xf6\\xf8-\\xff",Et="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kt="["+Tt+"]",St="["+wt+"]",Pt="\\d+",Lt="["+xt+"]",At="[^\\ud800-\\udfff"+Tt+Pt+"\\u2700-\\u27bf"+xt+Et+"]",It="\\ud83c[\\udffb-\\udfff]",Mt="[^\\ud800-\\udfff]",zt="(?:\\ud83c[\\udde6-\\uddff]){2}",Nt="[\\ud800-\\udbff][\\udc00-\\udfff]",Bt="["+Et+"]",Ct="(?:"+Lt+"|"+At+")",Ot="(?:"+Bt+"|"+At+")",Rt="(?:['’](?:d|ll|m|re|s|t|ve))?",Ft="(?:['’](?:D|LL|M|RE|S|T|VE))?",Dt="(?:"+St+"|"+It+")?",Zt="[\\ufe0e\\ufe0f]?",jt=Zt+Dt+"(?:\\u200d(?:"+[Mt,zt,Nt].join("|")+")"+Zt+Dt+")*",Ut="(?:"+["[\\u2700-\\u27bf]",zt,Nt].join("|")+")"+jt,Ht="(?:"+[Mt+St+"?",St,zt,Nt,"[\\ud800-\\udfff]"].join("|")+")",Wt=RegExp("['’]","g"),Gt=RegExp(St,"g"),Kt=RegExp(It+"(?="+It+")|"+Ht+jt,"g"),Xt=RegExp([Bt+"?"+Lt+"+"+Rt+"(?="+[kt,Bt,"$"].join("|")+")",Ot+"+"+Ft+"(?="+[kt,Bt+Ct,"$"].join("|")+")",Bt+"?"+Ct+"+"+Rt,Bt+"+"+Ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pt,Ut].join("|"),"g"),Vt=RegExp("[\\u200d\\ud800-\\udfff"+wt+"\\ufe0e\\ufe0f]"),qt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yt=-1,$t={};$t[N]=$t[B]=$t[C]=$t[O]=$t[R]=$t[F]=$t[D]=$t[Z]=$t[j]=!0,$t[_]=$t[v]=$t[M]=$t[m]=$t[z]=$t[g]=$t[y]=$t[b]=$t[x]=$t[E]=$t[T]=$t[S]=$t[P]=$t[L]=$t[I]=!1;var Qt={};Qt[_]=Qt[v]=Qt[M]=Qt[z]=Qt[m]=Qt[g]=Qt[N]=Qt[B]=Qt[C]=Qt[O]=Qt[R]=Qt[x]=Qt[E]=Qt[T]=Qt[S]=Qt[P]=Qt[L]=Qt[A]=Qt[F]=Qt[D]=Qt[Z]=Qt[j]=!0,Qt[y]=Qt[b]=Qt[I]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,ie="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,oe="object"==typeof self&&self&&self.Object===Object&&self,re=ie||oe||Function("return this")(),se=e&&!e.nodeType&&e,ae=se&&t&&!t.nodeType&&t,le=ae&&ae.exports===se,ue=le&&ie.process,he=function(){try{return ae&&ae.require&&ae.require("util").types||ue&&ue.binding&&ue.binding("util")}catch(t){}}(),ce=he&&he.isArrayBuffer,de=he&&he.isDate,fe=he&&he.isMap,pe=he&&he.isRegExp,_e=he&&he.isSet,ve=he&&he.isTypedArray;function me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ge(t,e,n,i){for(var o=-1,r=null==t?0:t.length;++o<r;){var s=t[o];e(i,s,n(s),t)}return i}function ye(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function be(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function xe(t,e){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var s=t[n];e(s,n,t)&&(r[o++]=s)}return r}function Ee(t,e){return!(null==t||!t.length)&&Ne(t,e,0)>-1}function Te(t,e,n){for(var i=-1,o=null==t?0:t.length;++i<o;)if(n(e,t[i]))return!0;return!1}function ke(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}function Se(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t}function Pe(t,e,n,i){var o=-1,r=null==t?0:t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}function Le(t,e,n,i){var o=null==t?0:t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function Ae(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var Ie=Re("length");function Me(t,e,n){var i;return n(t,(function(t,n,o){if(e(t,n,o))return i=n,!1})),i}function ze(t,e,n,i){for(var o=t.length,r=n+(i?1:-1);i?r--:++r<o;)if(e(t[r],r,t))return r;return-1}function Ne(t,e,n){return e==e?function(t,e,n){for(var i=n-1,o=t.length;++i<o;)if(t[i]===e)return i;return-1}(t,e,n):ze(t,Ce,n)}function Be(t,e,n,i){for(var o=n-1,r=t.length;++o<r;)if(i(t[o],e))return o;return-1}function Ce(t){return t!=t}function Oe(t,e){var n=null==t?0:t.length;return n?Ze(t,e)/n:d}function Re(t){return function(e){return null==e?o:e[t]}}function Fe(t){return function(e){return null==t?o:t[e]}}function De(t,e,n,i,o){return o(t,(function(t,o,r){n=i?(i=!1,t):e(n,t,o,r)})),n}function Ze(t,e){for(var n,i=-1,r=t.length;++i<r;){var s=e(t[i]);s!==o&&(n=n===o?s:n+s)}return n}function je(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Ue(t){return t?t.slice(0,an(t)+1).replace(it,""):t}function He(t){return function(e){return t(e)}}function We(t,e){return ke(e,(function(e){return t[e]}))}function Ge(t,e){return t.has(e)}function Ke(t,e){for(var n=-1,i=t.length;++n<i&&Ne(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length;n--&&Ne(e,t[n],0)>-1;);return n}function Ve(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var qe=Fe({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Je=Fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ye(t){return"\\"+te[t]}function $e(t){return Vt.test(t)}function Qe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,i=t.length,o=0,r=[];++n<i;){var s=t[n];s!==e&&s!==a||(t[n]=a,r[o++]=n)}return r}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function on(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function rn(t){return $e(t)?function(t){for(var e=Kt.lastIndex=0;Kt.test(t);)++e;return e}(t):Ie(t)}function sn(t){return $e(t)?function(t){return t.match(Kt)||[]}(t):function(t){return t.split("")}(t)}function an(t){for(var e=t.length;e--&&ot.test(t.charAt(e)););return e}var ln=Fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),un=function t(e){var n,i=(e=null==e?re:un.defaults(re.Object(),e,un.pick(re,Jt))).Array,ot=e.Date,wt=e.Error,xt=e.Function,Et=e.Math,Tt=e.Object,kt=e.RegExp,St=e.String,Pt=e.TypeError,Lt=i.prototype,At=xt.prototype,It=Tt.prototype,Mt=e["__core-js_shared__"],zt=At.toString,Nt=It.hasOwnProperty,Bt=0,Ct=(n=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ot=It.toString,Rt=zt.call(Tt),Ft=re._,Dt=kt("^"+zt.call(Nt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zt=le?e.Buffer:o,jt=e.Symbol,Ut=e.Uint8Array,Ht=Zt?Zt.allocUnsafe:o,Kt=tn(Tt.getPrototypeOf,Tt),Vt=Tt.create,te=It.propertyIsEnumerable,ie=Lt.splice,oe=jt?jt.isConcatSpreadable:o,se=jt?jt.iterator:o,ae=jt?jt.toStringTag:o,ue=function(){try{var t=hr(Tt,"defineProperty");return t({},"",{}),t}catch(t){}}(),he=e.clearTimeout!==re.clearTimeout&&e.clearTimeout,Ie=ot&&ot.now!==re.Date.now&&ot.now,Fe=e.setTimeout!==re.setTimeout&&e.setTimeout,hn=Et.ceil,cn=Et.floor,dn=Tt.getOwnPropertySymbols,fn=Zt?Zt.isBuffer:o,pn=e.isFinite,_n=Lt.join,vn=tn(Tt.keys,Tt),mn=Et.max,gn=Et.min,yn=ot.now,bn=e.parseInt,wn=Et.random,xn=Lt.reverse,En=hr(e,"DataView"),Tn=hr(e,"Map"),kn=hr(e,"Promise"),Sn=hr(e,"Set"),Pn=hr(e,"WeakMap"),Ln=hr(Tt,"create"),An=Pn&&new Pn,In={},Mn=Dr(En),zn=Dr(Tn),Nn=Dr(kn),Bn=Dr(Sn),Cn=Dr(Pn),On=jt?jt.prototype:o,Rn=On?On.valueOf:o,Fn=On?On.toString:o;function Dn(t){if(na(t)&&!Gs(t)&&!(t instanceof Hn)){if(t instanceof Un)return t;if(Nt.call(t,"__wrapped__"))return Zr(t)}return new Un(t)}var Zn=function(){function t(){}return function(e){if(!ea(e))return{};if(Vt)return Vt(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function jn(){}function Un(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Kn;++e<n;)this.add(t[e])}function Vn(t){var e=this.__data__=new Gn(t);this.size=e.size}function qn(t,e){var n=Gs(t),i=!n&&Ws(t),o=!n&&!i&&qs(t),r=!n&&!i&&!o&&ha(t),s=n||i||o||r,a=s?je(t.length,St):[],l=a.length;for(var u in t)!e&&!Nt.call(t,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||r&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||mr(u,l))||a.push(u);return a}function Jn(t){var e=t.length;return e?t[Ki(0,e-1)]:o}function Yn(t,e){return Br(Lo(t),si(e,0,t.length))}function $n(t){return Br(Lo(t))}function Qn(t,e,n){(n!==o&&!js(t[e],n)||n===o&&!(e in t))&&oi(t,e,n)}function ti(t,e,n){var i=t[e];Nt.call(t,e)&&js(i,n)&&(n!==o||e in t)||oi(t,e,n)}function ei(t,e){for(var n=t.length;n--;)if(js(t[n][0],e))return n;return-1}function ni(t,e,n,i){return ci(t,(function(t,o,r){e(i,t,n(t),r)})),i}function ii(t,e){return t&&Ao(e,za(e),t)}function oi(t,e,n){"__proto__"==e&&ue?ue(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ri(t,e){for(var n=-1,r=e.length,s=i(r),a=null==t;++n<r;)s[n]=a?o:Pa(t,e[n]);return s}function si(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function ai(t,e,n,i,r,s){var a,l=1&e,u=2&e,h=4&e;if(n&&(a=r?n(t,i,r,s):n(t)),a!==o)return a;if(!ea(t))return t;var c=Gs(t);if(c){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Nt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return Lo(t,a)}else{var d=fr(t),f=d==b||d==w;if(qs(t))return xo(t,l);if(d==T||d==_||f&&!r){if(a=u||f?{}:_r(t),!l)return u?function(t,e){return Ao(t,dr(t),e)}(t,function(t,e){return t&&Ao(e,Na(e),t)}(a,t)):function(t,e){return Ao(t,cr(t),e)}(t,ii(a,t))}else{if(!Qt[d])return r?t:{};a=function(t,e,n){var i,o=t.constructor;switch(e){case M:return Eo(t);case m:case g:return new o(+t);case z:return function(t,e){var n=e?Eo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case B:case C:case O:case R:case F:case D:case Z:case j:return To(t,n);case x:return new o;case E:case L:return new o(t);case S:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case P:return new o;case A:return i=t,Rn?Tt(Rn.call(i)):{}}}(t,d,l)}}s||(s=new Vn);var p=s.get(t);if(p)return p;s.set(t,a),aa(t)?t.forEach((function(i){a.add(ai(i,e,n,i,t,s))})):ia(t)&&t.forEach((function(i,o){a.set(o,ai(i,e,n,o,t,s))}));var v=c?o:(h?u?ir:nr:u?Na:za)(t);return ye(v||t,(function(i,o){v&&(i=t[o=i]),ti(a,o,ai(i,e,n,o,t,s))})),a}function li(t,e,n){var i=n.length;if(null==t)return!i;for(t=Tt(t);i--;){var r=n[i],s=e[r],a=t[r];if(a===o&&!(r in t)||!s(a))return!1}return!0}function ui(t,e,n){if("function"!=typeof t)throw new Pt(r);return Ir((function(){t.apply(o,n)}),e)}function hi(t,e,n,i){var o=-1,r=Ee,s=!0,a=t.length,l=[],u=e.length;if(!a)return l;n&&(e=ke(e,He(n))),i?(r=Te,s=!1):e.length>=200&&(r=Ge,s=!1,e=new Xn(e));t:for(;++o<a;){var h=t[o],c=null==n?h:n(h);if(h=i||0!==h?h:0,s&&c==c){for(var d=u;d--;)if(e[d]===c)continue t;l.push(h)}else r(e,c,i)||l.push(h)}return l}Dn.templateSettings={escape:q,evaluate:J,interpolate:Y,variable:"",imports:{_:Dn}},Dn.prototype=jn.prototype,Dn.prototype.constructor=Dn,Un.prototype=Zn(jn.prototype),Un.prototype.constructor=Un,Hn.prototype=Zn(jn.prototype),Hn.prototype.constructor=Hn,Wn.prototype.clear=function(){this.__data__=Ln?Ln(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(t){var e=this.__data__;if(Ln){var n=e[t];return n===s?o:n}return Nt.call(e,t)?e[t]:o},Wn.prototype.has=function(t){var e=this.__data__;return Ln?e[t]!==o:Nt.call(e,t)},Wn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ln&&e===o?s:e,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=ei(e,t);return!(n<0||(n==e.length-1?e.pop():ie.call(e,n,1),--this.size,0))},Gn.prototype.get=function(t){var e=this.__data__,n=ei(e,t);return n<0?o:e[n][1]},Gn.prototype.has=function(t){return ei(this.__data__,t)>-1},Gn.prototype.set=function(t,e){var n=this.__data__,i=ei(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Tn||Gn),string:new Wn}},Kn.prototype.delete=function(t){var e=lr(this,t).delete(t);return this.size-=e?1:0,e},Kn.prototype.get=function(t){return lr(this,t).get(t)},Kn.prototype.has=function(t){return lr(this,t).has(t)},Kn.prototype.set=function(t,e){var n=lr(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Xn.prototype.add=Xn.prototype.push=function(t){return this.__data__.set(t,s),this},Xn.prototype.has=function(t){return this.__data__.has(t)},Vn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Vn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Vn.prototype.get=function(t){return this.__data__.get(t)},Vn.prototype.has=function(t){return this.__data__.has(t)},Vn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Gn){var i=n.__data__;if(!Tn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Kn(i)}return n.set(t,e),this.size=n.size,this};var ci=zo(yi),di=zo(bi,!0);function fi(t,e){var n=!0;return ci(t,(function(t,i,o){return n=!!e(t,i,o)})),n}function pi(t,e,n){for(var i=-1,r=t.length;++i<r;){var s=t[i],a=e(s);if(null!=a&&(l===o?a==a&&!ua(a):n(a,l)))var l=a,u=s}return u}function _i(t,e){var n=[];return ci(t,(function(t,i,o){e(t,i,o)&&n.push(t)})),n}function vi(t,e,n,i,o){var r=-1,s=t.length;for(n||(n=vr),o||(o=[]);++r<s;){var a=t[r];e>0&&n(a)?e>1?vi(a,e-1,n,i,o):Se(o,a):i||(o[o.length]=a)}return o}var mi=No(),gi=No(!0);function yi(t,e){return t&&mi(t,e,za)}function bi(t,e){return t&&gi(t,e,za)}function wi(t,e){return xe(e,(function(e){return $s(t[e])}))}function xi(t,e){for(var n=0,i=(e=go(e,t)).length;null!=t&&n<i;)t=t[Fr(e[n++])];return n&&n==i?t:o}function Ei(t,e,n){var i=e(t);return Gs(t)?i:Se(i,n(t))}function Ti(t){return null==t?t===o?"[object Undefined]":"[object Null]":ae&&ae in Tt(t)?function(t){var e=Nt.call(t,ae),n=t[ae];try{t[ae]=o;var i=!0}catch(t){}var r=Ot.call(t);return i&&(e?t[ae]=n:delete t[ae]),r}(t):function(t){return Ot.call(t)}(t)}function ki(t,e){return t>e}function Si(t,e){return null!=t&&Nt.call(t,e)}function Pi(t,e){return null!=t&&e in Tt(t)}function Li(t,e,n){for(var r=n?Te:Ee,s=t[0].length,a=t.length,l=a,u=i(a),h=1/0,c=[];l--;){var d=t[l];l&&e&&(d=ke(d,He(e))),h=gn(d.length,h),u[l]=!n&&(e||s>=120&&d.length>=120)?new Xn(l&&d):o}d=t[0];var f=-1,p=u[0];t:for(;++f<s&&c.length<h;){var _=d[f],v=e?e(_):_;if(_=n||0!==_?_:0,!(p?Ge(p,v):r(c,v,n))){for(l=a;--l;){var m=u[l];if(!(m?Ge(m,v):r(t[l],v,n)))continue t}p&&p.push(v),c.push(_)}}return c}function Ai(t,e,n){var i=null==(t=Sr(t,e=go(e,t)))?t:t[Fr(Yr(e))];return null==i?o:me(i,t,n)}function Ii(t){return na(t)&&Ti(t)==_}function Mi(t,e,n,i,r){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,i,r,s){var a=Gs(t),l=Gs(e),u=a?v:fr(t),h=l?v:fr(e),c=(u=u==_?T:u)==T,d=(h=h==_?T:h)==T,f=u==h;if(f&&qs(t)){if(!qs(e))return!1;a=!0,c=!1}if(f&&!c)return s||(s=new Vn),a||ha(t)?tr(t,e,n,i,r,s):function(t,e,n,i,o,r,s){switch(n){case z:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M:return!(t.byteLength!=e.byteLength||!r(new Ut(t),new Ut(e)));case m:case g:case E:return js(+t,+e);case y:return t.name==e.name&&t.message==e.message;case S:case L:return t==e+"";case x:var a=Qe;case P:var l=1&i;if(a||(a=nn),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;i|=2,s.set(t,e);var h=tr(a(t),a(e),i,o,r,s);return s.delete(t),h;case A:if(Rn)return Rn.call(t)==Rn.call(e)}return!1}(t,e,u,n,i,r,s);if(!(1&n)){var p=c&&Nt.call(t,"__wrapped__"),b=d&&Nt.call(e,"__wrapped__");if(p||b){var w=p?t.value():t,k=b?e.value():e;return s||(s=new Vn),r(w,k,n,i,s)}}return!!f&&(s||(s=new Vn),function(t,e,n,i,r,s){var a=1&n,l=nr(t),u=l.length;if(u!=nr(e).length&&!a)return!1;for(var h=u;h--;){var c=l[h];if(!(a?c in e:Nt.call(e,c)))return!1}var d=s.get(t),f=s.get(e);if(d&&f)return d==e&&f==t;var p=!0;s.set(t,e),s.set(e,t);for(var _=a;++h<u;){var v=t[c=l[h]],m=e[c];if(i)var g=a?i(m,v,c,e,t,s):i(v,m,c,t,e,s);if(!(g===o?v===m||r(v,m,n,i,s):g)){p=!1;break}_||(_="constructor"==c)}if(p&&!_){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,i,r,s))}(t,e,n,i,Mi,r))}function zi(t,e,n,i){var r=n.length,s=r,a=!i;if(null==t)return!s;for(t=Tt(t);r--;){var l=n[r];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++r<s;){var u=(l=n[r])[0],h=t[u],c=l[1];if(a&&l[2]){if(h===o&&!(u in t))return!1}else{var d=new Vn;if(i)var f=i(h,c,u,t,e,d);if(!(f===o?Mi(c,h,3,i,d):f))return!1}}return!0}function Ni(t){return!(!ea(t)||(e=t,Ct&&Ct in e))&&($s(t)?Dt:_t).test(Dr(t));var e}function Bi(t){return"function"==typeof t?t:null==t?ol:"object"==typeof t?Gs(t)?Di(t[0],t[1]):Fi(t):fl(t)}function Ci(t){if(!xr(t))return vn(t);var e=[];for(var n in Tt(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Oi(t,e){return t<e}function Ri(t,e){var n=-1,o=Xs(t)?i(t.length):[];return ci(t,(function(t,i,r){o[++n]=e(t,i,r)})),o}function Fi(t){var e=ur(t);return 1==e.length&&e[0][2]?Tr(e[0][0],e[0][1]):function(n){return n===t||zi(n,t,e)}}function Di(t,e){return yr(t)&&Er(e)?Tr(Fr(t),e):function(n){var i=Pa(n,t);return i===o&&i===e?La(n,t):Mi(e,i,3)}}function Zi(t,e,n,i,r){t!==e&&mi(e,(function(s,a){if(r||(r=new Vn),ea(s))!function(t,e,n,i,r,s,a){var l=Lr(t,n),u=Lr(e,n),h=a.get(u);if(h)Qn(t,n,h);else{var c=s?s(l,u,n+"",t,e,a):o,d=c===o;if(d){var f=Gs(u),p=!f&&qs(u),_=!f&&!p&&ha(u);c=u,f||p||_?Gs(l)?c=l:Vs(l)?c=Lo(l):p?(d=!1,c=xo(u,!0)):_?(d=!1,c=To(u,!0)):c=[]:ra(u)||Ws(u)?(c=l,Ws(l)?c=ga(l):ea(l)&&!$s(l)||(c=_r(u))):d=!1}d&&(a.set(u,c),r(c,u,i,s,a),a.delete(u)),Qn(t,n,c)}}(t,e,a,n,Zi,i,r);else{var l=i?i(Lr(t,a),s,a+"",t,e,r):o;l===o&&(l=s),Qn(t,a,l)}}),Na)}function ji(t,e){var n=t.length;if(n)return mr(e+=e<0?n:0,n)?t[e]:o}function Ui(t,e,n){e=e.length?ke(e,(function(t){return Gs(t)?function(e){return xi(e,1===t.length?t[0]:t)}:t})):[ol];var i=-1;e=ke(e,He(ar()));var o=Ri(t,(function(t,n,o){var r=ke(e,(function(e){return e(t)}));return{criteria:r,index:++i,value:t}}));return function(t,e){var i=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var i=-1,o=t.criteria,r=e.criteria,s=o.length,a=n.length;++i<s;){var l=ko(o[i],r[i]);if(l)return i>=a?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}));i--;)t[i]=t[i].value;return t}(o)}function Hi(t,e,n){for(var i=-1,o=e.length,r={};++i<o;){var s=e[i],a=xi(t,s);n(a,s)&&Yi(r,go(s,t),a)}return r}function Wi(t,e,n,i){var o=i?Be:Ne,r=-1,s=e.length,a=t;for(t===e&&(e=Lo(e)),n&&(a=ke(t,He(n)));++r<s;)for(var l=0,u=e[r],h=n?n(u):u;(l=o(a,h,l,i))>-1;)a!==t&&ie.call(a,l,1),ie.call(t,l,1);return t}function Gi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];if(n==i||o!==r){var r=o;mr(o)?ie.call(t,o,1):uo(t,o)}}return t}function Ki(t,e){return t+cn(wn()*(e-t+1))}function Xi(t,e){var n="";if(!t||e<1||e>c)return n;do{e%2&&(n+=t),(e=cn(e/2))&&(t+=t)}while(e);return n}function Vi(t,e){return Mr(kr(t,e,ol),t+"")}function qi(t){return Jn(ja(t))}function Ji(t,e){var n=ja(t);return Br(n,si(e,0,n.length))}function Yi(t,e,n,i){if(!ea(t))return t;for(var r=-1,s=(e=go(e,t)).length,a=s-1,l=t;null!=l&&++r<s;){var u=Fr(e[r]),h=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(r!=a){var c=l[u];(h=i?i(c,u,l):o)===o&&(h=ea(c)?c:mr(e[r+1])?[]:{})}ti(l,u,h),l=l[u]}return t}var $i=An?function(t,e){return An.set(t,e),t}:ol,Qi=ue?function(t,e){return ue(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:ol;function to(t){return Br(ja(t))}function eo(t,e,n){var o=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=i(r);++o<r;)s[o]=t[o+e];return s}function no(t,e){var n;return ci(t,(function(t,i,o){return!(n=e(t,i,o))})),!!n}function io(t,e,n){var i=0,o=null==t?i:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;i<o;){var r=i+o>>>1,s=t[r];null!==s&&!ua(s)&&(n?s<=e:s<e)?i=r+1:o=r}return o}return oo(t,e,ol,n)}function oo(t,e,n,i){var r=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,l=null===e,u=ua(e),h=e===o;r<s;){var c=cn((r+s)/2),d=n(t[c]),f=d!==o,p=null===d,_=d==d,v=ua(d);if(a)var m=i||_;else m=h?_&&(i||f):l?_&&f&&(i||!p):u?_&&f&&!p&&(i||!v):!p&&!v&&(i?d<=e:d<e);m?r=c+1:s=c}return gn(s,4294967294)}function ro(t,e){for(var n=-1,i=t.length,o=0,r=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!js(a,l)){var l=a;r[o++]=0===s?0:s}}return r}function so(t){return"number"==typeof t?t:ua(t)?d:+t}function ao(t){if("string"==typeof t)return t;if(Gs(t))return ke(t,ao)+"";if(ua(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function lo(t,e,n){var i=-1,o=Ee,r=t.length,s=!0,a=[],l=a;if(n)s=!1,o=Te;else if(r>=200){var u=e?null:Vo(t);if(u)return nn(u);s=!1,o=Ge,l=new Xn}else l=e?[]:a;t:for(;++i<r;){var h=t[i],c=e?e(h):h;if(h=n||0!==h?h:0,s&&c==c){for(var d=l.length;d--;)if(l[d]===c)continue t;e&&l.push(c),a.push(h)}else o(l,c,n)||(l!==a&&l.push(c),a.push(h))}return a}function uo(t,e){return null==(t=Sr(t,e=go(e,t)))||delete t[Fr(Yr(e))]}function ho(t,e,n,i){return Yi(t,e,n(xi(t,e)),i)}function co(t,e,n,i){for(var o=t.length,r=i?o:-1;(i?r--:++r<o)&&e(t[r],r,t););return n?eo(t,i?0:r,i?r+1:o):eo(t,i?r+1:0,i?o:r)}function fo(t,e){var n=t;return n instanceof Hn&&(n=n.value()),Pe(e,(function(t,e){return e.func.apply(e.thisArg,Se([t],e.args))}),n)}function po(t,e,n){var o=t.length;if(o<2)return o?lo(t[0]):[];for(var r=-1,s=i(o);++r<o;)for(var a=t[r],l=-1;++l<o;)l!=r&&(s[r]=hi(s[r]||a,t[l],e,n));return lo(vi(s,1),e,n)}function _o(t,e,n){for(var i=-1,r=t.length,s=e.length,a={};++i<r;){var l=i<s?e[i]:o;n(a,t[i],l)}return a}function vo(t){return Vs(t)?t:[]}function mo(t){return"function"==typeof t?t:ol}function go(t,e){return Gs(t)?t:yr(t,e)?[t]:Rr(ya(t))}var yo=Vi;function bo(t,e,n){var i=t.length;return n=n===o?i:n,!e&&n>=i?t:eo(t,e,n)}var wo=he||function(t){return re.clearTimeout(t)};function xo(t,e){if(e)return t.slice();var n=t.length,i=Ht?Ht(n):new t.constructor(n);return t.copy(i),i}function Eo(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function To(t,e){var n=e?Eo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ko(t,e){if(t!==e){var n=t!==o,i=null===t,r=t==t,s=ua(t),a=e!==o,l=null===e,u=e==e,h=ua(e);if(!l&&!h&&!s&&t>e||s&&a&&u&&!l&&!h||i&&a&&u||!n&&u||!r)return 1;if(!i&&!s&&!h&&t<e||h&&n&&r&&!i&&!s||l&&n&&r||!a&&r||!u)return-1}return 0}function So(t,e,n,o){for(var r=-1,s=t.length,a=n.length,l=-1,u=e.length,h=mn(s-a,0),c=i(u+h),d=!o;++l<u;)c[l]=e[l];for(;++r<a;)(d||r<s)&&(c[n[r]]=t[r]);for(;h--;)c[l++]=t[r++];return c}function Po(t,e,n,o){for(var r=-1,s=t.length,a=-1,l=n.length,u=-1,h=e.length,c=mn(s-l,0),d=i(c+h),f=!o;++r<c;)d[r]=t[r];for(var p=r;++u<h;)d[p+u]=e[u];for(;++a<l;)(f||r<s)&&(d[p+n[a]]=t[r++]);return d}function Lo(t,e){var n=-1,o=t.length;for(e||(e=i(o));++n<o;)e[n]=t[n];return e}function Ao(t,e,n,i){var r=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var l=e[s],u=i?i(n[l],t[l],l,n,t):o;u===o&&(u=t[l]),r?oi(n,l,u):ti(n,l,u)}return n}function Io(t,e){return function(n,i){var o=Gs(n)?ge:ni,r=e?e():{};return o(n,t,ar(i,2),r)}}function Mo(t){return Vi((function(e,n){var i=-1,r=n.length,s=r>1?n[r-1]:o,a=r>2?n[2]:o;for(s=t.length>3&&"function"==typeof s?(r--,s):o,a&&gr(n[0],n[1],a)&&(s=r<3?o:s,r=1),e=Tt(e);++i<r;){var l=n[i];l&&t(e,l,i,s)}return e}))}function zo(t,e){return function(n,i){if(null==n)return n;if(!Xs(n))return t(n,i);for(var o=n.length,r=e?o:-1,s=Tt(n);(e?r--:++r<o)&&!1!==i(s[r],r,s););return n}}function No(t){return function(e,n,i){for(var o=-1,r=Tt(e),s=i(e),a=s.length;a--;){var l=s[t?a:++o];if(!1===n(r[l],l,r))break}return e}}function Bo(t){return function(e){var n=$e(e=ya(e))?sn(e):o,i=n?n[0]:e.charAt(0),r=n?bo(n,1).join(""):e.slice(1);return i[t]()+r}}function Co(t){return function(e){return Pe($a(Wa(e).replace(Wt,"")),t,"")}}function Oo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Zn(t.prototype),i=t.apply(n,e);return ea(i)?i:n}}function Ro(t){return function(e,n,i){var r=Tt(e);if(!Xs(e)){var s=ar(n,3);e=za(e),n=function(t){return s(r[t],t,r)}}var a=t(e,n,i);return a>-1?r[s?e[a]:a]:o}}function Fo(t){return er((function(e){var n=e.length,i=n,s=Un.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new Pt(r);if(s&&!l&&"wrapper"==rr(a))var l=new Un([],!0)}for(i=l?i:n;++i<n;){var u=rr(a=e[i]),h="wrapper"==u?or(a):o;l=h&&br(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?l[rr(h[0])].apply(l,h[3]):1==a.length&&br(a)?l[u]():l.thru(a)}return function(){var t=arguments,i=t[0];if(l&&1==t.length&&Gs(i))return l.plant(i).value();for(var o=0,r=n?e[o].apply(this,t):i;++o<n;)r=e[o].call(this,r);return r}}))}function Do(t,e,n,r,s,a,l,h,c,d){var f=e&u,p=1&e,_=2&e,v=24&e,m=512&e,g=_?o:Oo(t);return function o(){for(var u=arguments.length,y=i(u),b=u;b--;)y[b]=arguments[b];if(v)var w=sr(o),x=Ve(y,w);if(r&&(y=So(y,r,s,v)),a&&(y=Po(y,a,l,v)),u-=x,v&&u<d){var E=en(y,w);return Ko(t,e,Do,o.placeholder,n,y,E,h,c,d-u)}var T=p?n:this,k=_?T[t]:t;return u=y.length,h?y=Pr(y,h):m&&u>1&&y.reverse(),f&&c<u&&(y.length=c),this&&this!==re&&this instanceof o&&(k=g||Oo(k)),k.apply(T,y)}}function Zo(t,e){return function(n,i){return function(t,e,n,i){return yi(t,(function(t,o,r){e(i,n(t),o,r)})),i}(n,t,e(i),{})}}function jo(t,e){return function(n,i){var r;if(n===o&&i===o)return e;if(n!==o&&(r=n),i!==o){if(r===o)return i;"string"==typeof n||"string"==typeof i?(n=ao(n),i=ao(i)):(n=so(n),i=so(i)),r=t(n,i)}return r}}function Uo(t){return er((function(e){return e=ke(e,He(ar())),Vi((function(n){var i=this;return t(e,(function(t){return me(t,i,n)}))}))}))}function Ho(t,e){var n=(e=e===o?" ":ao(e)).length;if(n<2)return n?Xi(e,t):e;var i=Xi(e,hn(t/rn(e)));return $e(e)?bo(sn(i),0,t).join(""):i.slice(0,t)}function Wo(t){return function(e,n,r){return r&&"number"!=typeof r&&gr(e,n,r)&&(n=r=o),e=pa(e),n===o?(n=e,e=0):n=pa(n),function(t,e,n,o){for(var r=-1,s=mn(hn((e-t)/(n||1)),0),a=i(s);s--;)a[o?s:++r]=t,t+=n;return a}(e,n,r=r===o?e<n?1:-1:pa(r),t)}}function Go(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ma(e),n=ma(n)),t(e,n)}}function Ko(t,e,n,i,r,s,a,u,h,c){var d=8&e;e|=d?l:64,4&(e&=~(d?64:l))||(e&=-4);var f=[t,e,r,d?s:o,d?a:o,d?o:s,d?o:a,u,h,c],p=n.apply(o,f);return br(t)&&Ar(p,f),p.placeholder=i,zr(p,t,e)}function Xo(t){var e=Et[t];return function(t,n){if(t=ma(t),(n=null==n?0:gn(_a(n),292))&&pn(t)){var i=(ya(t)+"e").split("e");return+((i=(ya(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Vo=Sn&&1/nn(new Sn([,-0]))[1]==h?function(t){return new Sn(t)}:ul;function qo(t){return function(e){var n=fr(e);return n==x?Qe(e):n==P?on(e):function(t,e){return ke(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Jo(t,e,n,s,h,c,d,f){var p=2&e;if(!p&&"function"!=typeof t)throw new Pt(r);var _=s?s.length:0;if(_||(e&=-97,s=h=o),d=d===o?d:mn(_a(d),0),f=f===o?f:_a(f),_-=h?h.length:0,64&e){var v=s,m=h;s=h=o}var g=p?o:or(t),y=[t,e,n,s,h,v,m,c,d,f];if(g&&function(t,e){var n=t[1],i=e[1],o=n|i,r=o<131,s=i==u&&8==n||i==u&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!r&&!s)return t;1&i&&(t[2]=e[2],o|=1&n?0:4);var l=e[3];if(l){var h=t[3];t[3]=h?So(h,l,e[4]):l,t[4]=h?en(t[3],a):e[4]}(l=e[5])&&(h=t[5],t[5]=h?Po(h,l,e[6]):l,t[6]=h?en(t[5],a):e[6]),(l=e[7])&&(t[7]=l),i&u&&(t[8]=null==t[8]?e[8]:gn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(y,g),t=y[0],e=y[1],n=y[2],s=y[3],h=y[4],!(f=y[9]=y[9]===o?p?0:t.length:mn(y[9]-_,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var r=Oo(t);return function s(){for(var a=arguments.length,l=i(a),u=a,h=sr(s);u--;)l[u]=arguments[u];var c=a<3&&l[0]!==h&&l[a-1]!==h?[]:en(l,h);return(a-=c.length)<n?Ko(t,e,Do,s.placeholder,o,l,c,o,o,n-a):me(this&&this!==re&&this instanceof s?r:t,this,l)}}(t,e,f):e!=l&&33!=e||h.length?Do.apply(o,y):function(t,e,n,o){var r=1&e,s=Oo(t);return function e(){for(var a=-1,l=arguments.length,u=-1,h=o.length,c=i(h+l),d=this&&this!==re&&this instanceof e?s:t;++u<h;)c[u]=o[u];for(;l--;)c[u++]=arguments[++a];return me(d,r?n:this,c)}}(t,e,n,s);else var b=function(t,e,n){var i=1&e,o=Oo(t);return function e(){return(this&&this!==re&&this instanceof e?o:t).apply(i?n:this,arguments)}}(t,e,n);return zr((g?$i:Ar)(b,y),t,e)}function Yo(t,e,n,i){return t===o||js(t,It[n])&&!Nt.call(i,n)?e:t}function $o(t,e,n,i,r,s){return ea(t)&&ea(e)&&(s.set(e,t),Zi(t,e,o,$o,s),s.delete(e)),t}function Qo(t){return ra(t)?o:t}function tr(t,e,n,i,r,s){var a=1&n,l=t.length,u=e.length;if(l!=u&&!(a&&u>l))return!1;var h=s.get(t),c=s.get(e);if(h&&c)return h==e&&c==t;var d=-1,f=!0,p=2&n?new Xn:o;for(s.set(t,e),s.set(e,t);++d<l;){var _=t[d],v=e[d];if(i)var m=a?i(v,_,d,e,t,s):i(_,v,d,t,e,s);if(m!==o){if(m)continue;f=!1;break}if(p){if(!Ae(e,(function(t,e){if(!Ge(p,e)&&(_===t||r(_,t,n,i,s)))return p.push(e)}))){f=!1;break}}else if(_!==v&&!r(_,v,n,i,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function er(t){return Mr(kr(t,o,Kr),t+"")}function nr(t){return Ei(t,za,cr)}function ir(t){return Ei(t,Na,dr)}var or=An?function(t){return An.get(t)}:ul;function rr(t){for(var e=t.name+"",n=In[e],i=Nt.call(In,e)?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==t)return o.name}return e}function sr(t){return(Nt.call(Dn,"placeholder")?Dn:t).placeholder}function ar(){var t=Dn.iteratee||rl;return t=t===rl?Bi:t,arguments.length?t(arguments[0],arguments[1]):t}function lr(t,e){var n,i,o=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function ur(t){for(var e=za(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,Er(o)]}return e}function hr(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return Ni(n)?n:o}var cr=dn?function(t){return null==t?[]:(t=Tt(t),xe(dn(t),(function(e){return te.call(t,e)})))}:vl,dr=dn?function(t){for(var e=[];t;)Se(e,cr(t)),t=Kt(t);return e}:vl,fr=Ti;function pr(t,e,n){for(var i=-1,o=(e=go(e,t)).length,r=!1;++i<o;){var s=Fr(e[i]);if(!(r=null!=t&&n(t,s)))break;t=t[s]}return r||++i!=o?r:!!(o=null==t?0:t.length)&&ta(o)&&mr(s,o)&&(Gs(t)||Ws(t))}function _r(t){return"function"!=typeof t.constructor||xr(t)?{}:Zn(Kt(t))}function vr(t){return Gs(t)||Ws(t)||!!(oe&&t&&t[oe])}function mr(t,e){var n=typeof t;return!!(e=null==e?c:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function gr(t,e,n){if(!ea(n))return!1;var i=typeof e;return!!("number"==i?Xs(n)&&mr(e,n.length):"string"==i&&e in n)&&js(n[e],t)}function yr(t,e){if(Gs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ua(t))||Q.test(t)||!$.test(t)||null!=e&&t in Tt(e)}function br(t){var e=rr(t),n=Dn[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var i=or(n);return!!i&&t===i[0]}(En&&fr(new En(new ArrayBuffer(1)))!=z||Tn&&fr(new Tn)!=x||kn&&fr(kn.resolve())!=k||Sn&&fr(new Sn)!=P||Pn&&fr(new Pn)!=I)&&(fr=function(t){var e=Ti(t),n=e==T?t.constructor:o,i=n?Dr(n):"";if(i)switch(i){case Mn:return z;case zn:return x;case Nn:return k;case Bn:return P;case Cn:return I}return e});var wr=Mt?$s:ml;function xr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||It)}function Er(t){return t==t&&!ea(t)}function Tr(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in Tt(n))}}function kr(t,e,n){return e=mn(e===o?t.length-1:e,0),function(){for(var o=arguments,r=-1,s=mn(o.length-e,0),a=i(s);++r<s;)a[r]=o[e+r];r=-1;for(var l=i(e+1);++r<e;)l[r]=o[r];return l[e]=n(a),me(t,this,l)}}function Sr(t,e){return e.length<2?t:xi(t,eo(e,0,-1))}function Pr(t,e){for(var n=t.length,i=gn(e.length,n),r=Lo(t);i--;){var s=e[i];t[i]=mr(s,n)?r[s]:o}return t}function Lr(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ar=Nr($i),Ir=Fe||function(t,e){return re.setTimeout(t,e)},Mr=Nr(Qi);function zr(t,e,n){var i=e+"";return Mr(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(rt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return ye(p,(function(n){var i="_."+n[0];e&n[1]&&!Ee(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(i),n)))}function Nr(t){var e=0,n=0;return function(){var i=yn(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(o,arguments)}}function Br(t,e){var n=-1,i=t.length,r=i-1;for(e=e===o?i:e;++n<e;){var s=Ki(n,r),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Cr,Or,Rr=(Cr=Cs((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,i,o){e.push(i?o.replace(ht,"$1"):n||t)})),e}),(function(t){return 500===Or.size&&Or.clear(),t})),Or=Cr.cache,Cr);function Fr(t){if("string"==typeof t||ua(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Dr(t){if(null!=t){try{return zt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Zr(t){if(t instanceof Hn)return t.clone();var e=new Un(t.__wrapped__,t.__chain__);return e.__actions__=Lo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var jr=Vi((function(t,e){return Vs(t)?hi(t,vi(e,1,Vs,!0)):[]})),Ur=Vi((function(t,e){var n=Yr(e);return Vs(n)&&(n=o),Vs(t)?hi(t,vi(e,1,Vs,!0),ar(n,2)):[]})),Hr=Vi((function(t,e){var n=Yr(e);return Vs(n)&&(n=o),Vs(t)?hi(t,vi(e,1,Vs,!0),o,n):[]}));function Wr(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:_a(n);return o<0&&(o=mn(i+o,0)),ze(t,ar(e,3),o)}function Gr(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==o&&(r=_a(n),r=n<0?mn(i+r,0):gn(r,i-1)),ze(t,ar(e,3),r,!0)}function Kr(t){return null!=t&&t.length?vi(t,1):[]}function Xr(t){return t&&t.length?t[0]:o}var Vr=Vi((function(t){var e=ke(t,vo);return e.length&&e[0]===t[0]?Li(e):[]})),qr=Vi((function(t){var e=Yr(t),n=ke(t,vo);return e===Yr(n)?e=o:n.pop(),n.length&&n[0]===t[0]?Li(n,ar(e,2)):[]})),Jr=Vi((function(t){var e=Yr(t),n=ke(t,vo);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?Li(n,o,e):[]}));function Yr(t){var e=null==t?0:t.length;return e?t[e-1]:o}var $r=Vi(Qr);function Qr(t,e){return t&&t.length&&e&&e.length?Wi(t,e):t}var ts=er((function(t,e){var n=null==t?0:t.length,i=ri(t,e);return Gi(t,ke(e,(function(t){return mr(t,n)?+t:t})).sort(ko)),i}));function es(t){return null==t?t:xn.call(t)}var ns=Vi((function(t){return lo(vi(t,1,Vs,!0))})),is=Vi((function(t){var e=Yr(t);return Vs(e)&&(e=o),lo(vi(t,1,Vs,!0),ar(e,2))})),os=Vi((function(t){var e=Yr(t);return e="function"==typeof e?e:o,lo(vi(t,1,Vs,!0),o,e)}));function rs(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if(Vs(t))return e=mn(t.length,e),!0})),je(e,(function(e){return ke(t,Re(e))}))}function ss(t,e){if(!t||!t.length)return[];var n=rs(t);return null==e?n:ke(n,(function(t){return me(e,o,t)}))}var as=Vi((function(t,e){return Vs(t)?hi(t,e):[]})),ls=Vi((function(t){return po(xe(t,Vs))})),us=Vi((function(t){var e=Yr(t);return Vs(e)&&(e=o),po(xe(t,Vs),ar(e,2))})),hs=Vi((function(t){var e=Yr(t);return e="function"==typeof e?e:o,po(xe(t,Vs),o,e)})),cs=Vi(rs),ds=Vi((function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,ss(t,n)}));function fs(t){var e=Dn(t);return e.__chain__=!0,e}function ps(t,e){return e(t)}var _s=er((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return ri(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Hn&&mr(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:ps,args:[r],thisArg:o}),new Un(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(o),t}))):this.thru(r)})),vs=Io((function(t,e,n){Nt.call(t,n)?++t[n]:oi(t,n,1)})),ms=Ro(Wr),gs=Ro(Gr);function ys(t,e){return(Gs(t)?ye:ci)(t,ar(e,3))}function bs(t,e){return(Gs(t)?be:di)(t,ar(e,3))}var ws=Io((function(t,e,n){Nt.call(t,n)?t[n].push(e):oi(t,n,[e])})),xs=Vi((function(t,e,n){var o=-1,r="function"==typeof e,s=Xs(t)?i(t.length):[];return ci(t,(function(t){s[++o]=r?me(e,t,n):Ai(t,e,n)})),s})),Es=Io((function(t,e,n){oi(t,n,e)}));function Ts(t,e){return(Gs(t)?ke:Ri)(t,ar(e,3))}var ks=Io((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ss=Vi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&gr(t,e[0],e[1])?e=[]:n>2&&gr(e[0],e[1],e[2])&&(e=[e[0]]),Ui(t,vi(e,1),[])})),Ps=Ie||function(){return re.Date.now()};function Ls(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Jo(t,u,o,o,o,o,e)}function As(t,e){var n;if("function"!=typeof e)throw new Pt(r);return t=_a(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var Is=Vi((function(t,e,n){var i=1;if(n.length){var o=en(n,sr(Is));i|=l}return Jo(t,i,e,n,o)})),Ms=Vi((function(t,e,n){var i=3;if(n.length){var o=en(n,sr(Ms));i|=l}return Jo(e,i,t,n,o)}));function zs(t,e,n){var i,s,a,l,u,h,c=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new Pt(r);function _(e){var n=i,r=s;return i=s=o,c=e,l=t.apply(r,n)}function v(t){return c=t,u=Ir(g,e),d?_(t):l}function m(t){var n=t-h;return h===o||n>=e||n<0||f&&t-c>=a}function g(){var t=Ps();if(m(t))return y(t);u=Ir(g,function(t){var n=e-(t-h);return f?gn(n,a-(t-c)):n}(t))}function y(t){return u=o,p&&i?_(t):(i=s=o,l)}function b(){var t=Ps(),n=m(t);if(i=arguments,s=this,h=t,n){if(u===o)return v(h);if(f)return wo(u),u=Ir(g,e),_(h)}return u===o&&(u=Ir(g,e)),l}return e=ma(e)||0,ea(n)&&(d=!!n.leading,a=(f="maxWait"in n)?mn(ma(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),b.cancel=function(){u!==o&&wo(u),c=0,i=h=s=u=o},b.flush=function(){return u===o?l:y(Ps())},b}var Ns=Vi((function(t,e){return ui(t,1,e)})),Bs=Vi((function(t,e,n){return ui(t,ma(e)||0,n)}));function Cs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Pt(r);var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=t.apply(this,i);return n.cache=r.set(o,s)||r,s};return n.cache=new(Cs.Cache||Kn),n}function Os(t){if("function"!=typeof t)throw new Pt(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Cs.Cache=Kn;var Rs=yo((function(t,e){var n=(e=1==e.length&&Gs(e[0])?ke(e[0],He(ar())):ke(vi(e,1),He(ar()))).length;return Vi((function(i){for(var o=-1,r=gn(i.length,n);++o<r;)i[o]=e[o].call(this,i[o]);return me(t,this,i)}))})),Fs=Vi((function(t,e){var n=en(e,sr(Fs));return Jo(t,l,o,e,n)})),Ds=Vi((function(t,e){var n=en(e,sr(Ds));return Jo(t,64,o,e,n)})),Zs=er((function(t,e){return Jo(t,256,o,o,o,e)}));function js(t,e){return t===e||t!=t&&e!=e}var Us=Go(ki),Hs=Go((function(t,e){return t>=e})),Ws=Ii(function(){return arguments}())?Ii:function(t){return na(t)&&Nt.call(t,"callee")&&!te.call(t,"callee")},Gs=i.isArray,Ks=ce?He(ce):function(t){return na(t)&&Ti(t)==M};function Xs(t){return null!=t&&ta(t.length)&&!$s(t)}function Vs(t){return na(t)&&Xs(t)}var qs=fn||ml,Js=de?He(de):function(t){return na(t)&&Ti(t)==g};function Ys(t){if(!na(t))return!1;var e=Ti(t);return e==y||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ra(t)}function $s(t){if(!ea(t))return!1;var e=Ti(t);return e==b||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qs(t){return"number"==typeof t&&t==_a(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ia=fe?He(fe):function(t){return na(t)&&fr(t)==x};function oa(t){return"number"==typeof t||na(t)&&Ti(t)==E}function ra(t){if(!na(t)||Ti(t)!=T)return!1;var e=Kt(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&zt.call(n)==Rt}var sa=pe?He(pe):function(t){return na(t)&&Ti(t)==S},aa=_e?He(_e):function(t){return na(t)&&fr(t)==P};function la(t){return"string"==typeof t||!Gs(t)&&na(t)&&Ti(t)==L}function ua(t){return"symbol"==typeof t||na(t)&&Ti(t)==A}var ha=ve?He(ve):function(t){return na(t)&&ta(t.length)&&!!$t[Ti(t)]},ca=Go(Oi),da=Go((function(t,e){return t<=e}));function fa(t){if(!t)return[];if(Xs(t))return la(t)?sn(t):Lo(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=fr(t);return(e==x?Qe:e==P?nn:ja)(t)}function pa(t){return t?(t=ma(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function _a(t){var e=pa(t),n=e%1;return e==e?n?e-n:e:0}function va(t){return t?si(_a(t),0,f):0}function ma(t){if("number"==typeof t)return t;if(ua(t))return d;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ue(t);var n=pt.test(t);return n||vt.test(t)?ne(t.slice(2),n?2:8):ft.test(t)?d:+t}function ga(t){return Ao(t,Na(t))}function ya(t){return null==t?"":ao(t)}var ba=Mo((function(t,e){if(xr(e)||Xs(e))Ao(e,za(e),t);else for(var n in e)Nt.call(e,n)&&ti(t,n,e[n])})),wa=Mo((function(t,e){Ao(e,Na(e),t)})),xa=Mo((function(t,e,n,i){Ao(e,Na(e),t,i)})),Ea=Mo((function(t,e,n,i){Ao(e,za(e),t,i)})),Ta=er(ri),ka=Vi((function(t,e){t=Tt(t);var n=-1,i=e.length,r=i>2?e[2]:o;for(r&&gr(e[0],e[1],r)&&(i=1);++n<i;)for(var s=e[n],a=Na(s),l=-1,u=a.length;++l<u;){var h=a[l],c=t[h];(c===o||js(c,It[h])&&!Nt.call(t,h))&&(t[h]=s[h])}return t})),Sa=Vi((function(t){return t.push(o,$o),me(Ca,o,t)}));function Pa(t,e,n){var i=null==t?o:xi(t,e);return i===o?n:i}function La(t,e){return null!=t&&pr(t,e,Pi)}var Aa=Zo((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ot.call(e)),t[e]=n}),el(ol)),Ia=Zo((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ot.call(e)),Nt.call(t,e)?t[e].push(n):t[e]=[n]}),ar),Ma=Vi(Ai);function za(t){return Xs(t)?qn(t):Ci(t)}function Na(t){return Xs(t)?qn(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=xr(t),n=[];for(var i in t)("constructor"!=i||!e&&Nt.call(t,i))&&n.push(i);return n}(t)}var Ba=Mo((function(t,e,n){Zi(t,e,n)})),Ca=Mo((function(t,e,n,i){Zi(t,e,n,i)})),Oa=er((function(t,e){var n={};if(null==t)return n;var i=!1;e=ke(e,(function(e){return e=go(e,t),i||(i=e.length>1),e})),Ao(t,ir(t),n),i&&(n=ai(n,7,Qo));for(var o=e.length;o--;)uo(n,e[o]);return n})),Ra=er((function(t,e){return null==t?{}:function(t,e){return Hi(t,e,(function(e,n){return La(t,n)}))}(t,e)}));function Fa(t,e){if(null==t)return{};var n=ke(ir(t),(function(t){return[t]}));return e=ar(e),Hi(t,n,(function(t,n){return e(t,n[0])}))}var Da=qo(za),Za=qo(Na);function ja(t){return null==t?[]:We(t,za(t))}var Ua=Co((function(t,e,n){return e=e.toLowerCase(),t+(n?Ha(e):e)}));function Ha(t){return Ya(ya(t).toLowerCase())}function Wa(t){return(t=ya(t))&&t.replace(gt,qe).replace(Gt,"")}var Ga=Co((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ka=Co((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Xa=Bo("toLowerCase"),Va=Co((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),qa=Co((function(t,e,n){return t+(n?" ":"")+Ya(e)})),Ja=Co((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ya=Bo("toUpperCase");function $a(t,e,n){return t=ya(t),(e=n?o:e)===o?function(t){return qt.test(t)}(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Qa=Vi((function(t,e){try{return me(t,o,e)}catch(t){return Ys(t)?t:new wt(t)}})),tl=er((function(t,e){return ye(e,(function(e){e=Fr(e),oi(t,e,Is(t[e],t))})),t}));function el(t){return function(){return t}}var nl=Fo(),il=Fo(!0);function ol(t){return t}function rl(t){return Bi("function"==typeof t?t:ai(t,1))}var sl=Vi((function(t,e){return function(n){return Ai(n,t,e)}})),al=Vi((function(t,e){return function(n){return Ai(t,n,e)}}));function ll(t,e,n){var i=za(e),o=wi(e,i);null!=n||ea(e)&&(o.length||!i.length)||(n=e,e=t,t=this,o=wi(e,za(e)));var r=!(ea(n)&&"chain"in n&&!n.chain),s=$s(t);return ye(o,(function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(r||e){var n=t(this.__wrapped__),o=n.__actions__=Lo(this.__actions__);return o.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Se([this.value()],arguments))})})),t}function ul(){}var hl=Uo(ke),cl=Uo(we),dl=Uo(Ae);function fl(t){return yr(t)?Re(Fr(t)):function(t){return function(e){return xi(e,t)}}(t)}var pl=Wo(),_l=Wo(!0);function vl(){return[]}function ml(){return!1}var gl,yl=jo((function(t,e){return t+e}),0),bl=Xo("ceil"),wl=jo((function(t,e){return t/e}),1),xl=Xo("floor"),El=jo((function(t,e){return t*e}),1),Tl=Xo("round"),kl=jo((function(t,e){return t-e}),0);return Dn.after=function(t,e){if("function"!=typeof e)throw new Pt(r);return t=_a(t),function(){if(--t<1)return e.apply(this,arguments)}},Dn.ary=Ls,Dn.assign=ba,Dn.assignIn=wa,Dn.assignInWith=xa,Dn.assignWith=Ea,Dn.at=Ta,Dn.before=As,Dn.bind=Is,Dn.bindAll=tl,Dn.bindKey=Ms,Dn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Gs(t)?t:[t]},Dn.chain=fs,Dn.chunk=function(t,e,n){e=(n?gr(t,e,n):e===o)?1:mn(_a(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var s=0,a=0,l=i(hn(r/e));s<r;)l[a++]=eo(t,s,s+=e);return l},Dn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,o=[];++e<n;){var r=t[e];r&&(o[i++]=r)}return o},Dn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],o=t;o--;)e[o-1]=arguments[o];return Se(Gs(n)?Lo(n):[n],vi(e,1))},Dn.cond=function(t){var e=null==t?0:t.length,n=ar();return t=e?ke(t,(function(t){if("function"!=typeof t[1])throw new Pt(r);return[n(t[0]),t[1]]})):[],Vi((function(n){for(var i=-1;++i<e;){var o=t[i];if(me(o[0],this,n))return me(o[1],this,n)}}))},Dn.conforms=function(t){return function(t){var e=za(t);return function(n){return li(n,t,e)}}(ai(t,1))},Dn.constant=el,Dn.countBy=vs,Dn.create=function(t,e){var n=Zn(t);return null==e?n:ii(n,e)},Dn.curry=function t(e,n,i){var r=Jo(e,8,o,o,o,o,o,n=i?o:n);return r.placeholder=t.placeholder,r},Dn.curryRight=function t(e,n,i){var r=Jo(e,16,o,o,o,o,o,n=i?o:n);return r.placeholder=t.placeholder,r},Dn.debounce=zs,Dn.defaults=ka,Dn.defaultsDeep=Sa,Dn.defer=Ns,Dn.delay=Bs,Dn.difference=jr,Dn.differenceBy=Ur,Dn.differenceWith=Hr,Dn.drop=function(t,e,n){var i=null==t?0:t.length;return i?eo(t,(e=n||e===o?1:_a(e))<0?0:e,i):[]},Dn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?eo(t,0,(e=i-(e=n||e===o?1:_a(e)))<0?0:e):[]},Dn.dropRightWhile=function(t,e){return t&&t.length?co(t,ar(e,3),!0,!0):[]},Dn.dropWhile=function(t,e){return t&&t.length?co(t,ar(e,3),!0):[]},Dn.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&gr(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=_a(n))<0&&(n=-n>r?0:r+n),(i=i===o||i>r?r:_a(i))<0&&(i+=r),i=n>i?0:va(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Dn.filter=function(t,e){return(Gs(t)?xe:_i)(t,ar(e,3))},Dn.flatMap=function(t,e){return vi(Ts(t,e),1)},Dn.flatMapDeep=function(t,e){return vi(Ts(t,e),h)},Dn.flatMapDepth=function(t,e,n){return n=n===o?1:_a(n),vi(Ts(t,e),n)},Dn.flatten=Kr,Dn.flattenDeep=function(t){return null!=t&&t.length?vi(t,h):[]},Dn.flattenDepth=function(t,e){return null!=t&&t.length?vi(t,e=e===o?1:_a(e)):[]},Dn.flip=function(t){return Jo(t,512)},Dn.flow=nl,Dn.flowRight=il,Dn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var o=t[e];i[o[0]]=o[1]}return i},Dn.functions=function(t){return null==t?[]:wi(t,za(t))},Dn.functionsIn=function(t){return null==t?[]:wi(t,Na(t))},Dn.groupBy=ws,Dn.initial=function(t){return null!=t&&t.length?eo(t,0,-1):[]},Dn.intersection=Vr,Dn.intersectionBy=qr,Dn.intersectionWith=Jr,Dn.invert=Aa,Dn.invertBy=Ia,Dn.invokeMap=xs,Dn.iteratee=rl,Dn.keyBy=Es,Dn.keys=za,Dn.keysIn=Na,Dn.map=Ts,Dn.mapKeys=function(t,e){var n={};return e=ar(e,3),yi(t,(function(t,i,o){oi(n,e(t,i,o),t)})),n},Dn.mapValues=function(t,e){var n={};return e=ar(e,3),yi(t,(function(t,i,o){oi(n,i,e(t,i,o))})),n},Dn.matches=function(t){return Fi(ai(t,1))},Dn.matchesProperty=function(t,e){return Di(t,ai(e,1))},Dn.memoize=Cs,Dn.merge=Ba,Dn.mergeWith=Ca,Dn.method=sl,Dn.methodOf=al,Dn.mixin=ll,Dn.negate=Os,Dn.nthArg=function(t){return t=_a(t),Vi((function(e){return ji(e,t)}))},Dn.omit=Oa,Dn.omitBy=function(t,e){return Fa(t,Os(ar(e)))},Dn.once=function(t){return As(2,t)},Dn.orderBy=function(t,e,n,i){return null==t?[]:(Gs(e)||(e=null==e?[]:[e]),Gs(n=i?o:n)||(n=null==n?[]:[n]),Ui(t,e,n))},Dn.over=hl,Dn.overArgs=Rs,Dn.overEvery=cl,Dn.overSome=dl,Dn.partial=Fs,Dn.partialRight=Ds,Dn.partition=ks,Dn.pick=Ra,Dn.pickBy=Fa,Dn.property=fl,Dn.propertyOf=function(t){return function(e){return null==t?o:xi(t,e)}},Dn.pull=$r,Dn.pullAll=Qr,Dn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Wi(t,e,ar(n,2)):t},Dn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Wi(t,e,o,n):t},Dn.pullAt=ts,Dn.range=pl,Dn.rangeRight=_l,Dn.rearg=Zs,Dn.reject=function(t,e){return(Gs(t)?xe:_i)(t,Os(ar(e,3)))},Dn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,o=[],r=t.length;for(e=ar(e,3);++i<r;){var s=t[i];e(s,i,t)&&(n.push(s),o.push(i))}return Gi(t,o),n},Dn.rest=function(t,e){if("function"!=typeof t)throw new Pt(r);return Vi(t,e=e===o?e:_a(e))},Dn.reverse=es,Dn.sampleSize=function(t,e,n){return e=(n?gr(t,e,n):e===o)?1:_a(e),(Gs(t)?Yn:Ji)(t,e)},Dn.set=function(t,e,n){return null==t?t:Yi(t,e,n)},Dn.setWith=function(t,e,n,i){return i="function"==typeof i?i:o,null==t?t:Yi(t,e,n,i)},Dn.shuffle=function(t){return(Gs(t)?$n:to)(t)},Dn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&gr(t,e,n)?(e=0,n=i):(e=null==e?0:_a(e),n=n===o?i:_a(n)),eo(t,e,n)):[]},Dn.sortBy=Ss,Dn.sortedUniq=function(t){return t&&t.length?ro(t):[]},Dn.sortedUniqBy=function(t,e){return t&&t.length?ro(t,ar(e,2)):[]},Dn.split=function(t,e,n){return n&&"number"!=typeof n&&gr(t,e,n)&&(e=n=o),(n=n===o?f:n>>>0)?(t=ya(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ao(e))&&$e(t)?bo(sn(t),0,n):t.split(e,n):[]},Dn.spread=function(t,e){if("function"!=typeof t)throw new Pt(r);return e=null==e?0:mn(_a(e),0),Vi((function(n){var i=n[e],o=bo(n,0,e);return i&&Se(o,i),me(t,this,o)}))},Dn.tail=function(t){var e=null==t?0:t.length;return e?eo(t,1,e):[]},Dn.take=function(t,e,n){return t&&t.length?eo(t,0,(e=n||e===o?1:_a(e))<0?0:e):[]},Dn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?eo(t,(e=i-(e=n||e===o?1:_a(e)))<0?0:e,i):[]},Dn.takeRightWhile=function(t,e){return t&&t.length?co(t,ar(e,3),!1,!0):[]},Dn.takeWhile=function(t,e){return t&&t.length?co(t,ar(e,3)):[]},Dn.tap=function(t,e){return e(t),t},Dn.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new Pt(r);return ea(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),zs(t,e,{leading:i,maxWait:e,trailing:o})},Dn.thru=ps,Dn.toArray=fa,Dn.toPairs=Da,Dn.toPairsIn=Za,Dn.toPath=function(t){return Gs(t)?ke(t,Fr):ua(t)?[t]:Lo(Rr(ya(t)))},Dn.toPlainObject=ga,Dn.transform=function(t,e,n){var i=Gs(t),o=i||qs(t)||ha(t);if(e=ar(e,4),null==n){var r=t&&t.constructor;n=o?i?new r:[]:ea(t)&&$s(r)?Zn(Kt(t)):{}}return(o?ye:yi)(t,(function(t,i,o){return e(n,t,i,o)})),n},Dn.unary=function(t){return Ls(t,1)},Dn.union=ns,Dn.unionBy=is,Dn.unionWith=os,Dn.uniq=function(t){return t&&t.length?lo(t):[]},Dn.uniqBy=function(t,e){return t&&t.length?lo(t,ar(e,2)):[]},Dn.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?lo(t,o,e):[]},Dn.unset=function(t,e){return null==t||uo(t,e)},Dn.unzip=rs,Dn.unzipWith=ss,Dn.update=function(t,e,n){return null==t?t:ho(t,e,mo(n))},Dn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:o,null==t?t:ho(t,e,mo(n),i)},Dn.values=ja,Dn.valuesIn=function(t){return null==t?[]:We(t,Na(t))},Dn.without=as,Dn.words=$a,Dn.wrap=function(t,e){return Fs(mo(e),t)},Dn.xor=ls,Dn.xorBy=us,Dn.xorWith=hs,Dn.zip=cs,Dn.zipObject=function(t,e){return _o(t||[],e||[],ti)},Dn.zipObjectDeep=function(t,e){return _o(t||[],e||[],Yi)},Dn.zipWith=ds,Dn.entries=Da,Dn.entriesIn=Za,Dn.extend=wa,Dn.extendWith=xa,ll(Dn,Dn),Dn.add=yl,Dn.attempt=Qa,Dn.camelCase=Ua,Dn.capitalize=Ha,Dn.ceil=bl,Dn.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=ma(n))==n?n:0),e!==o&&(e=(e=ma(e))==e?e:0),si(ma(t),e,n)},Dn.clone=function(t){return ai(t,4)},Dn.cloneDeep=function(t){return ai(t,5)},Dn.cloneDeepWith=function(t,e){return ai(t,5,e="function"==typeof e?e:o)},Dn.cloneWith=function(t,e){return ai(t,4,e="function"==typeof e?e:o)},Dn.conformsTo=function(t,e){return null==e||li(t,e,za(e))},Dn.deburr=Wa,Dn.defaultTo=function(t,e){return null==t||t!=t?e:t},Dn.divide=wl,Dn.endsWith=function(t,e,n){t=ya(t),e=ao(e);var i=t.length,r=n=n===o?i:si(_a(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},Dn.eq=js,Dn.escape=function(t){return(t=ya(t))&&V.test(t)?t.replace(K,Je):t},Dn.escapeRegExp=function(t){return(t=ya(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Dn.every=function(t,e,n){var i=Gs(t)?we:fi;return n&&gr(t,e,n)&&(e=o),i(t,ar(e,3))},Dn.find=ms,Dn.findIndex=Wr,Dn.findKey=function(t,e){return Me(t,ar(e,3),yi)},Dn.findLast=gs,Dn.findLastIndex=Gr,Dn.findLastKey=function(t,e){return Me(t,ar(e,3),bi)},Dn.floor=xl,Dn.forEach=ys,Dn.forEachRight=bs,Dn.forIn=function(t,e){return null==t?t:mi(t,ar(e,3),Na)},Dn.forInRight=function(t,e){return null==t?t:gi(t,ar(e,3),Na)},Dn.forOwn=function(t,e){return t&&yi(t,ar(e,3))},Dn.forOwnRight=function(t,e){return t&&bi(t,ar(e,3))},Dn.get=Pa,Dn.gt=Us,Dn.gte=Hs,Dn.has=function(t,e){return null!=t&&pr(t,e,Si)},Dn.hasIn=La,Dn.head=Xr,Dn.identity=ol,Dn.includes=function(t,e,n,i){t=Xs(t)?t:ja(t),n=n&&!i?_a(n):0;var o=t.length;return n<0&&(n=mn(o+n,0)),la(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&Ne(t,e,n)>-1},Dn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:_a(n);return o<0&&(o=mn(i+o,0)),Ne(t,e,o)},Dn.inRange=function(t,e,n){return e=pa(e),n===o?(n=e,e=0):n=pa(n),function(t,e,n){return t>=gn(e,n)&&t<mn(e,n)}(t=ma(t),e,n)},Dn.invoke=Ma,Dn.isArguments=Ws,Dn.isArray=Gs,Dn.isArrayBuffer=Ks,Dn.isArrayLike=Xs,Dn.isArrayLikeObject=Vs,Dn.isBoolean=function(t){return!0===t||!1===t||na(t)&&Ti(t)==m},Dn.isBuffer=qs,Dn.isDate=Js,Dn.isElement=function(t){return na(t)&&1===t.nodeType&&!ra(t)},Dn.isEmpty=function(t){if(null==t)return!0;if(Xs(t)&&(Gs(t)||"string"==typeof t||"function"==typeof t.splice||qs(t)||ha(t)||Ws(t)))return!t.length;var e=fr(t);if(e==x||e==P)return!t.size;if(xr(t))return!Ci(t).length;for(var n in t)if(Nt.call(t,n))return!1;return!0},Dn.isEqual=function(t,e){return Mi(t,e)},Dn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:o)?n(t,e):o;return i===o?Mi(t,e,o,n):!!i},Dn.isError=Ys,Dn.isFinite=function(t){return"number"==typeof t&&pn(t)},Dn.isFunction=$s,Dn.isInteger=Qs,Dn.isLength=ta,Dn.isMap=ia,Dn.isMatch=function(t,e){return t===e||zi(t,e,ur(e))},Dn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,zi(t,e,ur(e),n)},Dn.isNaN=function(t){return oa(t)&&t!=+t},Dn.isNative=function(t){if(wr(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ni(t)},Dn.isNil=function(t){return null==t},Dn.isNull=function(t){return null===t},Dn.isNumber=oa,Dn.isObject=ea,Dn.isObjectLike=na,Dn.isPlainObject=ra,Dn.isRegExp=sa,Dn.isSafeInteger=function(t){return Qs(t)&&t>=-9007199254740991&&t<=c},Dn.isSet=aa,Dn.isString=la,Dn.isSymbol=ua,Dn.isTypedArray=ha,Dn.isUndefined=function(t){return t===o},Dn.isWeakMap=function(t){return na(t)&&fr(t)==I},Dn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==Ti(t)},Dn.join=function(t,e){return null==t?"":_n.call(t,e)},Dn.kebabCase=Ga,Dn.last=Yr,Dn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==o&&(r=(r=_a(n))<0?mn(i+r,0):gn(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):ze(t,Ce,r,!0)},Dn.lowerCase=Ka,Dn.lowerFirst=Xa,Dn.lt=ca,Dn.lte=da,Dn.max=function(t){return t&&t.length?pi(t,ol,ki):o},Dn.maxBy=function(t,e){return t&&t.length?pi(t,ar(e,2),ki):o},Dn.mean=function(t){return Oe(t,ol)},Dn.meanBy=function(t,e){return Oe(t,ar(e,2))},Dn.min=function(t){return t&&t.length?pi(t,ol,Oi):o},Dn.minBy=function(t,e){return t&&t.length?pi(t,ar(e,2),Oi):o},Dn.stubArray=vl,Dn.stubFalse=ml,Dn.stubObject=function(){return{}},Dn.stubString=function(){return""},Dn.stubTrue=function(){return!0},Dn.multiply=El,Dn.nth=function(t,e){return t&&t.length?ji(t,_a(e)):o},Dn.noConflict=function(){return re._===this&&(re._=Ft),this},Dn.noop=ul,Dn.now=Ps,Dn.pad=function(t,e,n){t=ya(t);var i=(e=_a(e))?rn(t):0;if(!e||i>=e)return t;var o=(e-i)/2;return Ho(cn(o),n)+t+Ho(hn(o),n)},Dn.padEnd=function(t,e,n){t=ya(t);var i=(e=_a(e))?rn(t):0;return e&&i<e?t+Ho(e-i,n):t},Dn.padStart=function(t,e,n){t=ya(t);var i=(e=_a(e))?rn(t):0;return e&&i<e?Ho(e-i,n)+t:t},Dn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(ya(t).replace(it,""),e||0)},Dn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&gr(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=pa(t),e===o?(e=t,t=0):e=pa(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=wn();return gn(t+r*(e-t+ee("1e-"+((r+"").length-1))),e)}return Ki(t,e)},Dn.reduce=function(t,e,n){var i=Gs(t)?Pe:De,o=arguments.length<3;return i(t,ar(e,4),n,o,ci)},Dn.reduceRight=function(t,e,n){var i=Gs(t)?Le:De,o=arguments.length<3;return i(t,ar(e,4),n,o,di)},Dn.repeat=function(t,e,n){return e=(n?gr(t,e,n):e===o)?1:_a(e),Xi(ya(t),e)},Dn.replace=function(){var t=arguments,e=ya(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Dn.result=function(t,e,n){var i=-1,r=(e=go(e,t)).length;for(r||(r=1,t=o);++i<r;){var s=null==t?o:t[Fr(e[i])];s===o&&(i=r,s=n),t=$s(s)?s.call(t):s}return t},Dn.round=Tl,Dn.runInContext=t,Dn.sample=function(t){return(Gs(t)?Jn:qi)(t)},Dn.size=function(t){if(null==t)return 0;if(Xs(t))return la(t)?rn(t):t.length;var e=fr(t);return e==x||e==P?t.size:Ci(t).length},Dn.snakeCase=Va,Dn.some=function(t,e,n){var i=Gs(t)?Ae:no;return n&&gr(t,e,n)&&(e=o),i(t,ar(e,3))},Dn.sortedIndex=function(t,e){return io(t,e)},Dn.sortedIndexBy=function(t,e,n){return oo(t,e,ar(n,2))},Dn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=io(t,e);if(i<n&&js(t[i],e))return i}return-1},Dn.sortedLastIndex=function(t,e){return io(t,e,!0)},Dn.sortedLastIndexBy=function(t,e,n){return oo(t,e,ar(n,2),!0)},Dn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=io(t,e,!0)-1;if(js(t[n],e))return n}return-1},Dn.startCase=qa,Dn.startsWith=function(t,e,n){return t=ya(t),n=null==n?0:si(_a(n),0,t.length),e=ao(e),t.slice(n,n+e.length)==e},Dn.subtract=kl,Dn.sum=function(t){return t&&t.length?Ze(t,ol):0},Dn.sumBy=function(t,e){return t&&t.length?Ze(t,ar(e,2)):0},Dn.template=function(t,e,n){var i=Dn.templateSettings;n&&gr(t,e,n)&&(e=o),t=ya(t),e=xa({},e,i,Yo);var r,s,a=xa({},e.imports,i.imports,Yo),l=za(a),u=We(a,l),h=0,c=e.interpolate||yt,d="__p += '",f=kt((e.escape||yt).source+"|"+c.source+"|"+(c===Y?ct:yt).source+"|"+(e.evaluate||yt).source+"|$","g"),p="//# sourceURL="+(Nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yt+"]")+"\n";t.replace(f,(function(e,n,i,o,a,l){return i||(i=o),d+=t.slice(h,l).replace(bt,Ye),n&&(r=!0,d+="' +\n__e("+n+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),h=l+e.length,e})),d+="';\n";var _=Nt.call(e,"variable")&&e.variable;if(_){if(ut.test(_))throw new wt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(U,""):d).replace(H,"$1").replace(W,"$1;"),d="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Qa((function(){return xt(l,p+"return "+d).apply(o,u)}));if(v.source=d,Ys(v))throw v;return v},Dn.times=function(t,e){if((t=_a(t))<1||t>c)return[];var n=f,i=gn(t,f);e=ar(e),t-=f;for(var o=je(i,e);++n<t;)e(n);return o},Dn.toFinite=pa,Dn.toInteger=_a,Dn.toLength=va,Dn.toLower=function(t){return ya(t).toLowerCase()},Dn.toNumber=ma,Dn.toSafeInteger=function(t){return t?si(_a(t),-9007199254740991,c):0===t?t:0},Dn.toString=ya,Dn.toUpper=function(t){return ya(t).toUpperCase()},Dn.trim=function(t,e,n){if((t=ya(t))&&(n||e===o))return Ue(t);if(!t||!(e=ao(e)))return t;var i=sn(t),r=sn(e);return bo(i,Ke(i,r),Xe(i,r)+1).join("")},Dn.trimEnd=function(t,e,n){if((t=ya(t))&&(n||e===o))return t.slice(0,an(t)+1);if(!t||!(e=ao(e)))return t;var i=sn(t);return bo(i,0,Xe(i,sn(e))+1).join("")},Dn.trimStart=function(t,e,n){if((t=ya(t))&&(n||e===o))return t.replace(it,"");if(!t||!(e=ao(e)))return t;var i=sn(t);return bo(i,Ke(i,sn(e))).join("")},Dn.truncate=function(t,e){var n=30,i="...";if(ea(e)){var r="separator"in e?e.separator:r;n="length"in e?_a(e.length):n,i="omission"in e?ao(e.omission):i}var s=(t=ya(t)).length;if($e(t)){var a=sn(t);s=a.length}if(n>=s)return t;var l=n-rn(i);if(l<1)return i;var u=a?bo(a,0,l).join(""):t.slice(0,l);if(r===o)return u+i;if(a&&(l+=u.length-l),sa(r)){if(t.slice(l).search(r)){var h,c=u;for(r.global||(r=kt(r.source,ya(dt.exec(r))+"g")),r.lastIndex=0;h=r.exec(c);)var d=h.index;u=u.slice(0,d===o?l:d)}}else if(t.indexOf(ao(r),l)!=l){var f=u.lastIndexOf(r);f>-1&&(u=u.slice(0,f))}return u+i},Dn.unescape=function(t){return(t=ya(t))&&X.test(t)?t.replace(G,ln):t},Dn.uniqueId=function(t){var e=++Bt;return ya(t)+e},Dn.upperCase=Ja,Dn.upperFirst=Ya,Dn.each=ys,Dn.eachRight=bs,Dn.first=Xr,ll(Dn,(gl={},yi(Dn,(function(t,e){Nt.call(Dn.prototype,e)||(gl[e]=t)})),gl),{chain:!1}),Dn.VERSION="4.17.21",ye(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Dn[t].placeholder=Dn})),ye(["drop","take"],(function(t,e){Hn.prototype[t]=function(n){n=n===o?1:mn(_a(n),0);var i=this.__filtered__&&!e?new Hn(this):this.clone();return i.__filtered__?i.__takeCount__=gn(n,i.__takeCount__):i.__views__.push({size:gn(n,f),type:t+(i.__dir__<0?"Right":"")}),i},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ye(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ar(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),ye(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),ye(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ol)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=Vi((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return Ai(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter(Os(ar(t)))},Hn.prototype.slice=function(t,e){t=_a(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Hn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=_a(e))<0?n.dropRight(-e):n.take(e-t)),n)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(f)},yi(Hn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=Dn[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);r&&(Dn.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,l=e instanceof Hn,u=a[0],h=l||Gs(e),c=function(t){var e=r.apply(Dn,Se([t],a));return i&&d?e[0]:e};h&&n&&"function"==typeof u&&1!=u.length&&(l=h=!1);var d=this.__chain__,f=!!this.__actions__.length,p=s&&!d,_=l&&!f;if(!s&&h){e=_?e:new Hn(this);var v=t.apply(e,a);return v.__actions__.push({func:ps,args:[c],thisArg:o}),new Un(v,d)}return p&&_?t.apply(this,a):(v=this.thru(c),p?i?v.value()[0]:v.value():v)})})),ye(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Lt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Dn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var o=this.value();return e.apply(Gs(o)?o:[],t)}return this[n]((function(n){return e.apply(Gs(n)?n:[],t)}))}})),yi(Hn.prototype,(function(t,e){var n=Dn[e];if(n){var i=n.name+"";Nt.call(In,i)||(In[i]=[]),In[i].push({name:e,func:n})}})),In[Do(o,2).name]=[{name:"wrapper",func:o}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=Lo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Lo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Lo(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Gs(t),i=e<0,o=n?t.length:0,r=function(t,e,n){for(var i=-1,o=n.length;++i<o;){var r=n[i],s=r.size;switch(r.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=gn(e,t+s);break;case"takeRight":t=mn(t,e-s)}}return{start:t,end:e}}(0,o,this.__views__),s=r.start,a=r.end,l=a-s,u=i?a:s-1,h=this.__iteratees__,c=h.length,d=0,f=gn(l,this.__takeCount__);if(!n||!i&&o==l&&f==l)return fo(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var _=-1,v=t[u+=e];++_<c;){var m=h[_],g=m.iteratee,y=m.type,b=g(v);if(2==y)v=b;else if(!b){if(1==y)continue t;break t}}p[d++]=v}return p},Dn.prototype.at=_s,Dn.prototype.chain=function(){return fs(this)},Dn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Dn.prototype.next=function(){this.__values__===o&&(this.__values__=fa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},Dn.prototype.plant=function(t){for(var e,n=this;n instanceof jn;){var i=Zr(n);i.__index__=0,i.__values__=o,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},Dn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var e=t;return this.__actions__.length&&(e=new Hn(this)),(e=e.reverse()).__actions__.push({func:ps,args:[es],thisArg:o}),new Un(e,this.__chain__)}return this.thru(es)},Dn.prototype.toJSON=Dn.prototype.valueOf=Dn.prototype.value=function(){return fo(this.__wrapped__,this.__actions__)},Dn.prototype.first=Dn.prototype.head,se&&(Dn.prototype[se]=function(){return this}),Dn}();re._=un,(i=function(){return un}.call(e,n,e,t))===o||(t.exports=i)}.call(this)},568:(t,e,n)=>{var i,o,r,s,a;i=n(12),o=n(487).utf8,r=n(738),s=n(487).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):o.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=i.bytesToWords(t),l=8*t.length,u=1732584193,h=-271733879,c=-1732584194,d=271733878,f=0;f<n.length;f++)n[f]=16711935&(n[f]<<8|n[f]>>>24)|4278255360&(n[f]<<24|n[f]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var p=a._ff,_=a._gg,v=a._hh,m=a._ii;for(f=0;f<n.length;f+=16){var g=u,y=h,b=c,w=d;u=p(u,h,c,d,n[f+0],7,-680876936),d=p(d,u,h,c,n[f+1],12,-389564586),c=p(c,d,u,h,n[f+2],17,606105819),h=p(h,c,d,u,n[f+3],22,-1044525330),u=p(u,h,c,d,n[f+4],7,-176418897),d=p(d,u,h,c,n[f+5],12,1200080426),c=p(c,d,u,h,n[f+6],17,-1473231341),h=p(h,c,d,u,n[f+7],22,-45705983),u=p(u,h,c,d,n[f+8],7,1770035416),d=p(d,u,h,c,n[f+9],12,-1958414417),c=p(c,d,u,h,n[f+10],17,-42063),h=p(h,c,d,u,n[f+11],22,-1990404162),u=p(u,h,c,d,n[f+12],7,1804603682),d=p(d,u,h,c,n[f+13],12,-40341101),c=p(c,d,u,h,n[f+14],17,-1502002290),u=_(u,h=p(h,c,d,u,n[f+15],22,1236535329),c,d,n[f+1],5,-165796510),d=_(d,u,h,c,n[f+6],9,-1069501632),c=_(c,d,u,h,n[f+11],14,643717713),h=_(h,c,d,u,n[f+0],20,-373897302),u=_(u,h,c,d,n[f+5],5,-701558691),d=_(d,u,h,c,n[f+10],9,38016083),c=_(c,d,u,h,n[f+15],14,-660478335),h=_(h,c,d,u,n[f+4],20,-405537848),u=_(u,h,c,d,n[f+9],5,568446438),d=_(d,u,h,c,n[f+14],9,-1019803690),c=_(c,d,u,h,n[f+3],14,-187363961),h=_(h,c,d,u,n[f+8],20,1163531501),u=_(u,h,c,d,n[f+13],5,-1444681467),d=_(d,u,h,c,n[f+2],9,-51403784),c=_(c,d,u,h,n[f+7],14,1735328473),u=v(u,h=_(h,c,d,u,n[f+12],20,-1926607734),c,d,n[f+5],4,-378558),d=v(d,u,h,c,n[f+8],11,-2022574463),c=v(c,d,u,h,n[f+11],16,1839030562),h=v(h,c,d,u,n[f+14],23,-35309556),u=v(u,h,c,d,n[f+1],4,-1530992060),d=v(d,u,h,c,n[f+4],11,1272893353),c=v(c,d,u,h,n[f+7],16,-155497632),h=v(h,c,d,u,n[f+10],23,-1094730640),u=v(u,h,c,d,n[f+13],4,681279174),d=v(d,u,h,c,n[f+0],11,-358537222),c=v(c,d,u,h,n[f+3],16,-722521979),h=v(h,c,d,u,n[f+6],23,76029189),u=v(u,h,c,d,n[f+9],4,-640364487),d=v(d,u,h,c,n[f+12],11,-421815835),c=v(c,d,u,h,n[f+15],16,530742520),u=m(u,h=v(h,c,d,u,n[f+2],23,-995338651),c,d,n[f+0],6,-198630844),d=m(d,u,h,c,n[f+7],10,1126891415),c=m(c,d,u,h,n[f+14],15,-1416354905),h=m(h,c,d,u,n[f+5],21,-57434055),u=m(u,h,c,d,n[f+12],6,1700485571),d=m(d,u,h,c,n[f+3],10,-1894986606),c=m(c,d,u,h,n[f+10],15,-1051523),h=m(h,c,d,u,n[f+1],21,-2054922799),u=m(u,h,c,d,n[f+8],6,1873313359),d=m(d,u,h,c,n[f+15],10,-30611744),c=m(c,d,u,h,n[f+6],15,-1560198380),h=m(h,c,d,u,n[f+13],21,1309151649),u=m(u,h,c,d,n[f+4],6,-145523070),d=m(d,u,h,c,n[f+11],10,-1120210379),c=m(c,d,u,h,n[f+2],15,718787259),h=m(h,c,d,u,n[f+9],21,-343485551),u=u+g>>>0,h=h+y>>>0,c=c+b>>>0,d=d+w>>>0}return i.endian([u,h,c,d])})._ff=function(t,e,n,i,o,r,s){var a=t+(e&n|~e&i)+(o>>>0)+s;return(a<<r|a>>>32-r)+e},a._gg=function(t,e,n,i,o,r,s){var a=t+(e&i|n&~i)+(o>>>0)+s;return(a<<r|a>>>32-r)+e},a._hh=function(t,e,n,i,o,r,s){var a=t+(e^n^i)+(o>>>0)+s;return(a<<r|a>>>32-r)+e},a._ii=function(t,e,n,i,o,r,s){var a=t+(n^(e|~i))+(o>>>0)+s;return(a<<r|a>>>32-r)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=i.wordsToBytes(a(t,e));return e&&e.asBytes?n:e&&e.asString?s.bytesToString(n):i.bytesToHex(n)}},104:t=>{var e="undefined"!=typeof process&&process.pid?process.pid.toString(36):"";function n(){var t=Date.now(),e=n.last||t;return n.last=t>e?t:e+1}t.exports=t.exports.default=function(t,i){return(t||"")+""+e+n().toString(36)+(i||"")},t.exports.process=function(t,i){return(t||"")+e+n().toString(36)+(i||"")},t.exports.time=function(t,e){return(t||"")+n().toString(36)+(e||"")}},196:t=>{t.exports="#version 300 es\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\nin vec2 vCRSCoords;\n\n\n\n#define WEIRDNESS 0\n#define CONTINENTALNESS 1\n#define EROSION 2\n#define TEMPERATURE 3\n#define HUMIDITY 4\n#define OFFSET 5\n#define DEPTH 5 // used for getCellBorder\n\n#define FIRST 0\n#define SECOND 1\n\n#define X_AXIS 0\n#define Y_AXIS 1\n#define Z_AXIS 2\n\n#define OCTAVE_COUNT 20\n#define MAX_PARAMETER_CELLS_BORDERS 20\n\n#define FIRST_OCTAVE_TEXTURE_FACTOR -256.0\n#define FLOAT_TEXTURE_FACTOR 8.0\n#define FLOAT_TEXTURE_OFFSET -8.0\n#define P_TEXTURE_FACTOR 256.0\n\n#define BORDER_UNDEFINED -200.0\n\nconst int NOISE_STORAGE_LENGTH = (MAX_PARAMETER_CELLS_BORDERS + OCTAVE_COUNT * 259 * 2 + 2 + OCTAVE_COUNT);\n\nuniform sampler2D parameterTexture;\n\nfloat getParameter(int index){\n    int texture_width = textureSize(parameterTexture, 0).x;\n    return texelFetch(parameterTexture, ivec2(index % texture_width, index / texture_width), 0).r;\n}  \n\nint getFirstOctave(int noise){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH;\n    return int(getParameter(parameter_index));\n}\n\nfloat getValueFactor(int noise){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH + 1;\n    return getParameter(parameter_index);\n}\n\nfloat getAmplitude(int noise, int index){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH + 2 + index;\n    return getParameter(parameter_index);\n}\n\nfloat getCellBorder(int noise, int index){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH + 2 + OCTAVE_COUNT + index;\n    return getParameter(parameter_index);\n}\n\nfloat getPos0(int noise, int normal_noise_index, int octave_index, int axis){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH + 2 + OCTAVE_COUNT + MAX_PARAMETER_CELLS_BORDERS + normal_noise_index * (OCTAVE_COUNT * 259) + 259 * octave_index + axis;\n    return getParameter(parameter_index);\n}\n\nint getP(int noise, int normal_noise_index, int octave_index, int index){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH + 2 + OCTAVE_COUNT + MAX_PARAMETER_CELLS_BORDERS + normal_noise_index * (OCTAVE_COUNT * 259) + 259 * octave_index + 3 + (index & 0xFF);\n    int value = int(getParameter(parameter_index));\n    return value & 0xFF;\n}\n\nconst int GRADIENT[48] = int[](1, 1, 0, -1, 1, 0, 1, -1, 0, -1, -1, 0, 1, 0, 1, -1, 0, 1, 1, 0, -1, -1, 0, -1, 0, 1, 1, 0, -1, 1, 0, 1, -1, 0, -1, -1, 1, 1, 0, 0, -1, 1, -1, 1, 0, 0, -1, -1);\n\nfloat grad_dot(int p, float a, float b, float c){\n    int index = (p & 15) * 3;\n    return float(GRADIENT[index]) * a + float(GRADIENT[index + 1]) * b + float(GRADIENT[index + 2]) * c;\n}\n\nfloat _smoothstep(float x){\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nfloat lerp(float alpha, float a, float b) {\n\treturn a + alpha * (b - a);\n}\n\nfloat lerp2(float alpha1, float alpha2, float a, float b, float c, float d) {\n\treturn lerp(alpha2, lerp(alpha1, a, b), lerp(alpha1, c, d));\n}\n\nfloat lerp3(float alpha1, float alpha2, float alpha3, float a, float b, float c, float d, float e, float f, float g, float h) {\n\treturn lerp(alpha3, lerp2(alpha1, alpha2, a, b, c, d), lerp2(alpha1, alpha2, e, f, g, h));\n}\n\nfloat improved_noise(int noise, int normal_noise_index, int octave_index, float x, float y, float z, float yScale, float yLimit){\n\n    float x2 = x + getPos0(noise, normal_noise_index, octave_index, X_AXIS);\n    float y2 = y + getPos0(noise, normal_noise_index, octave_index, Y_AXIS);\n    float z2 = z + getPos0(noise, normal_noise_index, octave_index, Z_AXIS);\n\n    int x3 = int(floor(x2));\n    int y3 = int(floor(y2));\n    int z3 = int(floor(z2));\n\n    float x4 = x2 - float(x3);\n    float y4 = y2 - float(y3);\n    float z4 = z2 - float(z3);\n\n    float y6 = 0.0;\n\n    if (yScale != 0.0){\n        float t = yLimit >= 0.0 && yLimit < y4 ? yLimit : y4;\n        y6 = floor(t / yScale + 1e-7) * yScale;\n    }\n\n    float y7 = y4 - y6;\n\n    int p1 = getP(noise, normal_noise_index, octave_index, x3);\n    int p2 = getP(noise, normal_noise_index, octave_index, x3 + 1);\n    int p3 = getP(noise, normal_noise_index, octave_index, p1 + y3);\n    int p4 = getP(noise, normal_noise_index, octave_index, p1 + y3 + 1);\n    int p5 = getP(noise, normal_noise_index, octave_index, p2 + y3);\n    int p6 = getP(noise, normal_noise_index, octave_index, p2 + y3 + 1);\n\n    float n = grad_dot(getP(noise, normal_noise_index, octave_index, p3 + z3), x4, y7, z4);\n    float o = grad_dot(getP(noise, normal_noise_index, octave_index, p5 + z3), x4 - 1.0, y7, z4);\n    float p = grad_dot(getP(noise, normal_noise_index, octave_index, p4 + z3), x4, y7 - 1.0, z4);\n    float q = grad_dot(getP(noise, normal_noise_index, octave_index, p6 + z3), x4 - 1.0, y7 - 1.0, z4);\n    float r = grad_dot(getP(noise, normal_noise_index, octave_index, p3 + z3 + 1), x4, y7, z4 - 1.0);\n    float s = grad_dot(getP(noise, normal_noise_index, octave_index, p5 + z3 + 1), x4 - 1.0, y7, z4 - 1.0);\n    float t = grad_dot(getP(noise, normal_noise_index, octave_index, p4 + z3 + 1), x4, y7 - 1.0, z4 - 1.0);\n    float u = grad_dot(getP(noise, normal_noise_index, octave_index, p6 + z3 + 1), x4 - 1.0, y7 - 1.0, z4 - 1.0);\n\n    float alpha1 = _smoothstep(x4);\n    float alpha2 = _smoothstep(y4);\n    float alpha3 = _smoothstep(z4);\n\n    return lerp3(alpha1, alpha2, alpha3, n, o, p, q, r, s, t, u);\n}\n\n\nfloat _wrap(float value) {\n    return value - floor(value / 3.3554432E7 + 0.5) * 3.3554432E7;\n}\n\nfloat perlin_noise(int noise, int normal_noise_index, float x, float y, float z, float yScale, float yLimit, bool fixY){\n    float value = 0.0;\n    float inputF = pow(2.0,float(getFirstOctave(noise)));\n    float valueF = 1.0;\n\n    for (int i = 0 ; i < 20 ; i++){\n        float amplitude = getAmplitude(noise, i);\n        if (amplitude != 0.0){\n            value += amplitude * valueF * improved_noise(noise, normal_noise_index, i, \n                _wrap(x * inputF),\n                fixY ? -getPos0(noise, normal_noise_index, i , Y_AXIS) : _wrap(y * inputF),\n                _wrap(z * inputF),\n                yScale * inputF,\n                yLimit * inputF\n            );\n        }\n        inputF *= 2.0;\n        valueF /= 2.0;\n    }\n\n    return value;\n}\n\n\n#define INPUT_FACTOR 1.0181268882175227\n\nfloat normal_noise(int noise, float x, float y, float z){\n    return (perlin_noise(noise, FIRST, x, y, z, 0.0, 0.0, false) + perlin_noise(noise, SECOND, x * INPUT_FACTOR, y * INPUT_FACTOR, z * INPUT_FACTOR, 0.0, 0.0, false)) * getValueFactor(noise);\n}\n\nuniform sampler2D biomeTexture;\n\nint bucketize(int noise, float value, out int count){\n    int result = 20;\n    count = 20;\n    for (int i = 0 ; i < 20 ; i++){\n        float border = getCellBorder(noise, i);\n        if (border == BORDER_UNDEFINED && count == 20){\n            count = i + 1;\n        }\n        if (result == 20 && (border == BORDER_UNDEFINED || border > value)){\n            result = i;\n        }\n    }\n    return result;\n}\n\nvec4 lookup_biome(float continentalness, float erosion, float weirdness, float temperature, float humidity, float depth){\n    int c_count, e_count, w_count, t_count, h_count, d_count;\n\n    int c = bucketize(CONTINENTALNESS, continentalness, c_count);\n    int e = bucketize(EROSION, erosion, e_count);\n    int w = bucketize(WEIRDNESS, weirdness, w_count);\n    int t = bucketize(TEMPERATURE, temperature, t_count);\n    int h = bucketize(HUMIDITY, humidity, h_count);\n    int d = bucketize(DEPTH, depth, d_count);\n\n    int index = \n        d * h_count * t_count * w_count * e_count * c_count +\n        h * t_count * w_count * e_count * c_count +\n        t * w_count * e_count * c_count + \n        w * e_count * c_count +\n        e * c_count +\n        c;\n\n    int texture_width = textureSize(biomeTexture, 0).x;\n\n    return texelFetch(biomeTexture, ivec2(index % texture_width, index / texture_width), 0);\n}\n\n\n\n\n#define OFFSET_SPLINE 0\n\n\n\n#define SPLINE_MAX_CONTINENTALNESSES 20\n#define SPLINE_MAX_EROSIONS 20 \n#define SPLINE_MAX_POINTS 40\n\nconst int SPLINE_STORAGE_LENGHT = SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + 2 + SPLINE_MAX_CONTINENTALNESSES * SPLINE_MAX_EROSIONS * (SPLINE_MAX_POINTS * 4 + 1);\n\nuniform sampler2D splineTexture;\n\nfloat spline_get_parameter(int index){\n    int texture_width = textureSize(splineTexture, 0).x;\n    return texelFetch(splineTexture, ivec2(index % texture_width, index / texture_width), 0).r;\n}  \n\nint spline_get_num_continentalnesses(int spline){\n    return int(spline_get_parameter(spline * SPLINE_STORAGE_LENGHT));\n}\n\nint spline_get_num_erosions(int spline){\n    return int(spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 1 + SPLINE_MAX_CONTINENTALNESSES));\n}\n\nfloat spline_get_continentalness_cell_border(int spline, int ci){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 1 + ci);\n}\n\nfloat spline_get_erosion_cell_border(int spline, int ei){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + ei);\n}\n\n\nint spline_get_num_points(int spline, int ci, int ei){\n    return int(spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + (ci * SPLINE_MAX_EROSIONS + ei) * (SPLINE_MAX_POINTS * 4 + 1)));\n}\n\nbool spline_is_defined(int spline, int ci, int ei){\n    return spline_get_num_points(spline, ci, ei) > 0;\n}\n\nfloat spline_get_point_location(int spline, int ci, int ei, int wi){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + (ci * SPLINE_MAX_EROSIONS + ei) * (SPLINE_MAX_POINTS * 4 + 1) + 1 + wi * 4);\n}\n\nfloat spline_get_point_value(int spline, int ci, int ei, int wi){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + (ci * SPLINE_MAX_EROSIONS + ei) * (SPLINE_MAX_POINTS * 4 + 1) + 1 + wi * 4 + 1);\n}\n\nfloat spline_get_point_derivative_left(int spline, int ci, int ei, int wi){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + (ci * SPLINE_MAX_EROSIONS + ei) * (SPLINE_MAX_POINTS * 4 + 1) + 1 + wi * 4 + 2);\n}\n\nfloat spline_get_point_derivative_right(int spline, int ci, int ei, int wi){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + (ci * SPLINE_MAX_EROSIONS + ei) * (SPLINE_MAX_POINTS * 4 + 1) + 1 + wi * 4 + 3);\n}\n\n\n\nfloat spline_apply_weirdness(int spline, int ci, int ei, float w){\n    int wi;\n    int num_weirnesses = spline_get_num_points(spline, ci, ei);\n    for (int i = 0; i < num_weirnesses; i++) {\n        if (spline_get_point_location(spline, ci, ei, i) < w) {\n            wi = i;\n        }\n    }\n\n    if (wi < 0) {\n        return spline_get_point_value(spline, ci, ei, 0) + spline_get_point_derivative_left(spline, ci, ei, 0) * (w - spline_get_point_location(spline, ci, ei, 0));\n    }\n    if (wi == num_weirnesses - 1) {\n        return spline_get_point_value(spline, ci, ei, wi) + spline_get_point_derivative_right(spline, ci, ei, wi) * (w - spline_get_point_location(spline, ci, ei, wi));\n    }\n\n    float loc0 = spline_get_point_location(spline, ci, ei, wi);\n    float loc1 = spline_get_point_location(spline, ci, ei, wi+1);\n    float der0 = spline_get_point_derivative_right(spline, ci, ei, wi);\n    float der1 = spline_get_point_derivative_left(spline, ci, ei, wi+1);\n    float f = (w - loc0) / (loc1 - loc0);\n\n    float val0 = spline_get_point_value(spline, ci, ei, wi);\n    float val1 = spline_get_point_value(spline, ci, ei, wi+1);\n\n    float f8 = der0 * (loc1 - loc0) - (val1 - val0);\n    float f9 = -der1 * (loc1 - loc0) + (val1 - val0);\n    float f10 = lerp(f, val0, val1) + f * (1.0 - f) * lerp(f, f8, f9);\n    return f10;\n}\n\nfloat interpolate_zero_grad(float alpha, float a, float b) {\n    return lerp(alpha, a, b) + alpha * (1.0 - alpha) * lerp(alpha, a - b, b - a);\n}\n\nfloat spline_apply_erosion(int spline, int ci, float e, float w){\n    int e_last = -1;\n    int e_next = -1;\n    int num_erosions = spline_get_num_erosions(spline);\n    for (int ei = 0; ei < num_erosions; ei++) {\n        if (spline_is_defined(spline, ci, ei)) {\n            if (spline_get_erosion_cell_border(spline, ei) < e) {\n                e_last = ei;\n            } else {\n                e_next = ei;\n                break;\n            }\n        }\n    }\n\n    if (e_last == -1 && e_next == -1) {\n        return 0.0;\n    } else if (e_last == -1) {;\n        return spline_apply_weirdness(spline,ci,e_next,w);\n    } else if (e_next == -1) {\n        return spline_apply_weirdness(spline,ci,e_last,w);\n    } else {\n        float last_ero = spline_get_erosion_cell_border(spline, e_last);\n        float next_ero = spline_get_erosion_cell_border(spline, e_next);\n        return interpolate_zero_grad((e - last_ero) / (next_ero - last_ero),\n            spline_apply_weirdness(spline,ci,e_last,w),\n            spline_apply_weirdness(spline,ci,e_next,w));\n    }\n}\n\nfloat spline_apply(int spline, float c, float e, float w){\n    int c_last = -1;\n    int c_next = -1;\n    int num_continentalnesses = spline_get_num_continentalnesses(spline);\n    for (int ci = 0; ci < num_continentalnesses; ci++) {\n        if (spline_get_continentalness_cell_border(spline, ci) < c) {\n            c_last = ci;\n        } else {\n            c_next = ci;\n            break;\n        }\n    }\n\n    if (c_last == -1 && c_next == -1 ) {\n        return 0.0;\n    } else if (c_last == -1) {\n        return spline_apply_erosion(spline, c_next, e, w);\n    } else if (c_next == -1) {\n        return spline_apply_erosion(spline, c_last, e, w);\n    } else {\n        float last_cont = spline_get_continentalness_cell_border(spline, c_last);\n        float next_cont = spline_get_continentalness_cell_border(spline, c_next);\n        return interpolate_zero_grad((c - last_cont) / (next_cont - last_cont),\n            spline_apply_erosion(spline, c_last, e, w),\n            spline_apply_erosion(spline, c_next, e, w));\n    }\n}\n\n#define M_PI 3.1415926535897932384626433832795\n\nuniform mat4 transform;\nuniform vec3 color;\n\nuniform bool enable_isolines;\nuniform bool enable_hillshading;\n\nuniform int y_level;\nuniform float fixed_continentalness;\nuniform float fixed_erosion;\nuniform float fixed_weirdness;\nuniform float fixed_temperature;\nuniform float fixed_humidity;\n\nout vec4 output_color;\n\nconst float zenith = 20.0 * M_PI / 180.0;\nconst float azimuth = 225.0 * M_PI / 180.0;\n\n\nfloat inv_lerp(float a, float b, float v) {\n\treturn (v - a) / (b - a);\n}\n \nvoid main(void) {\n\t\n\t\n\tfloat x = vCRSCoords.x / 4.0;\n\tfloat z = -vCRSCoords.y / 4.0;\n\n\tfloat pixel_scale = dFdx(x);\n\n    float xx = x + normal_noise(OFFSET, x, 0.0, z) * 4.0;\n    float zz = z + normal_noise(OFFSET, z, x, 0.0) * 4.0;\n\n\tfloat continentalness = fixed_continentalness != 10000.0 ? fixed_continentalness : normal_noise(CONTINENTALNESS, xx, 0.0, zz);\n\tfloat erosion = fixed_erosion != 10000.0 ? fixed_erosion : normal_noise(EROSION, xx, 0.0, zz);\n\tfloat weirdness = fixed_weirdness != 10000.0 ? fixed_weirdness : normal_noise(WEIRDNESS, xx, 0.0, zz);\n\tfloat temperature = fixed_temperature != 10000.0 ? fixed_temperature : normal_noise(TEMPERATURE, xx, 0.0, zz);\n\tfloat humidity = fixed_humidity != 10000.0 ? fixed_humidity : normal_noise(HUMIDITY, xx, 0.0, zz);\n\n\tfloat offset = spline_apply(OFFSET_SPLINE, continentalness, erosion, weirdness);\n\n\tfloat depth = ((y_level == 10000) ? -0.001 : -(float(y_level) - 64.0) / 128.0 + offset);\n\n\tvec4 biome_color = lookup_biome(continentalness, erosion, weirdness, temperature, humidity, depth);\n\t\n\tfloat offset_slope_x = dFdx(offset);\n\tfloat offset_slope_y = dFdy(offset);\n\n\tfloat hillshade = 1.0;\n\tif (enable_hillshading && depth < 0.0){\n\t\tfloat slope = atan(20.0 / pixel_scale * sqrt(offset_slope_x * offset_slope_x + offset_slope_y * offset_slope_y));\n\t\tfloat aspect;\n\t\tif (offset_slope_x == 0.0){\n\t\t\tif (offset_slope_y < 0.0){\n\t\t\t\taspect = M_PI;\n\t\t\t} else {\n\t\t\t\taspect = 0.0;\n\t\t\t}\n\t\t} else {\n\t\t\taspect = atan(offset_slope_y, -offset_slope_x);\n\t\t}\n\n\t\thillshade = ((cos(zenith) * cos(slope)) + (sin(zenith) * sin(slope) * cos(azimuth - aspect)));\n\t\tif (hillshade < 0.0)\n\t\t\thillshade = 0.0;\n\n\t\thillshade = hillshade * 0.7 + 0.3;\n\t}\n\n\tfloat isoline = 1.0;\n\tif (pixel_scale < 1.0 && enable_isolines && depth < 0.0){\n\t\tfloat isoline_step = 0.1;\n\n\t\tfloat delta = 2.0 * sqrt(offset_slope_x * offset_slope_x + offset_slope_y * offset_slope_y);\n\t\tfloat offset_hi = offset + delta + 0.01;\n\t\tfloat offset_lo = offset - delta + 0.01;\n\n\t\tfloat isoline_value = floor(offset_hi / isoline_step) * isoline_step;\n\t\tfloat isoline_alpha = inv_lerp(offset_lo, offset_hi, isoline_value);\n\t\tisoline = min(abs(0.5 - isoline_alpha) * 3.0 + 0.2, 1.0);\n\t}\n\n\toutput_color = biome_color * vec4(hillshade * isoline, hillshade * isoline, hillshade * isoline, 1.0);\n\t\n\n\t/*\n\tif (offset > 0.6){\n\t\toutput_color = vec4(biome_color.rgb, 0.5);// biome_color;\n\t} else {\n\t\toutput_color = biome_color;// biome_color;\n\t}*/\n}\n"}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var i={};(()=>{"use strict";function t(t){let e=t.length;for(;--e>=0;)t[e]=0}n.d(i,{n:()=>ru,s:()=>su});const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),o=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),s=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=new Array(576);t(a);const l=new Array(60);t(l);const u=new Array(512);t(u);const h=new Array(256);t(h);const c=new Array(29);t(c);const d=new Array(30);function f(t,e,n,i,o){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=o,this.has_stree=t&&t.length}let p,_,v;function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(d);const g=t=>t<256?u[t]:u[256+(t>>>7)],y=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},b=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,y(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},w=(t,e,n)=>{b(t,n[2*e],n[2*e+1])},x=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},E=(t,e,n)=>{const i=new Array(16);let o,r,s=0;for(o=1;o<=15;o++)i[o]=s=s+n[o-1]<<1;for(r=0;r<=e;r++){let e=t[2*r+1];0!==e&&(t[2*r]=x(i[e]++,e))}},T=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},k=t=>{t.bi_valid>8?y(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=(t,e,n,i)=>{const o=2*e,r=2*n;return t[o]<t[r]||t[o]===t[r]&&i[e]<=i[n]},P=(t,e,n)=>{const i=t.heap[n];let o=n<<1;for(;o<=t.heap_len&&(o<t.heap_len&&S(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!S(e,i,t.heap[o],t.depth));)t.heap[n]=t.heap[o],n=o,o<<=1;t.heap[n]=i},L=(t,n,i)=>{let r,s,a,l,u=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],s=t.pending_buf[t.l_buf+u],u++,0===r?w(t,s,n):(a=h[s],w(t,a+256+1,n),l=e[a],0!==l&&(s-=c[a],b(t,s,l)),r--,a=g(r),w(t,a,i),l=o[a],0!==l&&(r-=d[a],b(t,r,l)))}while(u<t.last_lit);w(t,256,n)},A=(t,e)=>{const n=e.dyn_tree,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,r=e.stat_desc.elems;let s,a,l,u=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<r;s++)0!==n[2*s]?(t.heap[++t.heap_len]=u=s,t.depth[s]=0):n[2*s+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=u<2?++u:0,n[2*l]=1,t.depth[l]=0,t.opt_len--,o&&(t.static_len-=i[2*l+1]);for(e.max_code=u,s=t.heap_len>>1;s>=1;s--)P(t,n,s);l=r;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],P(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=a,n[2*l]=n[2*s]+n[2*a],t.depth[l]=(t.depth[s]>=t.depth[a]?t.depth[s]:t.depth[a])+1,n[2*s+1]=n[2*a+1]=l,t.heap[1]=l++,P(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,i=e.max_code,o=e.stat_desc.static_tree,r=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length;let u,h,c,d,f,p,_=0;for(d=0;d<=15;d++)t.bl_count[d]=0;for(n[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)h=t.heap[u],d=n[2*n[2*h+1]+1]+1,d>l&&(d=l,_++),n[2*h+1]=d,h>i||(t.bl_count[d]++,f=0,h>=a&&(f=s[h-a]),p=n[2*h],t.opt_len+=p*(d+f),r&&(t.static_len+=p*(o[2*h+1]+f)));if(0!==_){do{for(d=l-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[l]--,_-=2}while(_>0);for(d=l;0!==d;d--)for(h=t.bl_count[d];0!==h;)c=t.heap[--u],c>i||(n[2*c+1]!==d&&(t.opt_len+=(d-n[2*c+1])*n[2*c],n[2*c+1]=d),h--)}})(t,e),E(n,u,t.bl_count)},I=(t,e,n)=>{let i,o,r=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)o=s,s=e[2*(i+1)+1],++a<l&&o===s||(a<u?t.bl_tree[2*o]+=a:0!==o?(o!==r&&t.bl_tree[2*o]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,r=o,0===s?(l=138,u=3):o===s?(l=6,u=3):(l=7,u=4))},M=(t,e,n)=>{let i,o,r=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),i=0;i<=n;i++)if(o=s,s=e[2*(i+1)+1],!(++a<l&&o===s)){if(a<u)do{w(t,o,t.bl_tree)}while(0!=--a);else 0!==o?(o!==r&&(w(t,o,t.bl_tree),a--),w(t,16,t.bl_tree),b(t,a-3,2)):a<=10?(w(t,17,t.bl_tree),b(t,a-3,3)):(w(t,18,t.bl_tree),b(t,a-11,7));a=0,r=o,0===s?(l=138,u=3):o===s?(l=6,u=3):(l=7,u=4)}};let z=!1;const N=(t,e,n,i)=>{b(t,0+(i?1:0),3),((t,e,n,i)=>{k(t),y(t,n),y(t,~n),t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n})(t,e,n)};var B={_tr_init:t=>{z||((()=>{let t,n,i,s,m;const g=new Array(16);for(i=0,s=0;s<28;s++)for(c[s]=i,t=0;t<1<<e[s];t++)h[i++]=s;for(h[i-1]=s,m=0,s=0;s<16;s++)for(d[s]=m,t=0;t<1<<o[s];t++)u[m++]=s;for(m>>=7;s<30;s++)for(d[s]=m<<7,t=0;t<1<<o[s]-7;t++)u[256+m++]=s;for(n=0;n<=15;n++)g[n]=0;for(t=0;t<=143;)a[2*t+1]=8,t++,g[8]++;for(;t<=255;)a[2*t+1]=9,t++,g[9]++;for(;t<=279;)a[2*t+1]=7,t++,g[7]++;for(;t<=287;)a[2*t+1]=8,t++,g[8]++;for(E(a,287,g),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=x(t,5);p=new f(a,e,257,286,15),_=new f(l,o,0,30,15),v=new f(new Array(0),r,0,19,7)})(),z=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,_),t.bl_desc=new m(t.bl_tree,v),t.bi_buf=0,t.bi_valid=0,T(t)},_tr_stored_block:N,_tr_flush_block:(t,e,n,i)=>{let o,r,u=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),A(t,t.l_desc),A(t,t.d_desc),u=(t=>{let e;for(I(t,t.dyn_ltree,t.l_desc.max_code),I(t,t.dyn_dtree,t.d_desc.max_code),A(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*s[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=o&&(o=r)):o=r=n+5,n+4<=o&&-1!==e?N(t,e,n,i):4===t.strategy||r===o?(b(t,2+(i?1:0),3),L(t,a,l)):(b(t,4+(i?1:0),3),((t,e,n,i)=>{let o;for(b(t,e-257,5),b(t,n-1,5),b(t,i-4,4),o=0;o<i;o++)b(t,t.bl_tree[2*s[o]+1],3);M(t,t.dyn_ltree,e-1),M(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),L(t,t.dyn_ltree,t.dyn_dtree)),T(t),i&&k(t)},_tr_tally:(t,e,n)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(h[n]+256+1)]++,t.dyn_dtree[2*g(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{b(t,2,3),w(t,256,a),(t=>{16===t.bi_valid?(y(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},C=(t,e,n,i)=>{let o=65535&t|0,r=t>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{o=o+e[i++]|0,r=r+o|0}while(--s);o%=65521,r%=65521}return o|r<<16|0};const O=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var R=(t,e,n,i)=>{const o=O,r=i+n;t^=-1;for(let n=i;n<r;n++)t=t>>>8^o[255&(t^e[n])];return-1^t},F={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},D={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Z,_tr_stored_block:j,_tr_flush_block:U,_tr_tally:H,_tr_align:W}=B,{Z_NO_FLUSH:G,Z_PARTIAL_FLUSH:K,Z_FULL_FLUSH:X,Z_FINISH:V,Z_BLOCK:q,Z_OK:J,Z_STREAM_END:Y,Z_STREAM_ERROR:$,Z_DATA_ERROR:Q,Z_BUF_ERROR:tt,Z_DEFAULT_COMPRESSION:et,Z_FILTERED:nt,Z_HUFFMAN_ONLY:it,Z_RLE:ot,Z_FIXED:rt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:at,Z_DEFLATED:lt}=D,ut=258,ht=262,ct=103,dt=113,ft=666,pt=(t,e)=>(t.msg=F[e],e),_t=t=>(t<<1)-(t>4?9:0),vt=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let mt=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const gt=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},yt=(t,e)=>{U(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,gt(t.strm)},bt=(t,e)=>{t.pending_buf[t.pending++]=e},wt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},xt=(t,e,n,i)=>{let o=t.avail_in;return o>i&&(o=i),0===o?0:(t.avail_in-=o,e.set(t.input.subarray(t.next_in,t.next_in+o),n),1===t.state.wrap?t.adler=C(t.adler,e,o,n):2===t.state.wrap&&(t.adler=R(t.adler,e,o,n)),t.next_in+=o,t.total_in+=o,o)},Et=(t,e)=>{let n,i,o=t.max_chain_length,r=t.strstart,s=t.prev_length,a=t.nice_match;const l=t.strstart>t.w_size-ht?t.strstart-(t.w_size-ht):0,u=t.window,h=t.w_mask,c=t.prev,d=t.strstart+ut;let f=u[r+s-1],p=u[r+s];t.prev_length>=t.good_match&&(o>>=2),a>t.lookahead&&(a=t.lookahead);do{if(n=e,u[n+s]===p&&u[n+s-1]===f&&u[n]===u[r]&&u[++n]===u[r+1]){r+=2,n++;do{}while(u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&r<d);if(i=ut-(d-r),r=d-ut,i>s){if(t.match_start=e,s=i,i>=a)break;f=u[r+s-1],p=u[r+s]}}}while((e=c[e&h])>l&&0!=--o);return s<=t.lookahead?s:t.lookahead},Tt=t=>{const e=t.w_size;let n,i,o,r,s;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-ht)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,i=t.hash_size,n=i;do{o=t.head[--n],t.head[n]=o>=e?o-e:0}while(--i);i=e,n=i;do{o=t.prev[--n],t.prev[n]=o>=e?o-e:0}while(--i);r+=e}if(0===t.strm.avail_in)break;if(i=xt(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=mt(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=mt(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ht&&0!==t.strm.avail_in)},kt=(t,e)=>{let n,i;for(;;){if(t.lookahead<ht){if(Tt(t),t.lookahead<ht&&e===G)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=mt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-ht&&(t.match_length=Et(t,n)),t.match_length>=3)if(i=H(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=mt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=mt(t,t.ins_h,t.window[t.strstart+1]);else i=H(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(yt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(yt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(yt(t,!1),0===t.strm.avail_out)?1:2},St=(t,e)=>{let n,i,o;for(;;){if(t.lookahead<ht){if(Tt(t),t.lookahead<ht&&e===G)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=mt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ht&&(t.match_length=Et(t,n),t.match_length<=5&&(t.strategy===nt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-3,i=H(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=mt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(yt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=H(t,0,t.window[t.strstart-1]),i&&yt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=H(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(yt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(yt(t,!1),0===t.strm.avail_out)?1:2};function Pt(t,e,n,i,o){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=o}const Lt=[new Pt(0,0,0,0,((t,e)=>{let n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Tt(t),0===t.lookahead&&e===G)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,yt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ht&&(yt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(yt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(yt(t,!1),t.strm.avail_out),1)})),new Pt(4,4,8,4,kt),new Pt(4,5,16,8,kt),new Pt(4,6,32,32,kt),new Pt(4,4,16,16,St),new Pt(8,16,32,32,St),new Pt(8,16,128,128,St),new Pt(8,32,128,256,St),new Pt(32,128,258,1024,St),new Pt(32,258,258,4096,St)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),vt(this.dyn_ltree),vt(this.dyn_dtree),vt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),vt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),vt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const It=t=>{if(!t||!t.state)return pt(t,$);t.total_in=t.total_out=0,t.data_type=at;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:dt,t.adler=2===e.wrap?0:1,e.last_flush=G,Z(e),J},Mt=t=>{const e=It(t);return e===J&&((n=t.state).window_size=2*n.w_size,vt(n.head),n.max_lazy_match=Lt[n.level].max_lazy,n.good_match=Lt[n.level].good_length,n.nice_match=Lt[n.level].nice_length,n.max_chain_length=Lt[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e;var n},zt=(t,e,n,i,o,r)=>{if(!t)return $;let s=1;if(e===et&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>9||n!==lt||i<8||i>15||e<0||e>9||r<0||r>rt)return pt(t,$);8===i&&(i=9);const a=new At;return t.state=a,a.strm=t,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=r,a.method=n,Mt(t)};var Nt=zt,Bt=(t,e)=>t&&t.state?2!==t.state.wrap?$:(t.state.gzhead=e,J):$,Ct=(t,e)=>{let n,i;if(!t||!t.state||e>q||e<0)return t?pt(t,$):$;const o=t.state;if(!t.output||!t.input&&0!==t.avail_in||o.status===ft&&e!==V)return pt(t,0===t.avail_out?tt:$);o.strm=t;const r=o.last_flush;if(o.last_flush=e,42===o.status)if(2===o.wrap)t.adler=0,bt(o,31),bt(o,139),bt(o,8),o.gzhead?(bt(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),bt(o,255&o.gzhead.time),bt(o,o.gzhead.time>>8&255),bt(o,o.gzhead.time>>16&255),bt(o,o.gzhead.time>>24&255),bt(o,9===o.level?2:o.strategy>=it||o.level<2?4:0),bt(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(bt(o,255&o.gzhead.extra.length),bt(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=R(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(bt(o,0),bt(o,0),bt(o,0),bt(o,0),bt(o,0),bt(o,9===o.level?2:o.strategy>=it||o.level<2?4:0),bt(o,3),o.status=dt);else{let e=lt+(o.w_bits-8<<4)<<8,n=-1;n=o.strategy>=it||o.level<2?0:o.level<6?1:6===o.level?2:3,e|=n<<6,0!==o.strstart&&(e|=32),e+=31-e%31,o.status=dt,wt(o,e),0!==o.strstart&&(wt(o,t.adler>>>16),wt(o,65535&t.adler)),t.adler=1}if(69===o.status)if(o.gzhead.extra){for(n=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>n&&(t.adler=R(t.adler,o.pending_buf,o.pending-n,n)),gt(t),n=o.pending,o.pending!==o.pending_buf_size));)bt(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>n&&(t.adler=R(t.adler,o.pending_buf,o.pending-n,n)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){n=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>n&&(t.adler=R(t.adler,o.pending_buf,o.pending-n,n)),gt(t),n=o.pending,o.pending===o.pending_buf_size)){i=1;break}i=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,bt(o,i)}while(0!==i);o.gzhead.hcrc&&o.pending>n&&(t.adler=R(t.adler,o.pending_buf,o.pending-n,n)),0===i&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){n=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>n&&(t.adler=R(t.adler,o.pending_buf,o.pending-n,n)),gt(t),n=o.pending,o.pending===o.pending_buf_size)){i=1;break}i=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,bt(o,i)}while(0!==i);o.gzhead.hcrc&&o.pending>n&&(t.adler=R(t.adler,o.pending_buf,o.pending-n,n)),0===i&&(o.status=ct)}else o.status=ct;if(o.status===ct&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&gt(t),o.pending+2<=o.pending_buf_size&&(bt(o,255&t.adler),bt(o,t.adler>>8&255),t.adler=0,o.status=dt)):o.status=dt),0!==o.pending){if(gt(t),0===t.avail_out)return o.last_flush=-1,J}else if(0===t.avail_in&&_t(e)<=_t(r)&&e!==V)return pt(t,tt);if(o.status===ft&&0!==t.avail_in)return pt(t,tt);if(0!==t.avail_in||0!==o.lookahead||e!==G&&o.status!==ft){let n=o.strategy===it?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(Tt(t),0===t.lookahead)){if(e===G)return 1;break}if(t.match_length=0,n=H(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(yt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(yt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(yt(t,!1),0===t.strm.avail_out)?1:2})(o,e):o.strategy===ot?((t,e)=>{let n,i,o,r;const s=t.window;for(;;){if(t.lookahead<=ut){if(Tt(t),t.lookahead<=ut&&e===G)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(o=t.strstart-1,i=s[o],i===s[++o]&&i===s[++o]&&i===s[++o])){r=t.strstart+ut;do{}while(i===s[++o]&&i===s[++o]&&i===s[++o]&&i===s[++o]&&i===s[++o]&&i===s[++o]&&i===s[++o]&&i===s[++o]&&o<r);t.match_length=ut-(r-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=H(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=H(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(yt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(yt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(yt(t,!1),0===t.strm.avail_out)?1:2})(o,e):Lt[o.level].func(o,e);if(3!==n&&4!==n||(o.status=ft),1===n||3===n)return 0===t.avail_out&&(o.last_flush=-1),J;if(2===n&&(e===K?W(o):e!==q&&(j(o,0,0,!1),e===X&&(vt(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),gt(t),0===t.avail_out))return o.last_flush=-1,J}return e!==V?J:o.wrap<=0?Y:(2===o.wrap?(bt(o,255&t.adler),bt(o,t.adler>>8&255),bt(o,t.adler>>16&255),bt(o,t.adler>>24&255),bt(o,255&t.total_in),bt(o,t.total_in>>8&255),bt(o,t.total_in>>16&255),bt(o,t.total_in>>24&255)):(wt(o,t.adler>>>16),wt(o,65535&t.adler)),gt(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?J:Y)},Ot=t=>{if(!t||!t.state)return $;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==ct&&e!==dt&&e!==ft?pt(t,$):(t.state=null,e===dt?pt(t,Q):J)},Rt=(t,e)=>{let n=e.length;if(!t||!t.state)return $;const i=t.state,o=i.wrap;if(2===o||1===o&&42!==i.status||i.lookahead)return $;if(1===o&&(t.adler=C(t.adler,e,n,0)),i.wrap=0,n>=i.w_size){0===o&&(vt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(n-i.w_size,n),0),e=t,n=i.w_size}const r=t.avail_in,s=t.next_in,a=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,Tt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=mt(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,Tt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=s,t.input=a,t.avail_in=r,i.wrap=o,J};const Ft=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Dt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)Ft(n,e)&&(t[e]=n[e])}}return t},Zt=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,i=0,o=t.length;e<o;e++){let o=t[e];n.set(o,i),i+=o.length}return n};let jt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){jt=!1}const Ut=new Uint8Array(256);for(let t=0;t<256;t++)Ut[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ut[254]=Ut[254]=1;var Ht=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,i,o,r,s=t.length,a=0;for(o=0;o<s;o++)n=t.charCodeAt(o),55296==(64512&n)&&o+1<s&&(i=t.charCodeAt(o+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),o++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),r=0,o=0;r<a;o++)n=t.charCodeAt(o),55296==(64512&n)&&o+1<s&&(i=t.charCodeAt(o+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),o++)),n<128?e[r++]=n:n<2048?(e[r++]=192|n>>>6,e[r++]=128|63&n):n<65536?(e[r++]=224|n>>>12,e[r++]=128|n>>>6&63,e[r++]=128|63&n):(e[r++]=240|n>>>18,e[r++]=128|n>>>12&63,e[r++]=128|n>>>6&63,e[r++]=128|63&n);return e},Wt=(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,o;const r=new Array(2*n);for(o=0,i=0;i<n;){let e=t[i++];if(e<128){r[o++]=e;continue}let s=Ut[e];if(s>4)r[o++]=65533,i+=s-1;else{for(e&=2===s?31:3===s?15:7;s>1&&i<n;)e=e<<6|63&t[i++],s--;s>1?r[o++]=65533:e<65536?r[o++]=e:(e-=65536,r[o++]=55296|e>>10&1023,r[o++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&jt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n})(r,o)},Gt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+Ut[t[n]]>e?n:e},Kt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Xt=Object.prototype.toString,{Z_NO_FLUSH:Vt,Z_SYNC_FLUSH:qt,Z_FULL_FLUSH:Jt,Z_FINISH:Yt,Z_OK:$t,Z_STREAM_END:Qt,Z_DEFAULT_COMPRESSION:te,Z_DEFAULT_STRATEGY:ee,Z_DEFLATED:ne}=D;function ie(t){this.options=Dt({level:te,method:ne,chunkSize:16384,windowBits:15,memLevel:8,strategy:ee},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kt,this.strm.avail_out=0;let n=Nt(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==$t)throw new Error(F[n]);if(e.header&&Bt(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Ht(e.dictionary):"[object ArrayBuffer]"===Xt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Rt(this.strm,t),n!==$t)throw new Error(F[n]);this._dict_set=!0}}function oe(t,e){const n=new ie(e);if(n.push(t,!0),n.err)throw n.msg||F[n.err];return n.result}ie.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize;let o,r;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Yt:Vt,"string"==typeof t?n.input=Ht(t):"[object ArrayBuffer]"===Xt.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(r===qt||r===Jt)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(o=Ct(n,r),o===Qt)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=Ot(this.strm),this.onEnd(o),this.ended=!0,o===$t;if(0!==n.avail_out){if(r>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ie.prototype.onData=function(t){this.chunks.push(t)},ie.prototype.onEnd=function(t){t===$t&&(this.result=Zt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var re={Deflate:ie,deflate:oe,deflateRaw:function(t,e){return(e=e||{}).raw=!0,oe(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,oe(t,e)},constants:D},se=function(t,e){let n,i,o,r,s,a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x,E,T,k;const S=t.state;n=t.next_in,T=t.input,i=n+(t.avail_in-5),o=t.next_out,k=t.output,r=o-(e-t.avail_out),s=o+(t.avail_out-257),a=S.dmax,l=S.wsize,u=S.whave,h=S.wnext,c=S.window,d=S.hold,f=S.bits,p=S.lencode,_=S.distcode,v=(1<<S.lenbits)-1,m=(1<<S.distbits)-1;t:do{f<15&&(d+=T[n++]<<f,f+=8,d+=T[n++]<<f,f+=8),g=p[d&v];e:for(;;){if(y=g>>>24,d>>>=y,f-=y,y=g>>>16&255,0===y)k[o++]=65535&g;else{if(!(16&y)){if(0==(64&y)){g=p[(65535&g)+(d&(1<<y)-1)];continue e}if(32&y){S.mode=12;break t}t.msg="invalid literal/length code",S.mode=30;break t}b=65535&g,y&=15,y&&(f<y&&(d+=T[n++]<<f,f+=8),b+=d&(1<<y)-1,d>>>=y,f-=y),f<15&&(d+=T[n++]<<f,f+=8,d+=T[n++]<<f,f+=8),g=_[d&m];n:for(;;){if(y=g>>>24,d>>>=y,f-=y,y=g>>>16&255,!(16&y)){if(0==(64&y)){g=_[(65535&g)+(d&(1<<y)-1)];continue n}t.msg="invalid distance code",S.mode=30;break t}if(w=65535&g,y&=15,f<y&&(d+=T[n++]<<f,f+=8,f<y&&(d+=T[n++]<<f,f+=8)),w+=d&(1<<y)-1,w>a){t.msg="invalid distance too far back",S.mode=30;break t}if(d>>>=y,f-=y,y=o-r,w>y){if(y=w-y,y>u&&S.sane){t.msg="invalid distance too far back",S.mode=30;break t}if(x=0,E=c,0===h){if(x+=l-y,y<b){b-=y;do{k[o++]=c[x++]}while(--y);x=o-w,E=k}}else if(h<y){if(x+=l+h-y,y-=h,y<b){b-=y;do{k[o++]=c[x++]}while(--y);if(x=0,h<b){y=h,b-=y;do{k[o++]=c[x++]}while(--y);x=o-w,E=k}}}else if(x+=h-y,y<b){b-=y;do{k[o++]=c[x++]}while(--y);x=o-w,E=k}for(;b>2;)k[o++]=E[x++],k[o++]=E[x++],k[o++]=E[x++],b-=3;b&&(k[o++]=E[x++],b>1&&(k[o++]=E[x++]))}else{x=o-w;do{k[o++]=k[x++],k[o++]=k[x++],k[o++]=k[x++],b-=3}while(b>2);b&&(k[o++]=k[x++],b>1&&(k[o++]=k[x++]))}break}}break}}while(n<i&&o<s);b=f>>3,n-=b,f-=b<<3,d&=(1<<f)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<s?s-o+257:257-(o-s),S.hold=d,S.bits=f};const ae=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),le=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ue=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),he=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ce=(t,e,n,i,o,r,s,a)=>{const l=a.bits;let u,h,c,d,f,p,_=0,v=0,m=0,g=0,y=0,b=0,w=0,x=0,E=0,T=0,k=null,S=0;const P=new Uint16Array(16),L=new Uint16Array(16);let A,I,M,z=null,N=0;for(_=0;_<=15;_++)P[_]=0;for(v=0;v<i;v++)P[e[n+v]]++;for(y=l,g=15;g>=1&&0===P[g];g--);if(y>g&&(y=g),0===g)return o[r++]=20971520,o[r++]=20971520,a.bits=1,0;for(m=1;m<g&&0===P[m];m++);for(y<m&&(y=m),x=1,_=1;_<=15;_++)if(x<<=1,x-=P[_],x<0)return-1;if(x>0&&(0===t||1!==g))return-1;for(L[1]=0,_=1;_<15;_++)L[_+1]=L[_]+P[_];for(v=0;v<i;v++)0!==e[n+v]&&(s[L[e[n+v]]++]=v);if(0===t?(k=z=s,p=19):1===t?(k=ae,S-=257,z=le,N-=257,p=256):(k=ue,z=he,p=-1),T=0,v=0,_=m,f=r,b=y,w=0,c=-1,E=1<<y,d=E-1,1===t&&E>852||2===t&&E>592)return 1;for(;;){A=_-w,s[v]<p?(I=0,M=s[v]):s[v]>p?(I=z[N+s[v]],M=k[S+s[v]]):(I=96,M=0),u=1<<_-w,h=1<<b,m=h;do{h-=u,o[f+(T>>w)+h]=A<<24|I<<16|M|0}while(0!==h);for(u=1<<_-1;T&u;)u>>=1;if(0!==u?(T&=u-1,T+=u):T=0,v++,0==--P[_]){if(_===g)break;_=e[n+s[v]]}if(_>y&&(T&d)!==c){for(0===w&&(w=y),f+=m,b=_-w,x=1<<b;b+w<g&&(x-=P[b+w],!(x<=0));)b++,x<<=1;if(E+=1<<b,1===t&&E>852||2===t&&E>592)return 1;c=T&d,o[c]=y<<24|b<<16|f-r|0}}return 0!==T&&(o[f+T]=_-w<<24|64<<16|0),a.bits=y,0};const{Z_FINISH:de,Z_BLOCK:fe,Z_TREES:pe,Z_OK:_e,Z_STREAM_END:ve,Z_NEED_DICT:me,Z_STREAM_ERROR:ge,Z_DATA_ERROR:ye,Z_MEM_ERROR:be,Z_BUF_ERROR:we,Z_DEFLATED:xe}=D,Ee=12,Te=30,ke=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Se(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Pe=t=>{if(!t||!t.state)return ge;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,_e},Le=t=>{if(!t||!t.state)return ge;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Pe(t)},Ae=(t,e)=>{let n;if(!t||!t.state)return ge;const i=t.state;return e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?ge:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,Le(t))},Ie=(t,e)=>{if(!t)return ge;const n=new Se;t.state=n,n.window=null;const i=Ae(t,e);return i!==_e&&(t.state=null),i};let Me,ze,Ne=!0;const Be=t=>{if(Ne){Me=new Int32Array(512),ze=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ce(1,t.lens,0,288,Me,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ce(2,t.lens,0,32,ze,0,t.work,{bits:5}),Ne=!1}t.lencode=Me,t.lenbits=9,t.distcode=ze,t.distbits=5},Ce=(t,e,n,i)=>{let o;const r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),i>=r.wsize?(r.window.set(e.subarray(n-r.wsize,n),0),r.wnext=0,r.whave=r.wsize):(o=r.wsize-r.wnext,o>i&&(o=i),r.window.set(e.subarray(n-i,n-i+o),r.wnext),(i-=o)?(r.window.set(e.subarray(n-i,n),0),r.wnext=i,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0};var Oe=Le,Re=Ie,Fe=(t,e)=>{let n,i,o,r,s,a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x,E,T=0;const k=new Uint8Array(4);let S,P;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return ge;n=t.state,n.mode===Ee&&(n.mode=13),s=t.next_out,o=t.output,l=t.avail_out,r=t.next_in,i=t.input,a=t.avail_in,u=n.hold,h=n.bits,c=a,d=l,E=_e;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;h<16;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}if(2&n.wrap&&35615===u){n.check=0,k[0]=255&u,k[1]=u>>>8&255,n.check=R(n.check,k,2,0),u=0,h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Te;break}if((15&u)!==xe){t.msg="unknown compression method",n.mode=Te;break}if(u>>>=4,h-=4,x=8+(15&u),0===n.wbits)n.wbits=x;else if(x>n.wbits){t.msg="invalid window size",n.mode=Te;break}n.dmax=1<<n.wbits,t.adler=n.check=1,n.mode=512&u?10:Ee,u=0,h=0;break;case 2:for(;h<16;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}if(n.flags=u,(255&n.flags)!==xe){t.msg="unknown compression method",n.mode=Te;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Te;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,n.check=R(n.check,k,2,0)),u=0,h=0,n.mode=3;case 3:for(;h<32;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}n.head&&(n.head.time=u),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,k[2]=u>>>16&255,k[3]=u>>>24&255,n.check=R(n.check,k,4,0)),u=0,h=0,n.mode=4;case 4:for(;h<16;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,n.check=R(n.check,k,2,0)),u=0,h=0,n.mode=5;case 5:if(1024&n.flags){for(;h<16;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(k[0]=255&u,k[1]=u>>>8&255,n.check=R(n.check,k,2,0)),u=0,h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(f=n.length,f>a&&(f=a),f&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(r,r+f),x)),512&n.flags&&(n.check=R(n.check,i,f,r)),a-=f,r+=f,n.length-=f),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break t;f=0;do{x=i[r+f++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&f<a);if(512&n.flags&&(n.check=R(n.check,i,f,r)),a-=f,r+=f,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break t;f=0;do{x=i[r+f++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&f<a);if(512&n.flags&&(n.check=R(n.check,i,f,r)),a-=f,r+=f,x)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;h<16;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}if(u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Te;break}u=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Ee;break;case 10:for(;h<32;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}t.adler=n.check=ke(u),u=0,h=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=a,n.hold=u,n.bits=h,me;t.adler=n.check=1,n.mode=Ee;case Ee:if(e===fe||e===pe)break t;case 13:if(n.last){u>>>=7&h,h-=7&h,n.mode=27;break}for(;h<3;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}switch(n.last=1&u,u>>>=1,h-=1,3&u){case 0:n.mode=14;break;case 1:if(Be(n),n.mode=20,e===pe){u>>>=2,h-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=Te}u>>>=2,h-=2;break;case 14:for(u>>>=7&h,h-=7&h;h<32;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Te;break}if(n.length=65535&u,u=0,h=0,n.mode=15,e===pe)break t;case 15:n.mode=16;case 16:if(f=n.length,f){if(f>a&&(f=a),f>l&&(f=l),0===f)break t;o.set(i.subarray(r,r+f),s),a-=f,r+=f,l-=f,s+=f,n.length-=f;break}n.mode=Ee;break;case 17:for(;h<14;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}if(n.nlen=257+(31&u),u>>>=5,h-=5,n.ndist=1+(31&u),u>>>=5,h-=5,n.ncode=4+(15&u),u>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Te;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;h<3;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}n.lens[L[n.have++]]=7&u,u>>>=3,h-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},E=ce(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,E){t.msg="invalid code lengths set",n.mode=Te;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;T=n.lencode[u&(1<<n.lenbits)-1],v=T>>>24,m=T>>>16&255,g=65535&T,!(v<=h);){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}if(g<16)u>>>=v,h-=v,n.lens[n.have++]=g;else{if(16===g){for(P=v+2;h<P;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}if(u>>>=v,h-=v,0===n.have){t.msg="invalid bit length repeat",n.mode=Te;break}x=n.lens[n.have-1],f=3+(3&u),u>>>=2,h-=2}else if(17===g){for(P=v+3;h<P;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}u>>>=v,h-=v,x=0,f=3+(7&u),u>>>=3,h-=3}else{for(P=v+7;h<P;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}u>>>=v,h-=v,x=0,f=11+(127&u),u>>>=7,h-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Te;break}for(;f--;)n.lens[n.have++]=x}}if(n.mode===Te)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Te;break}if(n.lenbits=9,S={bits:n.lenbits},E=ce(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,E){t.msg="invalid literal/lengths set",n.mode=Te;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},E=ce(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,E){t.msg="invalid distances set",n.mode=Te;break}if(n.mode=20,e===pe)break t;case 20:n.mode=21;case 21:if(a>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=a,n.hold=u,n.bits=h,se(t,d),s=t.next_out,o=t.output,l=t.avail_out,r=t.next_in,i=t.input,a=t.avail_in,u=n.hold,h=n.bits,n.mode===Ee&&(n.back=-1);break}for(n.back=0;T=n.lencode[u&(1<<n.lenbits)-1],v=T>>>24,m=T>>>16&255,g=65535&T,!(v<=h);){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}if(m&&0==(240&m)){for(y=v,b=m,w=g;T=n.lencode[w+((u&(1<<y+b)-1)>>y)],v=T>>>24,m=T>>>16&255,g=65535&T,!(y+v<=h);){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}u>>>=y,h-=y,n.back+=y}if(u>>>=v,h-=v,n.back+=v,n.length=g,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=Ee;break}if(64&m){t.msg="invalid literal/length code",n.mode=Te;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(P=n.extra;h<P;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;T=n.distcode[u&(1<<n.distbits)-1],v=T>>>24,m=T>>>16&255,g=65535&T,!(v<=h);){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}if(0==(240&m)){for(y=v,b=m,w=g;T=n.distcode[w+((u&(1<<y+b)-1)>>y)],v=T>>>24,m=T>>>16&255,g=65535&T,!(y+v<=h);){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}u>>>=y,h-=y,n.back+=y}if(u>>>=v,h-=v,n.back+=v,64&m){t.msg="invalid distance code",n.mode=Te;break}n.offset=g,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(P=n.extra;h<P;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Te;break}n.mode=25;case 25:if(0===l)break t;if(f=d-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Te;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),_=n.window}else _=o,p=s-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{o[s++]=_[p++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;o[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;h<32;){if(0===a)break t;a--,u|=i[r++]<<h,h+=8}if(d-=l,t.total_out+=d,n.total+=d,d&&(t.adler=n.check=n.flags?R(n.check,o,d,s-d):C(n.check,o,d,s-d)),d=l,(n.flags?u:ke(u))!==n.check){t.msg="incorrect data check",n.mode=Te;break}u=0,h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;h<32;){if(0===a)break t;a--,u+=i[r++]<<h,h+=8}if(u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Te;break}u=0,h=0}n.mode=29;case 29:E=ve;break t;case Te:E=ye;break t;case 31:return be;default:return ge}return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=a,n.hold=u,n.bits=h,(n.wsize||d!==t.avail_out&&n.mode<Te&&(n.mode<27||e!==de))&&Ce(t,t.output,t.next_out,d-t.avail_out),c-=t.avail_in,d-=t.avail_out,t.total_in+=c,t.total_out+=d,n.total+=d,n.wrap&&d&&(t.adler=n.check=n.flags?R(n.check,o,d,t.next_out-d):C(n.check,o,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Ee?128:0)+(20===n.mode||15===n.mode?256:0),(0===c&&0===d||e===de)&&E===_e&&(E=we),E},De=t=>{if(!t||!t.state)return ge;let e=t.state;return e.window&&(e.window=null),t.state=null,_e},Ze=(t,e)=>{if(!t||!t.state)return ge;const n=t.state;return 0==(2&n.wrap)?ge:(n.head=e,e.done=!1,_e)},je=(t,e)=>{const n=e.length;let i,o,r;return t&&t.state?(i=t.state,0!==i.wrap&&11!==i.mode?ge:11===i.mode&&(o=1,o=C(o,e,n,0),o!==i.check)?ye:(r=Ce(t,e,n,n),r?(i.mode=31,be):(i.havedict=1,_e))):ge},Ue=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const He=Object.prototype.toString,{Z_NO_FLUSH:We,Z_FINISH:Ge,Z_OK:Ke,Z_STREAM_END:Xe,Z_NEED_DICT:Ve,Z_STREAM_ERROR:qe,Z_DATA_ERROR:Je,Z_MEM_ERROR:Ye}=D;function $e(t){this.options=Dt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kt,this.strm.avail_out=0;let n=Re(this.strm,e.windowBits);if(n!==Ke)throw new Error(F[n]);if(this.header=new Ue,Ze(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Ht(e.dictionary):"[object ArrayBuffer]"===He.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=je(this.strm,e.dictionary),n!==Ke)))throw new Error(F[n])}function Qe(t,e){const n=new $e(e);if(n.push(t),n.err)throw n.msg||F[n.err];return n.result}$e.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize,o=this.options.dictionary;let r,s,a;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Ge:We,"[object ArrayBuffer]"===He.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),r=Fe(n,s),r===Ve&&o&&(r=je(n,o),r===Ke?r=Fe(n,s):r===Je&&(r=Ve));n.avail_in>0&&r===Xe&&n.state.wrap>0&&0!==t[n.next_in];)Oe(n),r=Fe(n,s);switch(r){case qe:case Je:case Ve:case Ye:return this.onEnd(r),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||r===Xe))if("string"===this.options.to){let t=Gt(n.output,n.next_out),e=n.next_out-t,o=Wt(n.output,t);n.next_out=e,n.avail_out=i-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(o)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(r!==Ke||0!==a){if(r===Xe)return r=De(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},$e.prototype.onData=function(t){this.chunks.push(t)},$e.prototype.onEnd=function(t){t===Ke&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Zt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var tn={Inflate:$e,inflate:Qe,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Qe(t,e)},ungzip:Qe,constants:D};const{Deflate:en,deflate:nn,deflateRaw:on,gzip:rn}=re,{Inflate:sn,inflate:an,inflateRaw:ln,ungzip:un}=tn;var hn=n(568),cn=n.n(hn),dn="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;var fn,pn,_n=Math.PI/180;function vn(t){return t*_n}function mn(){var t=new dn(3);return dn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function gn(t,e,n){var i=e[0],o=e[1],r=e[2],s=n[3]*i+n[7]*o+n[11]*r+n[15];return s=s||1,t[0]=(n[0]*i+n[4]*o+n[8]*r+n[12])/s,t[1]=(n[1]*i+n[5]*o+n[9]*r+n[13])/s,t[2]=(n[2]*i+n[6]*o+n[10]*r+n[14])/s,t}function yn(){var t=new dn(16);return dn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function bn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wn(t,e,n){var i,o,r,s,a,l,u,h,c,d,f,p,_=n[0],v=n[1],m=n[2];return e===t?(t[12]=e[0]*_+e[4]*v+e[8]*m+e[12],t[13]=e[1]*_+e[5]*v+e[9]*m+e[13],t[14]=e[2]*_+e[6]*v+e[10]*m+e[14],t[15]=e[3]*_+e[7]*v+e[11]*m+e[15]):(i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],c=e[8],d=e[9],f=e[10],p=e[11],t[0]=i,t[1]=o,t[2]=r,t[3]=s,t[4]=a,t[5]=l,t[6]=u,t[7]=h,t[8]=c,t[9]=d,t[10]=f,t[11]=p,t[12]=i*_+a*v+c*m+e[12],t[13]=o*_+l*v+d*m+e[13],t[14]=r*_+u*v+f*m+e[14],t[15]=s*_+h*v+p*m+e[15]),t}function xn(t,e,n){var i=n[0],o=n[1],r=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function En(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[4],s=e[5],a=e[6],l=e[7],u=e[8],h=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*o+u*i,t[5]=s*o+h*i,t[6]=a*o+c*i,t[7]=l*o+d*i,t[8]=u*o-r*i,t[9]=h*o-s*i,t[10]=c*o-a*i,t[11]=d*o-l*i,t}function Tn(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[0],s=e[1],a=e[2],l=e[3],u=e[8],h=e[9],c=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o-u*i,t[1]=s*o-h*i,t[2]=a*o-c*i,t[3]=l*o-d*i,t[8]=r*i+u*o,t[9]=s*i+h*o,t[10]=a*i+c*o,t[11]=l*i+d*o,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),mn(),(pn=fn||(fn={})).UP="up",pn.DOWN="down",pn.NORTH="north",pn.EAST="east",pn.SOUTH="south",pn.WEST="west";const kn={[fn.UP]:[0,1,0],[fn.DOWN]:[0,-1,0],[fn.NORTH]:[0,0,-1],[fn.EAST]:[1,0,0],[fn.SOUTH]:[0,0,1],[fn.WEST]:[-1,0,0]};var Sn,Pn,Ln,An,In;function Mn(t,e,n){if(!t[e])throw new Error(`Missing ${e} tag`);if(t[e].type!==n)throw new Error(`Expected ${e} to be of type ${n}, but found ${t[e].type}`);return t[e].value}!function(t){t.ALL=[t.UP,t.DOWN,t.NORTH,t.EAST,t.SOUTH,t.WEST],t.normal=function(t){return kn[t]}}(fn||(fn={})),function(t){t.create=function(t,e,n){return[t,e,n]},t.offset=function(t,e,n,i){return[t[0]+e,t[1]+n,t[2]+i]},t.towards=function(e,n){return t.offset(e,...fn.normal(n))}}(Sn||(Sn={})),function(t){function e(t){return"object"==typeof t&&null!==t?t:void 0}t.readNumber=function(t){return"number"==typeof t?t:void 0},t.readInt=function(t){return"number"==typeof t?Math.floor(t):void 0},t.readString=function(t){return"string"==typeof t?t:void 0},t.readBoolean=function(t){return"boolean"==typeof t?t:void 0},t.readObject=e,t.readArray=function(t,e){if(Array.isArray(t))return t.map((t=>e(t)))},t.readMap=function(t,n){var i;const o=null!==(i=e(t))&&void 0!==i?i:{};return Object.fromEntries(Object.entries(o).map((([t,e])=>[t,n(e)])))},t.compose=function(t,e,n){const i=e(t);return i?n(i):void 0}}(Pn||(Pn={}));class zn{constructor(t,e={}){this.name=t,this.properties=e}getName(){return this.name}getProperties(){return this.properties}getProperty(t){return this.properties[t]}isFluid(){return"minecraft:water"===this.name||"minecraft:lava"===this.name}equals(t){return this.name===t.name&&Object.keys(this.properties).every((e=>t.properties[e]===this.properties[e]))}toString(){return 0===Object.keys(this.properties).length?this.name:`${this.name}[${Object.entries(this.properties).map((([t,e])=>t+"="+e)).join(",")}]`}static fromNbt(t){const e=Mn(t.value,"Name","string"),n=function(t,e){try{return t()}catch(t){return e}}((()=>Mn(t.value,"Properties","compound")),{}),i=Object.keys(n).reduce(((t,e)=>Object.assign(Object.assign({},t),{[e]:Mn(n,e,"string")})),{});return new zn(e,i)}static fromJson(t){var e,n;const i=null!==(e=Pn.readObject(t))&&void 0!==e?e:{},o=null!==(n=Pn.readString(i.Name))&&void 0!==n?n:"minecraft:stone",r=Pn.readMap(i.Properties,(t=>{var e;return null!==(e=Pn.readString(t))&&void 0!==e?e:""}));return new zn(o,r)}}zn.AIR=new zn("minecraft:air");class Nn{constructor(t){this.minY=t,this.storage=Array(Nn.SIZE),this.palette=[zn.AIR]}get minBlockY(){return this.minY<<4}index(t,e,n){return(t<<8)+(e<<4)+n}getBlockState(t,e,n){var i;const o=this.storage[this.index(t,e,n)];return null!==(i=this.palette[o])&&void 0!==i?i:zn.AIR}setBlockState(t,e,n,i){let o=this.palette.findIndex((t=>t.equals(i)));-1===o&&(o=this.palette.length,this.palette.push(i)),this.storage[this.index(t,e,n)]=o}}function Bn(t){return t*t}function Cn(t,e,n){return Math.max(e,Math.min(n,t))}function On(t,e,n){return e+t*(n-e)}function Rn(t,e,n,i,o,r){return On(e,On(t,n,i),On(t,o,r))}function Fn(t){return t*t*t*(t*(6*t-15)+10)}function Dn(t,e,n){let i=e-t;for(;i>0;){const e=Math.floor(i/2),o=t+e;n(o)?i=e:(t=o+1,i-=e+1)}return t}Nn.WIDTH=16,Nn.SIZE=Nn.WIDTH*Nn.WIDTH*Nn.WIDTH,function(t){t.create=function(t,e){return[t,e]},t.fromBlockPos=function(t){return[t[0]>>4,t[2]>>4]},t.fromLong=function(t){return[4294967295&Number(t),Number(t>>BigInt(32))]},t.minBlockX=function(t){return t[0]<<4},t.minBlockZ=function(t){return t[1]<<4},t.maxBlockX=function(t){return t[0]<<19},t.maxBlockZ=function(t){return t[1]<<19}}(Ln||(Ln={}));class Zn{constructor(t){this.seed=BigInt(0),this.setSeed(t)}fork(){return new Zn(this.nextLong())}setSeed(t){this.seed=t^Zn.MULTIPLIER&Zn.MODULUS_MASK}advance(){this.seed=this.seed*Zn.MULTIPLIER+Zn.INCREMENT&Zn.MODULUS_MASK}consume(t){for(let e=0;e<t;e+=1)this.advance()}next(t){this.advance();const e=Number(this.seed>>BigInt(Zn.MODULUS_BITS-t));return e>2147483647?e-4294967296:e}nextInt(t){if(void 0===t)return this.next(32);if(0==(t&t-1))return Number(BigInt(t)*BigInt(this.next(31))>>BigInt(31));let e,n;for(;(e=this.next(31))-(n=e%t)+(t-1)<0;);return n}nextLong(){return(BigInt(this.next(32))<<BigInt(32))+BigInt(this.next(32))}nextFloat(){return this.next(24)*Zn.FLOAT_MULTIPLIER}nextDouble(){const t=this.next(30);return this.advance(),t*Zn.DOUBLE_MULTIPLIER}}Zn.MODULUS_BITS=48,Zn.MODULUS_MASK=BigInt("281474976710655"),Zn.MULTIPLIER=BigInt("25214903917"),Zn.INCREMENT=BigInt("11"),Zn.FLOAT_MULTIPLIER=1/Math.pow(2,24),Zn.DOUBLE_MULTIPLIER=1/Math.pow(2,30);class jn{constructor(t){this.seed=[BigInt(0),BigInt(0)],this.seed=t}static create(t){return new jn(jn.upgradeSeedTo128bit(t))}static mixStafford13(t){return((t=((t=(t^t>>BigInt(30))*BigInt("-4658895280553007687")&BigInt("0xFFFFFFFFFFFFFFFF"))^t>>BigInt(27))*BigInt("-7723592293110705685")&BigInt("0xFFFFFFFFFFFFFFFF"))^t>>BigInt(31))&BigInt("0xFFFFFFFFFFFFFFFF")}static upgradeSeedTo128bit(t){t<0&&(t+=BigInt("0x10000000000000000"));const e=t^jn.SILVER_RATIO_64,n=e+jn.GOLDEN_RATIO_64&BigInt("0xFFFFFFFFFFFFFFFF");return[jn.mixStafford13(e),jn.mixStafford13(n)]}static rotateLeft(t,e){return t<<e&BigInt("0xFFFFFFFFFFFFFFFF")|t>>BigInt(64)-e}setSeed(t){this.seed=jn.upgradeSeedTo128bit(t)}fork(){return new jn([this.next(),this.next()])}static getSeed(t,e,n){let i=t*BigInt(3129871)^n*BigInt(116129781)^e;return i=i*i*BigInt(42317861)+i*BigInt(11),i>>BigInt(16)}forkAt(t,e,n){const i=jn.getSeed(t,e,n)^this.seed[0];return new jn([i,this.seed[1]])}static LongfromBytes(t,e,n,i,o,r,s,a){return BigInt(t)<<BigInt(56)|BigInt(e)<<BigInt(48)|BigInt(n)<<BigInt(40)|BigInt(i)<<BigInt(32)|BigInt(o)<<BigInt(24)|BigInt(r)<<BigInt(16)|BigInt(s)<<BigInt(8)|BigInt(a)}forkWithHashOf(t){const e=cn()(t,{asBytes:!0}),n=jn.LongfromBytes(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),i=jn.LongfromBytes(e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]);return new jn([n^this.seed[0],i^this.seed[1]])}next(){const t=this.seed[0];let e=this.seed[1];const n=jn.rotateLeft(t+e&BigInt("0xFFFFFFFFFFFFFFFF"),BigInt(17))+t&BigInt("0xFFFFFFFFFFFFFFFF");return e^=t,this.seed=[jn.rotateLeft(t,BigInt(49))^e^e<<BigInt(21)&BigInt("0xFFFFFFFFFFFFFFFF"),jn.rotateLeft(e,BigInt(28))],n}nextLong(){let t=this.next();return t>BigInt("0x8000000000000000")&&(t-=BigInt("0x10000000000000000")),t}consume(t){let e=this.seed[0],n=this.seed[1];for(let i=0;i<t;i+=1)n^=e,e=jn.rotateLeft(e,BigInt(49))^n^n<<BigInt(21),n=jn.rotateLeft(n,BigInt(28));this.seed=[e,n]}nextBits(t){return this.next()>>BigInt(64-t)}nextInt(t){var e=this.next()&BigInt(4294967295);if(t){const s=BigInt(t);var n=e*s,i=n&BigInt(4294967295);if(i<s)for(var o=((~s&BigInt(4294967295))+BigInt(1))%s;i<o;)i=(n=(e=this.next()&BigInt(4294967295))*s)&BigInt(4294967295);var r=n>>BigInt(32);return Number(r)}var s=Number(e);return s>=2147483648&&(s-=4294967296),s}nextFloat(){return Number(this.nextBits(24))*jn.FLOAT_MULTIPLIER}nextDouble(){return Number(this.nextBits(53))*jn.DOUBLE_MULTIPLIER}parityConfigString(){return"seedLo: "+this.seed[0]+", seedHi: "+this.seed[1]}}jn.SILVER_RATIO_64=BigInt("7640891576956012809"),jn.GOLDEN_RATIO_64=BigInt("-7046029254386353131"),jn.FLOAT_MULTIPLIER=1/Math.pow(2,24),jn.DOUBLE_MULTIPLIER=11102230246251565e-32;class Un{constructor(t){this.xo=256*t.nextDouble(),this.yo=256*t.nextDouble(),this.zo=256*t.nextDouble(),this.p=Array(256);for(let t=0;t<256;t+=1)this.p[t]=t;for(let e=0;e<256;e+=1){const n=t.nextInt(256-e),i=this.p[e];this.p[e]=this.p[e+n],this.p[e+n]=i}}sample2D(t,e){let n,i,o;const r=(t+e)*Un.F2,s=Math.floor(t+r),a=t-(s-(n=(s+(i=Math.floor(e+r)))*Un.G2));let l,u;a>(o=e-(i-n))?(l=1,u=0):(l=0,u=1);const h=a-l+Un.G2,c=o-u+Un.G2,d=a-1+2*Un.G2,f=o-1+2*Un.G2,p=255&s,_=255&i,v=this.P(p+this.P(_))%12,m=this.P(p+l+this.P(_+u))%12,g=this.P(p+1+this.P(_+1))%12;return 70*(this.getCornerNoise3D(v,a,o,0,.5)+this.getCornerNoise3D(m,h,c,0,.5)+this.getCornerNoise3D(g,d,f,0,.5))}sample(t,e,n){const i=.3333333333333333*(t+e+n),o=Math.floor(t+i),r=Math.floor(e+i),s=Math.floor(n+i),a=.16666666666666666*(o+r+s),l=t-(o-a),u=e-(r-a),h=n-(s-a);let c,d,f,p,_,v;l>=u?u>=h?(c=1,d=0,f=0,p=1,_=1,v=0):l>=h?(c=1,d=0,f=0,p=1,_=0,v=1):(c=0,d=0,f=1,p=1,_=0,v=1):u<h?(c=0,d=0,f=1,p=0,_=1,v=1):l<h?(c=0,d=1,f=0,p=0,_=1,v=1):(c=0,d=1,f=0,p=1,_=1,v=0);const m=l-c+.16666666666666666,g=u-d+.16666666666666666,y=h-f+.16666666666666666,b=l-p+.3333333333333333,w=u-_+.3333333333333333,x=h-v+.3333333333333333,E=l-.5,T=u-.5,k=h-.5,S=255&o,P=255&r,L=255&s,A=this.P(S+this.P(P+this.P(L)))%12,I=this.P(S+c+this.P(P+d+this.P(L+f)))%12,M=this.P(S+p+this.P(P+_+this.P(L+v)))%12,z=this.P(S+1+this.P(P+1+this.P(L+1)))%12;return 32*(this.getCornerNoise3D(A,l,u,h,.6)+this.getCornerNoise3D(I,m,g,y,.6)+this.getCornerNoise3D(M,b,w,x,.6)+this.getCornerNoise3D(z,E,T,k,.6))}P(t){return this.p[255&t]}getCornerNoise3D(t,e,n,i,o){let r,s=o-e*e-n*n-i*i;return s<0?r=0:(s*=s,r=s*s*Un.gradDot(t,e,n,i)),r}static gradDot(t,e,n,i){const o=Un.GRADIENT[15&t];return o[0]*e+o[1]*n+o[2]*i}}Un.GRADIENT=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1],[1,1,0],[0,-1,1],[-1,1,0],[0,-1,-1]],Un.F2=.5*(Math.sqrt(3)-1),Un.G2=(3-Math.sqrt(3))/6;class Hn{constructor(t){this.xo=256*t.nextDouble(),this.yo=256*t.nextDouble(),this.zo=256*t.nextDouble(),this.p=Array(256);for(let t=0;t<256;t+=1)this.p[t]=t>127?t-256:t;for(let e=0;e<256;e+=1){const n=t.nextInt(256-e),i=this.p[e];this.p[e]=this.p[e+n],this.p[e+n]=i}}sample(t,e,n,i=0,o=0){const r=t+this.xo,s=e+this.yo,a=n+this.zo,l=Math.floor(r),u=Math.floor(s),h=Math.floor(a),c=r-l,d=s-u,f=a-h;let p=0;if(0!==i){const t=o>=0&&o<d?o:d;p=Math.floor(t/i+1e-7)*i}return this.sampleAndLerp(l,u,h,c,d-p,f,d)}sampleAndLerp(t,e,n,i,o,r,s){const a=this.P(t),l=this.P(t+1),u=this.P(a+e),h=this.P(a+e+1),c=this.P(l+e),d=this.P(l+e+1),f=Un.gradDot(this.P(u+n),i,o,r),p=Un.gradDot(this.P(c+n),i-1,o,r),_=Un.gradDot(this.P(h+n),i,o-1,r),v=Un.gradDot(this.P(d+n),i-1,o-1,r),m=Un.gradDot(this.P(u+n+1),i,o,r-1),g=Un.gradDot(this.P(c+n+1),i-1,o,r-1),y=Un.gradDot(this.P(h+n+1),i,o-1,r-1),b=Un.gradDot(this.P(d+n+1),i-1,o-1,r-1);return function(t,e,n,i,o,r,s,a,l,u,h){return On(n,Rn(t,e,i,o,r,s),Rn(t,e,a,l,u,h))}(Fn(i),Fn(s),Fn(r),f,p,_,v,m,g,y,b)}P(t){return 255&this.p[255&t]}}class Wn{constructor(t,e,n){if(t instanceof jn){const i=t.fork();this.noiseLevels=Array(n.length);for(let t=0;t<n.length;t++)if(0!==n[t]){const n=e+t;this.noiseLevels[t]=new Hn(i.forkWithHashOf("octave_"+n))}}else{if(1-e<n.length)throw new Error("Positive octaves are not allowed when using LegacyRandom");this.noiseLevels=Array(n.length);for(let i=-e;i>=0;i-=1)i<n.length&&0!==n[i]?this.noiseLevels[i]=new Hn(t):t.consume(262)}this.amplitudes=n,this.lowestFreqInputFactor=Math.pow(2,e),this.lowestFreqValueFactor=Math.pow(2,n.length-1)/(Math.pow(2,n.length)-1)}sample(t,e,n,i=0,o=0,r=!1){let s=0,a=this.lowestFreqInputFactor,l=this.lowestFreqValueFactor;for(let u=0;u<this.noiseLevels.length;u+=1){const h=this.noiseLevels[u];h&&(s+=this.amplitudes[u]*l*h.sample(Wn.wrap(t*a),r?-h.yo:Wn.wrap(e*a),Wn.wrap(n*a),i*a,o*a)),a*=2,l/=2}return s}getOctaveNoise(t){return this.noiseLevels[this.noiseLevels.length-1-t]}static wrap(t){return t-33554432*Math.floor(t/33554432+.5)}}!function(t){t.fromJson=function(t){var e,n,i,o,r;const s=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{xzScale:null!==(n=Pn.readNumber(s.xz_scale))&&void 0!==n?n:1,yScale:null!==(i=Pn.readNumber(s.y_scale))&&void 0!==i?i:1,xzFactor:null!==(o=Pn.readNumber(s.xz_factor))&&void 0!==o?o:80,yFactor:null!==(r=Pn.readNumber(s.y_factor))&&void 0!==r?r:80}}}(An||(An={}));class Gn{constructor(t,{firstOctave:e,amplitudes:n}){this.first=new Wn(t,e,n),this.second=new Wn(t,e,n);let i=1/0,o=-1/0;for(let t=0;t<n.length;t+=1)0!==n[t]&&(i=Math.min(i,t),o=Math.max(o,t));const r=.1*(1+1/(o-i+1));this.valueFactor=1/6/r}sample(t,e,n){const i=t*Gn.INPUT_FACTOR,o=e*Gn.INPUT_FACTOR,r=n*Gn.INPUT_FACTOR;return(this.first.sample(t,e,n)+this.second.sample(i,o,r))*this.valueFactor}}Gn.INPUT_FACTOR=1.0181268882175227,function(t){t.fromJson=function(t){var e,n,i;const o=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{firstOctave:null!==(n=Pn.readInt(o.firstOctave))&&void 0!==n?n:0,amplitudes:null!==(i=Pn.readArray(o.amplitudes,(t=>{var e;return null!==(e=Pn.readNumber(t))&&void 0!==e?e:0})))&&void 0!==i?i:[]}}}(In||(In={}));class Kn{constructor(t,e,n=[],i=[],o=[]){this.name=t,this.coordinate=e,this.locations=n,this.values=i,this.derivatives=o}apply(t){const e=this.coordinate(t),n=Dn(0,this.locations.length,(t=>e<this.locations[t]))-1,i=this.locations.length-1;if(n<0)return this.values[0](t)+this.derivatives[0]*(e-this.locations[0]);if(n===i)return this.values[i](t)+this.derivatives[i]*(e-this.locations[i]);const o=this.locations[n],r=this.locations[n+1],s=this.derivatives[n],a=this.derivatives[n+1],l=(e-o)/(r-o),u=this.values[n](t),h=this.values[n+1](t),c=s*(r-o)-(h-u),d=-a*(r-o)+(h-u);return On(l,u,h)+l*(1-l)*On(l,c,d)}addPoint(t,e,n=0){return this.locations.push(t),this.values.push("number"==typeof e?()=>e:e.apply.bind(e)),this.derivatives.push(n),this}}const Xn=t=>[(t>>16&255)/256,(t>>8&255)/256,(255&t)/256],Vn=[124/256,189/256,107/256],qn=Xn(6396257),Jn=Xn(8431445),Yn=Xn(4764952),$n=Xn(4159204),Qn=Xn(8431445),ti=Xn(2129968),ei=t=>[t/8,1-t/32,64*t],ni={large_fern:()=>Vn,tall_grass:()=>Vn,grass_block:()=>Vn,fern:()=>Vn,grass:()=>Vn,potted_fern:()=>Vn,spruce_leaves:()=>qn,birch_leaves:()=>Jn,oak_leaves:()=>Yn,jungle_leaves:()=>Yn,acacia_leaves:()=>Yn,dark_oak_leaves:()=>Yn,vine:()=>Yn,water:()=>$n,bubble_column:()=>$n,cauldron:()=>$n,redstone_wire:t=>{var e;return(t=>{const e=t/15;return[.6*e+(e>0?.4:.3),Cn(e*e*.7-.5,0,1),Cn(e*e*.6-.7,0,1)]})(parseInt(null!==(e=t.power)&&void 0!==e?e:"0"))},sugar_cane:()=>Vn,attached_melon_stem:()=>Qn,attached_pumpkin_stem:()=>Qn,melon_stem:t=>{var e;return ei(parseInt(null!==(e=t.age)&&void 0!==e?e:"0"))},pumpkin_stem:t=>{var e;return ei(parseInt(null!==(e=t.age)&&void 0!==e?e:"0"))},lily_pad:()=>ti};var ii;function oi(...t){let e=0;for(const n of t)e+=n.length;const n=new Float32Array(e);let i=0;for(const e of t)n.set(e,i),i+=e.length;return n}function ri(t,e){const n=mn();for(let i=0;i<t.length;i+=3)n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],gn(n,n,e),t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2]}!function(t){t.rotate=function(t,e,n){let{up:i,down:o,north:r,east:s,south:a,west:l}=t;switch(n){case 90:[r,s,a,l]=[s,a,l,r];break;case 180:[r,s,a,l]=[a,l,r,s];break;case 270:[r,s,a,l]=[l,r,s,a]}switch(e){case 90:[i,r,o,a]=[r,o,a,i];break;case 180:[i,r,o,a]=[o,a,i,r];break;case 270:[i,r,o,a]=[a,i,r,o]}return{up:i,down:o,north:r,east:s,south:a,west:l}}}(ii||(ii={}));class si{constructor(t,e,n){this.id=t,this.variants=e,this.multipart=n,this.variants=e}getModelVariants(t){if(this.variants){const e=Object.keys(this.variants).filter((e=>this.matchesVariant(e,t)));if(0===e.length)return[];const n=this.variants[e[0]];return[Array.isArray(n)?n[0]:n]}return this.multipart?this.multipart.filter((e=>!e.when||this.matchesCase(e.when,t))).map((t=>Array.isArray(t.apply)?t.apply[0]:t.apply)):[]}getBuffers(t,e,n,i,o,r){var s,a,l,u;const h=this.getModelVariants(e),c=[],d=[],f=[],p=[];for(const _ of h){const h=ii.rotate(r,null!==(s=_.x)&&void 0!==s?s:0,null!==(a=_.y)&&void 0!==a?a:0),v=i.getBlockModel(_.model).getBuffers(t,e,n,o,h);if(_.x||_.y){const t=yn();bn(t),wn(t,t,[8,8,8]),Tn(t,t,-vn(null!==(l=_.y)&&void 0!==l?l:0)),En(t,t,-vn(null!==(u=_.x)&&void 0!==u?u:0)),wn(t,t,[-8,-8,-8]),ri(v.position,t)}c.push(v.position),d.push(...v.texCoord),f.push(...v.tintColor),p.push(...v.index),o+=v.texCoord.length/2}const _=yn();bn(_),xn(_,_,[.0625,.0625,.0625]);const v=oi(...c);return ri(v,_),{position:v,texCoord:d,tintColor:f,index:p}}matchesVariant(t,e){return t.split(",").every((t=>{const[n,i]=t.split("=");return e[n]===i}))}matchesCase(t,e){if(Array.isArray(t.OR))return t.OR.some((t=>this.matchesCase(t,e)));const n=t;return Object.keys(n).every((t=>n[t].split("|").includes(e[t])))}static fromJson(t,e){return new si(t,e.variants,e.multipart)}}const ai={0:[0,3,2,3,2,1,0,1],90:[2,3,2,1,0,1,0,3],180:[2,1,0,1,0,3,2,3],270:[0,1,0,3,2,3,2,1]},li={x:[1,0,0],y:[0,1,0],z:[0,0,1]},ui=1.41421356237,hi={x:[1,ui,ui],y:[ui,1,ui],z:[ui,ui,1]};class ci{constructor(t,e,n,i){this.id=t,this.parent=e,this.textures=n,this.elements=i,this.flattened=!1}getBuffers(t,e,n,i,o){var r;const s=[],a=[],l=[],u=[];for(const h of null!==(r=this.elements)&&void 0!==r?r:[]){const r=this.getElementBuffers(t,e,h,i,n,o);s.push(r.position),a.push(...r.texCoord),l.push(...r.tintColor),u.push(...r.index),i+=r.texCoord.length/2}return{position:oi(...s),texCoord:a,tintColor:l,index:u}}getElementBuffers(t,e,n,i,o,r){var s,a,l,u,h,c,d,f,p,_,v,m;const g=n.from[0],y=n.from[1],b=n.from[2],w=n.to[0],x=n.to[1],E=n.to[2],T=[],k=[],S=[],P=[],L=(n,r,s)=>{var a,l,u,h,c,d,f,p,_,v,m,g;const[y,b,w,x]=o.getTextureUV(this.getTexture(n.texture)),E=(w-y)/16,L=(x-b)/16,A=E/16,I=L/16;r[0]=(null!==(l=null===(a=n.uv)||void 0===a?void 0:a[0])&&void 0!==l?l:r[0])*E+A,r[1]=(null!==(h=null===(u=n.uv)||void 0===u?void 0:u[1])&&void 0!==h?h:r[1])*L+I,r[2]=(null!==(d=null===(c=n.uv)||void 0===c?void 0:c[2])&&void 0!==d?d:r[2])*E-A,r[3]=(null!==(p=null===(f=n.uv)||void 0===f?void 0:f[3])&&void 0!==p?p:r[3])*L-I;const M=ai[null!==(_=n.rotation)&&void 0!==_?_:0];k.push(y+r[M[0]],b+r[M[1]],y+r[M[2]],b+r[M[3]],y+r[M[4]],b+r[M[5]],y+r[M[6]],b+r[M[7]]);const z=(null!==(v=n.tintindex)&&void 0!==v?v:-1)>=0&&null!==(g=null===(m=ni[t.slice(10)])||void 0===m?void 0:m.call(ni,e))&&void 0!==g?g:[1,1,1];S.push(...z,...z,...z,...z),T.push(...s),P.push(i,i+1,i+2,i,i+2,i+3),i+=4};!(null===(a=null===(s=n.faces)||void 0===s?void 0:s.up)||void 0===a?void 0:a.texture)||n.faces.up.cullface&&r[n.faces.up.cullface]||L(n.faces.up,[g,16-E,w,16-b],[g,x,E,w,x,E,w,x,b,g,x,b]),!(null===(u=null===(l=n.faces)||void 0===l?void 0:l.down)||void 0===u?void 0:u.texture)||n.faces.down.cullface&&r[n.faces.down.cullface]||L(n.faces.down,[16-E,16-w,16-b,16-g],[g,y,b,w,y,b,w,y,E,g,y,E]),!(null===(c=null===(h=n.faces)||void 0===h?void 0:h.south)||void 0===c?void 0:c.texture)||n.faces.south.cullface&&r[n.faces.south.cullface]||L(n.faces.south,[g,16-x,w,16-y],[g,y,E,w,y,E,w,x,E,g,x,E]),!(null===(f=null===(d=n.faces)||void 0===d?void 0:d.north)||void 0===f?void 0:f.texture)||n.faces.north.cullface&&r[n.faces.north.cullface]||L(n.faces.north,[16-w,16-x,16-g,16-y],[w,y,b,g,y,b,g,x,b,w,x,b]),!(null===(_=null===(p=n.faces)||void 0===p?void 0:p.east)||void 0===_?void 0:_.texture)||n.faces.east.cullface&&r[n.faces.east.cullface]||L(n.faces.east,[16-E,16-x,16-b,16-y],[w,y,E,w,y,b,w,x,b,w,x,E]),!(null===(m=null===(v=n.faces)||void 0===v?void 0:v.west)||void 0===m?void 0:m.texture)||n.faces.west.cullface&&r[n.faces.west.cullface]||L(n.faces.west,[b,16-x,E,16-y],[g,y,b,g,y,E,g,x,E,g,x,b]);const A=yn();if(bn(A),n.rotation){const t=function(t,e,n){var i=new dn(3);return i[0]=t,i[1]=e,i[2]=n,i}(...n.rotation.origin);wn(A,A,t),function(t,e,n,i){var o,r,s,a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x,E,T,k,S,P,L=i[0],A=i[1],I=i[2],M=Math.hypot(L,A,I);M<1e-6||(L*=M=1/M,A*=M,I*=M,o=Math.sin(n),s=1-(r=Math.cos(n)),a=e[0],l=e[1],u=e[2],h=e[3],c=e[4],d=e[5],f=e[6],p=e[7],_=e[8],v=e[9],m=e[10],g=e[11],y=L*L*s+r,b=A*L*s+I*o,w=I*L*s-A*o,x=L*A*s-I*o,E=A*A*s+r,T=I*A*s+L*o,k=L*I*s+A*o,S=A*I*s-L*o,P=I*I*s+r,t[0]=a*y+c*b+_*w,t[1]=l*y+d*b+v*w,t[2]=u*y+f*b+m*w,t[3]=h*y+p*b+g*w,t[4]=a*x+c*E+_*T,t[5]=l*x+d*E+v*T,t[6]=u*x+f*E+m*T,t[7]=h*x+p*E+g*T,t[8]=a*k+c*S+_*P,t[9]=l*k+d*S+v*P,t[10]=u*k+f*S+m*P,t[11]=h*k+p*S+g*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(A,A,vn(n.rotation.angle),li[n.rotation.axis]),n.rotation.rescale&&xn(A,A,hi[n.rotation.axis]),function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2]}(t,t),wn(A,A,t)}const I=new Float32Array(T);return ri(I,A),{position:I,texCoord:k,tintColor:S,index:P}}getTexture(t){for(var e,n;t.startsWith("#");)t=null!==(n=null===(e=this.textures)||void 0===e?void 0:e[t.slice(1)])&&void 0!==n?n:"";return t.startsWith("minecraft:")||(t="minecraft:"+t),t}flatten(t){var e;if(!this.flattened&&this.parent){const n=t.getBlockModel(this.parent);if(!n)return console.warn(`parent ${this.parent} does not exist!`),void(this.flattened=!0);n.flatten(t),this.elements||(this.elements=n.elements),this.textures||(this.textures={}),Object.keys(null!==(e=n.textures)&&void 0!==e?e:{}).forEach((t=>{this.textures[t]||(this.textures[t]=n.textures[t])})),this.flattened=!0}}static fromJson(t,e){let n=e.parent;return n&&!n.startsWith("minecraft:")&&(n="minecraft:"+n),new ci(t,n,e.textures,e.elements)}}function di(t,e,n,i,o){const r=new si("",{"":{model:""}},void 0),s={getBlockModel:()=>o};return o.flatten(s),r.getBuffers(t,{},e,s,n,i)}function fi(t,e,n,i,o,r){const s=o.up?16:[14.2,12.5,10.5,9,7,5.3,3.7,1.9,16,16,16,16,16,16,16,16][n];return di(`minecraft:${t}`,i,e,o,new ci("","",{still:`minecraft:block/${t}_still`,flow:`minecraft:block/${t}_flow`},[{from:[0,0,0],to:[16,s,16],faces:{up:{texture:"#still",tintindex:r,cullface:fn.UP},down:{texture:"#still",tintindex:r,cullface:fn.DOWN},north:{texture:"#flow",tintindex:r,cullface:fn.NORTH},east:{texture:"#flow",tintindex:r,cullface:fn.EAST},south:{texture:"#flow",tintindex:r,cullface:fn.SOUTH},west:{texture:"#flow",tintindex:r,cullface:fn.WEST}}}]))}const pi={"minecraft:water":(t,e,n,i)=>fi("water",t,parseInt(e.level),n,i,0),"minecraft:lava":(t,e,n,i)=>fi("lava",t,parseInt(e.level),n,i),"minecraft:chest":(t,e,n)=>function(t,e,n,i){return di("minecraft:chest",i,t,{},new ci("","",{0:"minecraft:block/chest"},[{from:[1,0,1],to:[15,14,15],faces:{up:{texture:"#0"},down:{texture:"#0"},north:{texture:"#0"},east:{texture:"#0"},south:{texture:"#0"},west:{texture:"#0"}}}]))}(t,e.facing,e.type,n)};var _i,vi,mi,gi,yi,bi,wi,xi,Ei;new Set(Object.keys(pi)),function(t){function e(t,e){return"number"==typeof t?new n(t,null!=e?e:t):t}t.target=function(t,e,n,i,r,s){return new o(t,e,n,i,r,s)},t.parameters=function(t,n,o,r,s,a,l){return new i(e(t),e(n),e(o),e(r),e(s),e(a),l)},t.param=e;class n{constructor(t,e){this.min=t,this.max=e}distance(t){const e=("number"==typeof t?t:t.min)-this.max,n=this.min-("number"==typeof t?t:t.max);return e>0?e:Math.max(n,0)}union(t){return new n(Math.min(this.min,t.min),Math.max(this.max,t.max))}static fromJson(t){var e;if("number"==typeof t)return new n(t,t);const[i,o]=null!==(e=Pn.readArray(t,(t=>Pn.readNumber(t))))&&void 0!==e?e:[];return new n(null!=i?i:0,null!=o?o:0)}}t.Param=n;class i{constructor(t,e,n,i,o,r,s){this.temperature=t,this.humidity=e,this.continentalness=n,this.erosion=i,this.depth=o,this.weirdness=r,this.offset=s}fittness(t){return Bn(this.temperature.distance(t.temperature))+Bn(this.humidity.distance(t.humidity))+Bn(this.continentalness.distance(t.continentalness))+Bn(this.erosion.distance(t.erosion))+Bn(this.depth.distance(t.depth))+Bn(this.weirdness.distance(t.weirdness))+Bn(this.offset-t.offset)}space(){return[this.temperature,this.humidity,this.continentalness,this.erosion,this.depth,this.weirdness,new n(this.offset,this.offset)]}static fromJson(t){var e,o;const r=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return new i(n.fromJson(r.temperature),n.fromJson(r.humidity),n.fromJson(r.continentalness),n.fromJson(r.erosion),n.fromJson(r.depth),n.fromJson(r.weirdness),null!==(o=Pn.readInt(r.offset))&&void 0!==o?o:0)}}t.ParamPoint=i;class o{constructor(t,e,n,i,o,r){this.temperature=t,this.humidity=e,this.continentalness=n,this.erosion=i,this.depth=o,this.weirdness=r}get offset(){return 0}toArray(){return[this.temperature,this.humidity,this.continentalness,this.erosion,this.depth,this.weirdness,this.offset]}}t.TargetPoint=o,t.Parameters=class{constructor(t){this.things=t,this.index=new r(t)}find(t){return this.index.search(t,((t,e)=>t.distance(e)))}};class r{constructor(t){this.root=r.build(t.map((([t,e])=>new l(t,e))))}static build(t){if(1===t.length)return t[0];if(t.length<=r.CHILDREN_PER_NODE){const e=t.map((t=>{let e=0;for(let n=0;n<7;n+=1){const i=t.space[n];e+=Math.abs((i.min+i.max)/2)}return{key:e,node:t}})).sort(((t,e)=>t.key-e.key)).map((({node:t})=>t));return new a(e)}let e=1/0,n=-1,i=[];for(let o=0;o<7;++o){t=r.sort(t,o,!1),i=r.bucketize(t);let s=0;for(const t of i)s+=r.area(t.space);e>s&&(e=s,n=o)}return t=r.sort(t,n,!1),i=r.bucketize(t),i=r.sort(i,n,!0),new a(i.map((t=>r.build(t.children))))}static sort(t,e,n){return t.map((t=>{const i=t.space[e],o=(i.min+i.max)/2;return{key:n?Math.abs(o):o,node:t}})).sort(((t,e)=>t.key-e.key)).map((({node:t})=>t))}static bucketize(t){const e=[];let n=[];const i=Math.pow(10,Math.floor(Math.log(t.length-.01)/Math.log(10)));for(const o of t)n.push(o),n.length<i||(e.push(new a(n)),n=[]);return 0!==n.length&&e.push(new a(n)),e}static area(t){let e=0;for(const n of t)e+=Math.abs(n.max-n.min);return e}search(t,e){return this.root.search(t.toArray(),e).thing()}}r.CHILDREN_PER_NODE=10,t.RTree=r;class s{constructor(t){this.space=t}distance(t){let e=0;for(let n=0;n<7;n+=1)e+=Bn(this.space[n].distance(t[n]));return e}}t.RNode=s;class a extends s{constructor(t){super(a.buildSpace(t)),this.children=t}static buildSpace(t){let e=[...Array(7)].map((()=>new n(1/0,-1/0)));for(const n of t)e=[...Array(7)].map(((t,i)=>e[i].union(n.space[i])));return e}search(t,e){let n=1/0,i=null;for(const o of this.children){const r=e(o,t);if(n<=r)continue;const s=o.search(t,e),a=o==s?r:e(s,t);n<=a||(n=a,i=s)}return i}}t.RSubTree=a;class l extends s{constructor(t,e){super(t.space()),this.thing=e}search(){return this}}t.RLeaf=l}(_i||(_i={}));class Ti{constructor(t,e,n){this.offsetSampler=t,this.factorSampler=e,this.jaggednessSampler=n}static fromJson(t){var e;const n=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return new Ti(this.splineFromJson(n.offset),this.splineFromJson(n.factor),this.splineFromJson(n.offset))}static splineFromJson(t){var e,n,i,o,r;if("number"==typeof t)return()=>t;const s=null!==(e=Pn.readObject(t))&&void 0!==e?e:{},a=null!==(n=Pn.readString(s.coordinate))&&void 0!==n?n:"continents",l=new Kn(a,(t=>t[a])),u=null!==(i=Pn.readArray(s.points,(t=>{var e;return null!==(e=Pn.readObject(t))&&void 0!==e?e:{}})))&&void 0!==i?i:[];if(0===u.length)return()=>0;for(const t of u){const e=null!==(o=Pn.readNumber(t.location))&&void 0!==o?o:0,n=this.splineFromJson(t.value),i=null!==(r=Pn.readNumber(t.derivative))&&void 0!==r?r:0;l.addPoint(e,n,i)}return l}offset(t){return this.offsetSampler.apply(t)+Ti.GLOBAL_OFFSET}factor(t){return this.factorSampler.apply(t)}jaggedness(t){return this.jaggednessSampler.apply(t)}static point(t,e,n){return{continents:t,erosion:e,weirdness:n,ridges:this.peaksAndValleys(n)}}static peaksAndValleys(t){return 3*-(Math.abs(Math.abs(t)-.6666667)-.33333334)}static overworld(){const t=this.buildErosionOffsetSpline("beachSpline",-.05,0,0,.1,0,-.03,!1,!1),e=this.buildErosionOffsetSpline("lowSpline",-.1,.03,.1,.1,.01,-.03,!1,!1),n=this.buildErosionOffsetSpline("midSpline",-.1,.03,.1,.7,.01,-.03,!0,!0),i=this.buildErosionOffsetSpline("highSpline",.3,.03,.1,1,.01,.01,!0,!0),o=new Kn("Offset",(t=>t.continents)).addPoint(-1.1,.044).addPoint(-1.02,-.2222).addPoint(-.51,-.2222).addPoint(-.44,-.12).addPoint(-.18,-.12).addPoint(-.16,t).addPoint(-.15,t).addPoint(-.1,e).addPoint(.25,n).addPoint(1,i),r=new Kn("Factor",(t=>t.continents)).addPoint(-.19,3.95).addPoint(-.15,this.getErosionFactor("erosionCoast",6.25,!0)).addPoint(-.1,this.getErosionFactor("erosionInland",5.47,!0)).addPoint(.03,this.getErosionFactor("erosionMidInland",5.08,!0)).addPoint(.06,this.getErosionFactor("erosionFarInland",4.69,!1)),s=new Kn("Jaggedness",(t=>t.continents)).addPoint(.11,0).addPoint(.03,this.buildErosionJaggednessSpline(1,.5,0,0)).addPoint(.65,this.buildErosionJaggednessSpline(1,1,1,0));return new Ti(o,r,s)}static getErosionFactor(t,e,n){const i=new Kn("weirdness",(t=>t.weirdness)).addPoint(-.2,6.3).addPoint(.2,e),o=new Kn(t,(t=>t.erosion)).addPoint(-.6,i).addPoint(-.5,new Kn("weirdness",(t=>t.weirdness)).addPoint(-.05,6.3).addPoint(.05,2.67)).addPoint(-.35,i).addPoint(-.25,i).addPoint(-.1,new Kn("weirdness",(t=>t.weirdness)).addPoint(-.05,2.67).addPoint(.05,6.3)).addPoint(.03,i);if(n){const t=new Kn("weirdnessShattered",(t=>t.weirdness)).addPoint(0,e).addPoint(.1,.625),n=new Kn("ridgesShattered",(t=>t.ridges)).addPoint(-.9,e).addPoint(-.69,t);o.addPoint(.35,e).addPoint(.45,n).addPoint(.55,n).addPoint(.62,e)}else{const t=new Kn("ridges",(t=>t.ridges)).addPoint(-.7,i).addPoint(-.15,1.37),n=new Kn("ridges",(t=>t.ridges)).addPoint(.45,i).addPoint(.7,1.56);o.addPoint(.05,n).addPoint(.4,n).addPoint(.45,t).addPoint(.55,t).addPoint(.58,e)}return o}static buildErosionOffsetSpline(t,e,n,i,o,r,s,a,l){const u=this.buildMountainRidgeSplineWithPoints(On(o,.6,1.5),l),h=this.buildMountainRidgeSplineWithPoints(On(o,.6,1),l),c=this.buildMountainRidgeSplineWithPoints(o,l),d=this.ridgeSpline(t+"-widePlateau",e-.15,.5*o,On(.5,.5,.5)*o,.5*o,.6*o,.5),f=this.ridgeSpline(t+"-narrowPlateau",e,r*o,n*o,.5*o,.6*o,.5),p=this.ridgeSpline(t+"-plains",e,r,r,n,i,.5),_=this.ridgeSpline(t+"-plainsFarInland",e,r,r,n,i,.5),v=new Kn(t,(t=>t.ridges)).addPoint(-1,e).addPoint(-.4,p).addPoint(0,i+.07),m=this.ridgeSpline(t+"-swamps",-.02,s,s,n,i,0),g=new Kn(t,(t=>t.erosion)).addPoint(-.85,u).addPoint(-.7,h).addPoint(-.4,c).addPoint(-.35,d).addPoint(-.1,f).addPoint(.2,p);return a&&g.addPoint(.4,_).addPoint(.45,v).addPoint(.55,v).addPoint(.58,_),g.addPoint(.7,m),g}static buildMountainRidgeSplineWithPoints(t,e){const n=new Kn(`M-spline for continentalness: ${t} ${e}`,(t=>t.ridges)),i=this.mountainContinentalness(-1,t,-.7),o=this.mountainContinentalness(1,t,-.7),r=this.calculateMountainRidgeZeroContinentalnessPoint(t);if(-.65<r&&r<1){const e=this.mountainContinentalness(-.65,t,-.7),s=this.mountainContinentalness(-.75,t,-.7),a=this.calculateSlope(i,s,-1,-.75);n.addPoint(-1,i,a),n.addPoint(-.75,s),n.addPoint(-.65,e);const l=this.mountainContinentalness(r,t,-.7),u=this.calculateSlope(l,o,r,1);n.addPoint(r-.01,l),n.addPoint(r,l,u),n.addPoint(1,o,u)}else{const t=this.calculateSlope(i,o,-1,1);e?(n.addPoint(-1,Math.max(.2,i)),n.addPoint(0,On(.5,i,o),t)):n.addPoint(-1,i,t),n.addPoint(1,o,t)}return n}static mountainContinentalness(t,e,n){const i=.46082947*(t+1.17)*(1-.5*(1-e))-.5*(1-e);return t<n?Math.max(i,-.2222):Math.max(i,0)}static calculateMountainRidgeZeroContinentalnessPoint(t){return.5*(1-t)/(.46082947*(1-.5*(1-t)))-1.17}static calculateSlope(t,e,n,i){return(e-t)/(i-n)}static ridgeSpline(t,e,n,i,o,r,s){const a=Math.max(.5*(n-e),s),l=5*(i-n);return new Kn(t,(t=>t.ridges)).addPoint(-1,e,a).addPoint(-.4,n,Math.min(a,l)).addPoint(0,i,l).addPoint(.4,o,2*(o-i)).addPoint(1,r,.7*(r-o))}static buildErosionJaggednessSpline(t,e,n,i){const o=this.buildRidgeJaggednessSpline(t,n),r=this.buildRidgeJaggednessSpline(e,i);return new Kn("Jaggedness-erosion",(t=>t.erosion)).addPoint(-1,o).addPoint(-.78,r).addPoint(-.5775,r).addPoint(-.375,0)}static buildRidgeJaggednessSpline(t,e){const n=Ti.peaksAndValleys(.4),i=(n+Ti.peaksAndValleys(.56666666))/2;return new Kn("Jaggedness-ridges",(t=>t.ridges)).addPoint(n,0).addPoint(i,e>0?this.buildWeirdnessJaggednessSpline(e):0).addPoint(1,t>0?this.buildWeirdnessJaggednessSpline(t):0)}static buildWeirdnessJaggednessSpline(t){return new Kn("Jaggedness-weirdness",(t=>t.weirdness)).addPoint(-.01,.63*t).addPoint(.01,.3*t)}}Ti.GLOBAL_OFFSET=-.50375,function(t){t.fromList=function(t){return(e,n,i,o)=>{for(const r of t){const t=r(e,n,i,o);if(t)return t}return null}}}(vi||(vi={})),function(t){t.create=function(t,e,n){return{offset:t,factor:e,jaggedness:n}}}(mi||(mi={})),function(t){t.create=function(t,e,n){const i=e+t.getOffset(e,0,n),o=n+t.getOffset(n,e,0),r=t.getContinentalness(i,o),s=t.getWeirdness(i,o),a=t.getErosion(i,o);return{shiftedX:i,shiftedZ:o,continentalness:r,weirdness:s,erosion:a,terrainInfo:t.getTerrainInfo(i<<2,o<<2,r,s,a)}}}(gi||(gi={})),function(t){t.fromJson=function(t){var e,n,i,o,r,s,a,l,u,h,c,d;const f=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{minY:null!==(n=Pn.readInt(f.min_y))&&void 0!==n?n:0,height:null!==(i=Pn.readInt(f.height))&&void 0!==i?i:256,xzSize:null!==(o=Pn.readInt(f.size_horizontal))&&void 0!==o?o:1,ySize:null!==(r=Pn.readInt(f.size_vertical))&&void 0!==r?r:1,densityFactor:null!==(s=Pn.readNumber(f.density_factor))&&void 0!==s?s:0,densityOffset:null!==(a=Pn.readNumber(f.density_offset))&&void 0!==a?a:0,sampling:An.fromJson(f.sampling),topSlide:bi.fromJson(f.top_slide),bottomSlide:bi.fromJson(f.bottom_slide),terrainShaper:Ti.fromJson(f.terrain_shaper),useSimplexSurfaceNoise:null!==(l=Pn.readBoolean(f.simplex_surface_noise))&&void 0!==l&&l,randomDensityOffset:null!==(u=Pn.readBoolean(f.random_density_offset))&&void 0!==u&&u,islandNoiseOverride:null!==(h=Pn.readBoolean(f.island_noise_override))&&void 0!==h&&h,isAmplified:null!==(c=Pn.readBoolean(f.amplified))&&void 0!==c&&c,useLegacyRandom:null!==(d=Pn.readBoolean(f.use_legacy_random))&&void 0!==d&&d}}}(yi||(yi={})),function(t){t.fromJson=function(t){var e,n,i,o;const r=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{target:null!==(n=Pn.readNumber(r.target))&&void 0!==n?n:0,size:null!==(i=Pn.readInt(r.size))&&void 0!==i?i:0,offset:null!==(o=Pn.readInt(r.offset))&&void 0!==o?o:0}},t.apply=function(t,e,n){if(t.size<=0)return e;const i=(n-t.offset)/t.size;return function(t,e,n){return n<0?t:n>1?e:On(n,t,e)}(t.target,e,i)}}(bi||(bi={})),function(t){t.fromJson=function(t){var e,n,i,o,r,s,a,l,u,h,c;const d=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{structures:xi.fromJson(d.structures),noise:yi.fromJson(d.noise),octaves:Ei.fromJson(d.octaves),defaultBlock:zn.fromJson(d.default_block),defaultFluid:zn.fromJson(d.default_fluid),bedrockRoofPosition:null!==(n=Pn.readInt(d.bedrock_roof_position))&&void 0!==n?n:0,bedrockFloorPosition:null!==(i=Pn.readInt(d.bedrock_floor_position))&&void 0!==i?i:0,seaLevel:null!==(o=Pn.readInt(d.sea_level))&&void 0!==o?o:0,disableMobGeneration:null!==(r=Pn.readBoolean(d.disable_mob_generation))&&void 0!==r&&r,aquifersEnabled:null!==(s=Pn.readBoolean(d.aquifers_enabled))&&void 0!==s&&s,noiseCavesEnabled:null!==(a=Pn.readBoolean(d.noise_caves_enabled))&&void 0!==a&&a,deepslateEnabled:null!==(l=Pn.readBoolean(d.deepslate_enabled))&&void 0!==l&&l,oreVeinsEnabled:null!==(u=Pn.readBoolean(d.ore_veins_enabled))&&void 0!==u&&u,noodleCavesEnabled:null!==(h=Pn.readBoolean(d.noodle_caves_enabled))&&void 0!==h&&h,legacyRandomSource:null!==(c=Pn.readBoolean(d.legacy_random_source))&&void 0!==c&&c}}}(wi||(wi={})),function(t){t.fromJson=function(t){var e;const n=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{stronghold:Pn.compose(n.stronghold,Pn.readObject,(t=>{var e,n,i;return{distance:null!==(e=Pn.readInt(t.distance))&&void 0!==e?e:0,spread:null!==(n=Pn.readInt(t.spread))&&void 0!==n?n:0,count:null!==(i=Pn.readInt(t.count))&&void 0!==i?i:0}})),structures:Pn.readMap(n.structures,(t=>{var e;return(t=>{var e,n,i;return{spacing:null!==(e=Pn.readInt(t.spacing))&&void 0!==e?e:0,separation:null!==(n=Pn.readInt(t.separation))&&void 0!==n?n:0,salt:null!==(i=Pn.readInt(t.salt))&&void 0!==i?i:0}})(null!==(e=Pn.readObject(t))&&void 0!==e?e:{})}))}}}(xi||(xi={})),function(t){t.fromJson=function(t){var e;const n=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{temperature:In.fromJson(n.temperature),humidity:In.fromJson(n.humidity),continentalness:In.fromJson(n.continentalness),erosion:In.fromJson(n.erosion),weirdness:In.fromJson(n.weirdness),shift:In.fromJson(n.shift)}}}(Ei||(Ei={}));var ki=n(104),Si=function(){function t(t){this.biome=t}return t.prototype.setHighlight=function(t,e){},t.prototype.draw=function(t,e,n,i,o,r,s){t.fillStyle=this.biome.color,t.fillRect(e,n,i,o)},t.prototype.getIdsFromPosition=function(t,e,n,i,o,r){return{t_idx:-1,h_idx:-1,mode:"A"}},t}(),Pi=function(){function t(t,e,n,i){void 0===i&&(i=!1),this.hidden=!1,this.type_id=3,this.allowEdit=!0,this.name=t,this.color=e,this.key=void 0!==n?n:i?t:ki("biome_"),this.allowEdit=!i,this.isVanilla=i,this.raw_color=this._hexToRgb(e)}return t.create=function(e,n,i,o,r){void 0===r&&(r=!1);var s=new t(n,i,o,r);return r?e.registerVanillaBiome(s):e.registerBiome(s),s},t.prototype.setColor=function(t){this.color=t,this.raw_color=this._hexToRgb(t)},t.prototype._hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},t.fromJSON=function(e,n){var i;if(!e.vanillaBiomes.has(n.key)){var o=new t(n.name,null!==(i=n.color)&&void 0!==i?i:"#888888",n.key,!1);return e.registerBiome(o),o}var r=e.vanillaBiomes.get(n.key);e.registerBiome(r),n.color&&(r.color=n.color)},t.prototype.toJSON=function(){var t=this,e=void 0;if(this.isVanilla){var n=Li.biomes.find((function(e){return e.key===t.getKey()})).color;this.color!==n&&(e=this.color)}else e=this.color;return{key:this.key,name:this.name,color:e}},t.prototype.lookupKey=function(t,e){return this.getKey()},t.prototype.lookup=function(t,e){return this},t.prototype.lookupRecursive=function(t,e){return this},t.prototype.lookupRecursiveWithTracking=function(t,e,n){return{slice:void 0,layout:void 0,biome:this}},t.prototype.getRenderer=function(){return void 0===this.renderer&&(this.renderer=new Si(this)),this.renderer},t.prototype.getKey=function(){return this.key},t.prototype.has=function(t,e){return t===this.getKey()},t}(),Li=function(){function t(){}return t.registerVanillaBiomes=function(e){for(var n=0,i=t.biomes;n<i.length;n++){var o=i[n];o.color||(o.color=this.colorToHex(o.r,o.g,o.b));var r=o.color;Pi.create(e,o.name,r,o.key,!0)}},t.colorToHex=function(t,e,n){return"#"+(t<<16|e<<8|n).toString(16).padStart(6,"0")},t.biomes=[{key:"minecraft:mushroom_fields",name:"minecraft:mushroom_fields",color:"#fa91f8"},{key:"minecraft:deep_frozen_ocean",name:"minecraft:deep_frozen_ocean",color:"#3478a2"},{key:"minecraft:deep_cold_ocean",name:"minecraft:deep_cold_ocean",color:"#004785"},{key:"minecraft:deep_ocean",name:"minecraft:deep_ocean",color:"#03009e"},{key:"minecraft:deep_lukewarm_ocean",name:"minecraft:deep_lukewarm_ocean",color:"#26008f"},{key:"minecraft:frozen_ocean",name:"minecraft:frozen_ocean",color:"#20afff"},{key:"minecraft:cold_ocean",name:"minecraft:cold_ocean",color:"#007bff"},{key:"minecraft:ocean",name:"minecraft:ocean",color:"#0000ff"},{key:"minecraft:warm_ocean",name:"minecraft:warm_ocean",color:"#6400ff"},{key:"minecraft:lukewarm_ocean",name:"minecraft:lukewarm_ocean",color:"#4c00ff"},{key:"minecraft:frozen_river",name:"minecraft:frozen_river",color:"#a6d4ff"},{key:"minecraft:river",name:"minecraft:river",color:"#4d82ff"},{key:"minecraft:swamp",name:"minecraft:swamp",color:"#5dbb8e"},{key:"minecraft:snowy_tundra",name:"minecraft:snowy_plains",color:"#ffffff"},{key:"minecraft:ice_spikes",name:"minecraft:ice_spikes",color:"#c8eefe"},{key:"minecraft:snowy_taiga",name:"minecraft:snowy_taiga",color:"#d1ffd3"},{key:"minecraft:plains",name:"minecraft:plains",color:"#73e43f"},{key:"minecraft:forest",name:"minecraft:forest",color:"#009903"},{key:"minecraft:taiga",name:"minecraft:taiga",color:"#457119"},{key:"minecraft:giant_spruce_taiga",name:"minecraft:old_growth_spruce_taiga",color:"#345011"},{key:"minecraft:giant_tree_taiga",name:"minecraft:old_growth_pine_taiga",color:"#444d00"},{key:"minecraft:sunflower_plains",name:"minecraft:sunflower_plains",color:"#a6ff00"},{key:"minecraft:flower_forest",name:"minecraft:flower_forest",color:"#77bc01"},{key:"minecraft:birch_forest",name:"minecraft:birch_forest",color:"#6ac65b"},{key:"minecraft:tall_birch_forest",name:"minecraft:old_growth_birch_forest",color:"#59e45a"},{key:"minecraft:dark_forest",name:"minecraft:dark_forest",color:"#017401"},{key:"minecraft:savanna",name:"minecraft:savanna",color:"#b3f23d"},{key:"minecraft:jungle",name:"minecraft:jungle",color:"#00ff00"},{key:"minecraft:eroded_badlands",name:"minecraft:eroded_badlands",color:"#b85000"},{key:"minecraft:badlands",name:"minecraft:badlands",color:"#ff6f00"},{key:"minecraft:wooded_badlands_plateau",name:"minecraft:wooded_badlands",color:"#db8b00"},{key:"minecraft:stone_shore",name:"minecraft:stony_shore",color:"#666666"},{key:"minecraft:snowy_beach",name:"minecraft:snowy_beach",color:"#d6daaa"},{key:"minecraft:beach",name:"minecraft:beach",color:"#fff98a"},{key:"minecraft:desert",name:"minecraft:desert",color:"#ffff00"},{key:"minecraft:shattered_savanna",name:"minecraft:windswept_savanna",color:"#abdb51"},{key:"minecraft:jungle_edge",name:"minecraft:sparse_jungle",color:"#80ff00"},{key:"minecraft:snowy_slopes",name:"minecraft:snowy_slopes",color:"#8acaea"},{key:"minecraft:grove",name:"minecraft:grove",color:"#afafe4"},{key:"minecraft:savanna_plateau",name:"minecraft:savanna_plateau",color:"#80ab30"},{key:"minecraft:gravelly_hills",name:"minecraft:windswept_gravelly_hills",color:"#819698"},{key:"minecraft:extreme_hills",name:"minecraft:windswept_hills",color:"#698e91"},{key:"minecraft:wooded_mountains",name:"minecraft:windswept_forest",color:"#427b5f"},{key:"minecraft:meadow",name:"minecraft:meadow",color:"#d2ff3d"},{key:"minecraft:lofty_peaks",name:"minecraft:jagged_peaks",color:"#d7acd3"},{key:"minecraft:snowcapped_peaks",name:"minecraft:frozen_peaks",color:"#dedede"},{key:"minecraft:stony_peaks",name:"minecraft:stony_peaks",color:"#adbfe1"},{key:"minecraft:bamboo_jungle",name:"minecraft:bamboo_jungle",color:"#00ff57"},{key:"minecraft:soul_sand_valley",name:"minecraft:soul_sand_valley",r:140,g:132,b:108},{key:"minecraft:nether_wastes",name:"minecraft:nether_wastes",r:163,g:62,b:62},{key:"minecraft:crimson_forest",name:"minecraft:crimson_forest",r:219,g:60,b:46},{key:"minecraft:warped_forest",name:"minecraft:warped_forest",r:68,g:171,b:171},{key:"minecraft:basalt_deltas",name:"minecraft:basalt_deltas",r:79,g:73,b:66},{key:"minecraft:the_end",name:"minecraft:the_end",r:252,g:244,b:121},{key:"minecraft:small_end_islands",name:"minecraft:small_end_islands",r:234,g:247,b:52},{key:"minecraft:end_midlands",name:"minecraft:end_midlands",r:170,g:179,b:55},{key:"minecraft:end_highlands",name:"minecraft:end_highlands",r:112,g:117,b:46},{key:"minecraft:end_barrens",name:"minecraft:end_barrens",r:199,g:204,b:137},{key:"minecraft:the_void",name:"minecraft:the_void",r:0,g:0,b:0},{key:"minecraft:lush_caves",name:"minecraft:lush_caves",r:112,g:255,b:79},{key:"minecraft:dripstone_caves",name:"minecraft:dripstone_caves",r:140,g:124,b:0}],t}(),Ai=n(486),Ii=function(){function t(){}return t.default=function(){return Ai.cloneDeep(this.defaultSetting)},t.defaultSetting={erosion:{firstOctave:-9,amplitudes:[1,1,0,1,1]},weirdness:{firstOctave:-7,amplitudes:[1,2,1,0,0,0]},shift:{firstOctave:-3,amplitudes:[1,1,1,0]},temperature:{firstOctave:-10,amplitudes:[1.5,0,1,0,0,0]},humidity:{firstOctave:-8,amplitudes:[1,1,0,0,0,0]},continentalness:{firstOctave:-9,amplitudes:[1,1,2,2,2,1,1,1,1]}},t}(),Mi=function(){function t(){}return t.offset={coordinate:"continents",points:[{location:-1.1,value:.044,derivative:0},{location:-1.02,value:-.2222,derivative:0},{location:-.51,value:-.2222,derivative:0},{location:-.44,value:-.12,derivative:0},{location:-.18,value:-.12,derivative:0},{location:-.16,value:{coordinate:"erosion",points:[{location:-.85,value:{coordinate:"ridges",points:[{location:-1,value:-.08880186,derivative:.38940096},{location:1,value:.69000006,derivative:.38940096}]},derivative:0},{location:-.7,value:{coordinate:"ridges",points:[{location:-1,value:-.115760356,derivative:.37788022},{location:1,value:.6400001,derivative:.37788022}]},derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.2222,derivative:0},{location:-.75,value:-.2222,derivative:0},{location:-.65,value:0,derivative:0},{location:.5954547,value:2.9802322e-8,derivative:0},{location:.6054547,value:2.9802322e-8,derivative:.2534563},{location:1,value:.100000024,derivative:.2534563}]},derivative:0},{location:-.35,value:{coordinate:"ridges",points:[{location:-1,value:-.3,derivative:.5},{location:-.4,value:.05,derivative:0},{location:0,value:.05,derivative:0},{location:.4,value:.05,derivative:0},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:-.1,value:{coordinate:"ridges",points:[{location:-1,value:-.15,derivative:.5},{location:-.4,value:0,derivative:0},{location:0,value:0,derivative:0},{location:.4,value:.05,derivative:.1},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:.2,value:{coordinate:"ridges",points:[{location:-1,value:-.15,derivative:.5},{location:-.4,value:0,derivative:0},{location:0,value:0,derivative:0},{location:.4,value:0,derivative:0},{location:1,value:0,derivative:0}]},derivative:0},{location:.7,value:{coordinate:"ridges",points:[{location:-1,value:-.02,derivative:0},{location:-.4,value:-.03,derivative:0},{location:0,value:-.03,derivative:0},{location:.4,value:0,derivative:.06},{location:1,value:0,derivative:0}]},derivative:0}]},derivative:0},{location:-.15,value:{coordinate:"erosion",points:[{location:-.85,value:{coordinate:"ridges",points:[{location:-1,value:-.08880186,derivative:.38940096},{location:1,value:.69000006,derivative:.38940096}]},derivative:0},{location:-.7,value:{coordinate:"ridges",points:[{location:-1,value:-.115760356,derivative:.37788022},{location:1,value:.6400001,derivative:.37788022}]},derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.2222,derivative:0},{location:-.75,value:-.2222,derivative:0},{location:-.65,value:0,derivative:0},{location:.5954547,value:2.9802322e-8,derivative:0},{location:.6054547,value:2.9802322e-8,derivative:.2534563},{location:1,value:.100000024,derivative:.2534563}]},derivative:0},{location:-.35,value:{coordinate:"ridges",points:[{location:-1,value:-.3,derivative:.5},{location:-.4,value:.05,derivative:0},{location:0,value:.05,derivative:0},{location:.4,value:.05,derivative:0},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:-.1,value:{coordinate:"ridges",points:[{location:-1,value:-.15,derivative:.5},{location:-.4,value:0,derivative:0},{location:0,value:0,derivative:0},{location:.4,value:.05,derivative:.1},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:.2,value:{coordinate:"ridges",points:[{location:-1,value:-.15,derivative:.5},{location:-.4,value:0,derivative:0},{location:0,value:0,derivative:0},{location:.4,value:0,derivative:0},{location:1,value:0,derivative:0}]},derivative:0},{location:.7,value:{coordinate:"ridges",points:[{location:-1,value:-.02,derivative:0},{location:-.4,value:-.03,derivative:0},{location:0,value:-.03,derivative:0},{location:.4,value:0,derivative:.06},{location:1,value:0,derivative:0}]},derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"erosion",points:[{location:-.85,value:{coordinate:"ridges",points:[{location:-1,value:-.08880186,derivative:.38940096},{location:1,value:.69000006,derivative:.38940096}]},derivative:0},{location:-.7,value:{coordinate:"ridges",points:[{location:-1,value:-.115760356,derivative:.37788022},{location:1,value:.6400001,derivative:.37788022}]},derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.2222,derivative:0},{location:-.75,value:-.2222,derivative:0},{location:-.65,value:0,derivative:0},{location:.5954547,value:2.9802322e-8,derivative:0},{location:.6054547,value:2.9802322e-8,derivative:.2534563},{location:1,value:.100000024,derivative:.2534563}]},derivative:0},{location:-.35,value:{coordinate:"ridges",points:[{location:-1,value:-.25,derivative:.5},{location:-.4,value:.05,derivative:0},{location:0,value:.05,derivative:0},{location:.4,value:.05,derivative:0},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:-.1,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.001,derivative:.01},{location:0,value:.003,derivative:.01},{location:.4,value:.05,derivative:.094000004},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:.2,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.7,value:{coordinate:"ridges",points:[{location:-1,value:-.02,derivative:0},{location:-.4,value:-.03,derivative:0},{location:0,value:-.03,derivative:0},{location:.4,value:.03,derivative:.12},{location:1,value:.1,derivative:.049}]},derivative:0}]},derivative:0},{location:.25,value:{coordinate:"erosion",points:[{location:-.85,value:{coordinate:"ridges",points:[{location:-1,value:.20235021,derivative:0},{location:0,value:.7161751,derivative:.5138249},{location:1,value:1.23,derivative:.5138249}]},derivative:0},{location:-.7,value:{coordinate:"ridges",points:[{location:-1,value:.2,derivative:0},{location:0,value:.44682026,derivative:.43317974},{location:1,value:.88,derivative:.43317974}]},derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:.2,derivative:0},{location:0,value:.30829495,derivative:.3917051},{location:1,value:.70000005,derivative:.3917051}]},derivative:0},{location:-.35,value:{coordinate:"ridges",points:[{location:-1,value:-.25,derivative:.5},{location:-.4,value:.35,derivative:0},{location:0,value:.35,derivative:0},{location:.4,value:.35,derivative:0},{location:1,value:.42000002,derivative:.049000014}]},derivative:0},{location:-.1,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.0069999998,derivative:.07},{location:0,value:.021,derivative:.07},{location:.4,value:.35,derivative:.658},{location:1,value:.42000002,derivative:.049000014}]},derivative:0},{location:.2,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.4,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:0,value:.17,derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:0,value:.17,derivative:0}]},derivative:0},{location:.58,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.7,value:{coordinate:"ridges",points:[{location:-1,value:-.02,derivative:0},{location:-.4,value:-.03,derivative:0},{location:0,value:-.03,derivative:0},{location:.4,value:.03,derivative:.12},{location:1,value:.1,derivative:.049}]},derivative:0}]},derivative:0},{location:1,value:{coordinate:"erosion",points:[{location:-.85,value:{coordinate:"ridges",points:[{location:-1,value:.34792626,derivative:0},{location:0,value:.9239631,derivative:.5760369},{location:1,value:1.5,derivative:.5760369}]},derivative:0},{location:-.7,value:{coordinate:"ridges",points:[{location:-1,value:.2,derivative:0},{location:0,value:.5391705,derivative:.4608295},{location:1,value:1,derivative:.4608295}]},derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:.2,derivative:0},{location:0,value:.5391705,derivative:.4608295},{location:1,value:1,derivative:.4608295}]},derivative:0},{location:-.35,value:{coordinate:"ridges",points:[{location:-1,value:-.2,derivative:.5},{location:-.4,value:.5,derivative:0},{location:0,value:.5,derivative:0},{location:.4,value:.5,derivative:0},{location:1,value:.6,derivative:.070000015}]},derivative:0},{location:-.1,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:.099999994},{location:0,value:.03,derivative:.099999994},{location:.4,value:.5,derivative:.94},{location:1,value:.6,derivative:.070000015}]},derivative:0},{location:.2,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.4,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:0,value:.17,derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:0,value:.17,derivative:0}]},derivative:0},{location:.58,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.7,value:{coordinate:"ridges",points:[{location:-1,value:-.02,derivative:.015},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0}]},derivative:0}]},t.factor={coordinate:"continents",points:[{location:-.19,value:3.95,derivative:0},{location:-.15,value:{coordinate:"erosion",points:[{location:-.6,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:6.25,derivative:0}]},derivative:0},{location:-.5,value:{coordinate:"weirdness",points:[{location:-.05,value:6.3,derivative:0},{location:.05,value:2.67,derivative:0}]},derivative:0},{location:-.35,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:6.25,derivative:0}]},derivative:0},{location:-.25,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:6.25,derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"weirdness",points:[{location:-.05,value:2.67,derivative:0},{location:.05,value:6.3,derivative:0}]},derivative:0},{location:.03,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:6.25,derivative:0}]},derivative:0},{location:.35,value:6.25,derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-.9,value:6.25,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:6.25,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-.9,value:6.25,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:6.25,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.62,value:6.25,derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"erosion",points:[{location:-.6,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.47,derivative:0}]},derivative:0},{location:-.5,value:{coordinate:"weirdness",points:[{location:-.05,value:6.3,derivative:0},{location:.05,value:2.67,derivative:0}]},derivative:0},{location:-.35,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.47,derivative:0}]},derivative:0},{location:-.25,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.47,derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"weirdness",points:[{location:-.05,value:2.67,derivative:0},{location:.05,value:6.3,derivative:0}]},derivative:0},{location:.03,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.47,derivative:0}]},derivative:0},{location:.35,value:5.47,derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-.9,value:5.47,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:5.47,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-.9,value:5.47,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:5.47,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.62,value:5.47,derivative:0}]},derivative:0},{location:.03,value:{coordinate:"erosion",points:[{location:-.6,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.08,derivative:0}]},derivative:0},{location:-.5,value:{coordinate:"weirdness",points:[{location:-.05,value:6.3,derivative:0},{location:.05,value:2.67,derivative:0}]},derivative:0},{location:-.35,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.08,derivative:0}]},derivative:0},{location:-.25,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.08,derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"weirdness",points:[{location:-.05,value:2.67,derivative:0},{location:.05,value:6.3,derivative:0}]},derivative:0},{location:.03,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.08,derivative:0}]},derivative:0},{location:.35,value:5.08,derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-.9,value:5.08,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:5.08,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-.9,value:5.08,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:5.08,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.62,value:5.08,derivative:0}]},derivative:0},{location:.06,value:{coordinate:"erosion",points:[{location:-.6,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:-.5,value:{coordinate:"weirdness",points:[{location:-.05,value:6.3,derivative:0},{location:.05,value:2.67,derivative:0}]},derivative:0},{location:-.35,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:-.25,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"weirdness",points:[{location:-.05,value:2.67,derivative:0},{location:.05,value:6.3,derivative:0}]},derivative:0},{location:.03,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:.05,value:{coordinate:"ridges",points:[{location:.45,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:.7,value:1.56,derivative:0}]},derivative:0},{location:.4,value:{coordinate:"ridges",points:[{location:.45,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:.7,value:1.56,derivative:0}]},derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-.7,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:-.15,value:1.37,derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-.7,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:-.15,value:1.37,derivative:0}]},derivative:0},{location:.58,value:4.69,derivative:0}]},derivative:0}]},t.jaggedness={coordinate:"continents",points:[{location:-.11,value:0,derivative:0},{location:.03,value:{coordinate:"erosion",points:[{location:-1,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:0,derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.63,derivative:0},{location:.01,value:.3,derivative:0}]},derivative:0}]},derivative:0},{location:-.78,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:0,derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.315,derivative:0},{location:.01,value:.15,derivative:0}]},derivative:0}]},derivative:0},{location:-.5775,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:0,derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.315,derivative:0},{location:.01,value:.15,derivative:0}]},derivative:0}]},derivative:0},{location:-.375,value:0,derivative:0}]},derivative:0},{location:.65,value:{coordinate:"erosion",points:[{location:-1,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:{coordinate:"weirdness",points:[{location:-.01,value:.63,derivative:0},{location:.01,value:.3,derivative:0}]},derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.63,derivative:0},{location:.01,value:.3,derivative:0}]},derivative:0}]},derivative:0},{location:-.78,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:0,derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.63,derivative:0},{location:.01,value:.3,derivative:0}]},derivative:0}]},derivative:0},{location:-.5775,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:0,derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.63,derivative:0},{location:.01,value:.3,derivative:0}]},derivative:0}]},derivative:0},{location:-.375,value:0,derivative:0}]},derivative:0}]},t}(),zi=function(){function t(t){var e=this;this.hoverHandle=void 0,this.builder=t,this.title=document.getElementById("layoutName"),this.canvas=document.getElementById("gridEditorCanvas"),this.splitIcon=new Path2D("M17.995,17.995C29.992,5.999,45.716,0,61.439,0s31.448,5.999,43.445,17.995c11.996,11.997,17.994,27.721,17.994,43.444 c0,15.725-5.998,31.448-17.994,43.445c-11.997,11.996-27.722,17.995-43.445,17.995s-31.448-5.999-43.444-17.995 C5.998,92.888,0,77.164,0,61.439C0,45.716,5.998,29.992,17.995,17.995L17.995,17.995z M57.656,31.182 c0-1.84,1.492-3.332,3.333-3.332s3.333,1.492,3.333,3.332v27.383h27.383c1.84,0,3.332,1.492,3.332,3.332 c0,1.841-1.492,3.333-3.332,3.333H64.321v27.383c0,1.84-1.492,3.332-3.333,3.332s-3.333-1.492-3.333-3.332V65.229H30.273 c-1.84,0-3.333-1.492-3.333-3.333c0-1.84,1.492-3.332,3.333-3.332h27.383V31.182L57.656,31.182z M61.439,6.665 c-14.018,0-28.035,5.348-38.731,16.044C12.013,33.404,6.665,47.422,6.665,61.439c0,14.018,5.348,28.036,16.043,38.731 c10.696,10.696,24.713,16.044,38.731,16.044s28.035-5.348,38.731-16.044c10.695-10.695,16.044-24.714,16.044-38.731 c0-14.017-5.349-28.035-16.044-38.73C89.475,12.013,75.457,6.665,61.439,6.665L61.439,6.665z");var n,i,o=void 0;this.canvas.onmousemove=function(t){var r=e.getMousePosition(t);if(o){var s="x"===o.handle_type?r.mouse_x-n:r.mouse_y-n,a=.9*(f=e.canvas.width),l=.9*(p=e.canvas.height);if("x"===o.handle_type){var u=s/a*2.4,h=0===o.id?-1.2:e.xs[o.id-1],c=o.id===e.xs.length-1?1.2:e.xs[o.id+1];e.xs[o.id]=e.snap(i+u,h,c,.005)}else"y"===o.handle_type&&(u=s/l*2.4,h=0===o.id?-1.2:e.ys[o.id-1],c=o.id===e.ys.length-1?1.2:e.ys[o.id+1],e.ys[o.id]=e.snap(i+u,h,c,.005));e.hoverHandle=o}else{var d=e.getHandle(r);e.hoverHandle=d,void 0===d?e.canvas.style.cursor="default":"x"===d.handle_type?e.canvas.style.cursor="ew-resize":"y"===d.handle_type?e.canvas.style.cursor="ns-resize":e.canvas.style.cursor="pointer"}if("erosion"===e.x_param&&"continentalness"===e.y_param){var f,p,_=.07*(f=e.canvas.width),v=.07*(p=e.canvas.height),m=(a=.93*f,l=.93*p,2.4*((r.mouse_x-_)/a-.5)),g=2.4*((r.mouse_y-v)/l-.5);Vl.getInstance().splineDisplayManager.setPos({c:g,e:m}),Vl.getInstance().splineDisplayManager.refresh()}e.drawRect()},this.canvas.onclick=function(n){var i=e.getMousePosition(n),o=e.getHandle(i);if(void 0!==o&&("add_x"===o.handle_type||"add_y"===o.handle_type||"edit_spline"===o.handle_type)){if("add_x"===o.handle_type)e.x_array?t.splitParam(e.x_param,o.id):(e.xs.splice(o.id+1,0,(e.xs[o.id]+e.xs[o.id+1])/2),e.builder.splines[Vl.getInstance().sidebarManager.openedElement.key].splines.forEach((function(t){return t.splice(o.id+1,0,void 0)})));else if("add_y"===o.handle_type)if(e.y_array)t.splitParam(e.y_param,o.id);else{e.ys.splice(o.id+1,0,(e.ys[o.id]+e.ys[o.id+1])/2);for(var r=[],s=0;s<e.builder.splines[Vl.getInstance().sidebarManager.openedElement.key].erosions.length;s++)r.push(void 0);e.builder.splines[Vl.getInstance().sidebarManager.openedElement.key].splines.splice(o.id+1,0,r)}e.builder.hasChanges=!0,Vl.getInstance().refresh({grids:!0,biome:{}})}},this.canvas.onmousedown=function(t){var r=e.getMousePosition(t),s=e.getHandle(r);void 0===s||"x"!==s.handle_type&&"y"!==s.handle_type||(o=s,n="x"===s.handle_type?r.mouse_x:r.mouse_y,i="x"===s.handle_type?e.xs[s.id]:e.ys[s.id])},this.canvas.onmouseup=function(t){if(o&&("x"===o.handle_type||"y"===o.handle_type)){var n="x"===o.handle_type?e.xs:e.ys,r="x"===o.handle_type?e.x_array:e.y_array,s="x"===o.handle_type?e.x_param:e.y_param,a=0===o.id?void 0:n[o.id-1],l=o.id===n.length-1?void 0:n[o.id+1];if((n[o.id]===a||n[o.id]===l)&&(n.length<=2||!confirm("Deleting Segment. This will delete this segment from every defined Layout/Slice. Continue?")))return n[o.id]=i,e.drawRect(),o=void 0,e.canvas.style.cursor="default",void Vl.getInstance().refresh({grids:!0,biome:{}});if(r)0===o.id?r[0]=new _i.Param(n[0],r[0].max):o.id<n.length-1?(r[o.id-1]=new _i.Param(r[o.id-1].min,n[o.id]),r[o.id]=new _i.Param(n[o.id],r[o.id].max)):r[o.id-1]=new _i.Param(r[o.id-1].min,n[o.id]),n[o.id]===a?(e.builder.deleteParam(s,o.id-1),Vl.getInstance().refresh({grids:!0,biome:{}})):n[o.id]===l?(e.builder.deleteParam(s,o.id),Vl.getInstance().refresh({grids:!0,biome:{}})):Vl.getInstance().refresh({grids:!0});else{if(n[o.id]===a||n[o.id]===l){var u=o.id;n.splice(u,1),e.builder.splines[Vl.getInstance().sidebarManager.openedElement.key].splines.forEach((function(t){return t.splice(u,1)}))}Vl.getInstance().refresh({spline:!0})}e.builder.hasChanges=!0,o=void 0,e.canvas.style.cursor="default"}}}return t.prototype.snap=function(t,e,n,i){return t<e+.5*i?e:t>n-.5*i?n:t<e+i?e+i:t>n-i?n-i:.005*Math.round(t/.005)},t.prototype.getHandle=function(t){for(var e=this.canvas.width,n=this.canvas.height,i=.07*e,o=.07*n,r=.93*e,s=.93*n,a=0;a<this.xs.length-1;a++)if(this.xs[a+1]-this.xs[a]>=.1){var l=(this.xs[a]+this.xs[a+1])/2;if(t.mouse_x>(l/2.4+.5)*r+i-27.5&&t.mouse_y>o-60&&t.mouse_x<(l/2.4+.5)*r+i+27.5&&t.mouse_y<o-5)return{handle_type:"add_x",id:a}}for(var u=0;u<this.ys.length-1;u++)if(this.ys[u+1]-this.ys[u]>=.1){var h=(this.ys[u]+this.ys[u+1])/2;if(t.mouse_x>i-60&&t.mouse_y>(h/2.4+.5)*s+o-27.5&&t.mouse_x<i-5&&t.mouse_y<(h/2.4+.5)*s+o+27.5)return{handle_type:"add_y",id:u}}for(var c=void 0,d=41,f=0;f<this.xs.length;f++)l=this.xs[f],(v=Math.abs(t.mouse_x-((l/2.4+.5)*r+i)))<40&&v<d&&(c=f,d=v);var p=void 0,_=41;for(f=0;f<this.ys.length;f++){var v;h=this.ys[f],(v=Math.abs(t.mouse_y-((h/2.4+.5)*s+o)))<40&&v<_&&(p=f,_=v)}return d<_?{handle_type:"x",id:c}:_<41?{handle_type:"y",id:p}:void 0},t.prototype.drawRect=function(){var t,e=getComputedStyle(document.body),n=e.getPropertyValue("--secondary-bg-color"),i=e.getPropertyValue("--main-text-color"),o=(e.getPropertyValue("--secondary-text-color"),this.canvas.width),r=this.canvas.height,s=.07*o,a=.07*r,l=.93*o,u=.93*r,h=this.canvas.getContext("2d");h.clearRect(0,0,o,r);var c=this.ys[0],d=this.ys[this.ys.length-1];h.fillStyle=n,h.fillRect(s,a,l,u);for(var f=0;f<this.xs.length-1;f++)if(this.xs[f+1]-this.xs[f]>=.1){var p=(this.xs[f]+this.xs[f+1])/2;h.fillStyle="#222244",h.fillRect((p/2.4+.5)*l+s-27.5,a-60,55,55),h.translate((p/2.4+.5)*l+s-14,a-47.5),h.scale(.25,.25),h.fillStyle="white",h.fill(this.splitIcon),h.resetTransform()}for(f=0;f<this.xs.length;f++)p=this.xs[f],h.strokeStyle=this.xs[f-1]===p?"red":i,h.lineWidth=this.x_array?3:2,h.setLineDash(this.x_array?[1,0]:[3,3]),h.beginPath(),h.moveTo((p/2.4+.5)*l+s,(c/2.4+.5)*u+a),h.lineTo((p/2.4+.5)*l+s,(d/2.4+.5)*u+a),h.stroke(),this.hoverHandle&&("x"===this.hoverHandle.handle_type&&this.hoverHandle.id===f||"edit_spline"===this.hoverHandle.handle_type&&this.hoverHandle.id[0]===f)&&(h.setLineDash([5,10]),h.beginPath(),h.moveTo((p/2.4+.5)*l+s,a),h.lineTo((p/2.4+.5)*l+s,(c/2.4+.5)*u+a),h.stroke(),h.fillStyle=n,h.fillRect((p/2.4+.5)*l+s-40,a-60,80,55),h.fillStyle=this.xs[f-1]===p?"red":i,h.font="25px serif",h.textAlign="center",h.textBaseline="middle",h.fillText(p.toFixed(3),(p/2.4+.5)*l+s,a-30));for(var _=this.xs[0],v=this.xs[this.xs.length-1],m=0;m<this.ys.length-1;m++)if(this.ys[m+1]-this.ys[m]>=.1){var g=(this.ys[m]+this.ys[m+1])/2;h.fillStyle="#222244",h.fillRect(s-60,(g/2.4+.5)*u+a-27.5,55,55),h.fillStyle="white",h.translate(s-47.5,(g/2.4+.5)*u+a-15),h.scale(.25,.25),h.fillStyle="white",h.fill(this.splitIcon),h.resetTransform()}for(m=0;m<this.ys.length;m++)g=this.ys[m],h.strokeStyle=this.ys[m-1]===g?"red":i,h.lineWidth=2,h.setLineDash([1,0]),h.beginPath(),h.moveTo((_/2.4+.5)*l+s,(g/2.4+.5)*u+a),h.lineTo((v/2.4+.5)*l+s,(g/2.4+.5)*u+a),h.stroke(),this.hoverHandle&&("y"===this.hoverHandle.handle_type&&this.hoverHandle.id===m||"edit_spline"===this.hoverHandle.handle_type&&this.hoverHandle.id[1]===m)&&(h.setLineDash([5,10]),h.beginPath(),h.moveTo(s,(g/2.4+.5)*u+a),h.lineTo((_/2.4+.5)*l+s,(g/2.4+.5)*u+a),h.stroke(),h.fillStyle=n,h.fillRect(s-85,(g/2.4+.5)*u+a-27.5,80,55),h.fillStyle=this.ys[m-1]===g?"red":i,h.font="25px serif",h.textAlign="center",h.textBaseline="middle",h.fillText(g.toFixed(3),s-42.5,(g/2.4+.5)*u+a));h.fillStyle=i,"layout"!==Vl.getInstance().sidebarManager.openedElement.key&&"edit_spline"===(null===(t=this.hoverHandle)||void 0===t?void 0:t.handle_type)&&(p=this.xs[this.hoverHandle.id[0]],g=this.ys[this.hoverHandle.id[1]],h.fillRect((p/2.4+.5)*l+s-10,(g/2.4+.5)*u+a-10,20,20))},t.prototype.getMousePosition=function(t){var e=this.canvas.getBoundingClientRect(),n=this.canvas.width/e.width,i=this.canvas.height/e.height;return{mouse_x:(t.clientX-e.left)*n,mouse_y:(t.clientY-e.top)*i}},t.prototype.refresh=function(){this.canvas.parentElement.classList.remove("hidden"),this.title.readOnly=!1,Vl.getInstance().splineDisplayManager.setWeirdnesses([]),"slice"===Vl.getInstance().sidebarManager.openedElement.key?(this.title.value="Slice Grid",this.x_array=this.builder.erosions,this.y_array=this.builder.continentalnesses,this.x_param="erosion",this.y_param="continentalness",this.xs=this.x_array.map((function(t){return t.max})),this.xs.unshift(this.x_array[0].min),this.ys=this.y_array.map((function(t){return t.max})),this.ys.unshift(this.y_array[0].min),Vl.getInstance().setLabels("Erosion","Continentalness")):"layout"===Vl.getInstance().sidebarManager.openedElement.key?(this.title.value="Layout Grid",this.x_array=this.builder.humidities,this.y_array=this.builder.temperatures,this.x_param="humidity",this.y_param="temperature",this.xs=this.x_array.map((function(t){return t.max})),this.xs.unshift(this.x_array[0].min),this.ys=this.y_array.map((function(t){return t.max})),this.ys.unshift(this.y_array[0].min),Vl.getInstance().setLabels("Humidity","Temperature")):"dimension"===Vl.getInstance().sidebarManager.openedElement.key?(this.title.value="Biome Grid",this.x_array=this.builder.weirdnesses,this.y_array=this.builder.depths,this.x_param="weirdness",this.y_param="depth",this.xs=this.x_array.map((function(t){return t.max})),this.xs.unshift(this.x_array[0].min),this.ys=this.y_array.map((function(t){return t.max})),this.ys.unshift(this.y_array[0].min),Vl.getInstance().setLabels("Weirdness","Depth")):(this.title.value="offset"===Vl.getInstance().sidebarManager.openedElement.key?"Offset Spline Grid":"factor"===Vl.getInstance().sidebarManager.openedElement.key?"Factor Spline Grid":"Jaggedness Spline Grid",this.xs=this.builder.splines[Vl.getInstance().sidebarManager.openedElement.key].erosions,this.ys=this.builder.splines[Vl.getInstance().sidebarManager.openedElement.key].continentalnesses,this.x_array=void 0,this.y_array=void 0,this.x_param="erosion",this.y_param="continentalness",Vl.getInstance().setLabels("Erosion","Continentalness")),this.drawRect()},t.prototype.hide=function(){this.canvas.parentElement.classList.add("hidden")},t}(),Ni=function(){function t(){}return t.prototype.setHighlight=function(t,e){},t.prototype.draw=function(t,e,n,i,o,r,s){t.fillStyle="gray",t.fillRect(e,n,i,o),t.fillStyle="white",t.font=.75*i+"px serif",t.textAlign="center",t.textBaseline="middle",t.fillText("?",e+.5*i,n+.55*o)},t}(),Bi=function(){function t(){this.allowEdit=!1,this.name="- Unassigned -",this.type_id=1e3}return t.create=function(e){return new t},t.prototype.lookupKey=function(t,e){return this.getKey()},t.prototype.lookup=function(t,e){return this},t.prototype.lookupRecursive=function(t,e){return this},t.prototype.lookupRecursiveWithTracking=function(t,e,n){return{slice:void 0,layout:void 0,biome:void 0}},t.prototype.getRenderer=function(){return void 0===this.renderer&&(this.renderer=new Ni),this.renderer},t.prototype.getKey=function(){return"unassigned"},t.prototype.has=function(t,e){return t===this.getKey()},t}(),Ci=function(){function t(t){this.builder=t}return t.prototype.findIdx=function(t,e){return t<e[0].min?0:t>e[e.length-1].max?e.length-1:e.findIndex((function(e){return e.min<t&&t<e.max}))},t.prototype.export=function(){for(var t=[],e=this.builder.fixedNoises.depth?this.findIdx(this.builder.fixedNoises.depth,this.builder.weirdnesses):void 0,n=this.builder.fixedNoises.weirdness?this.findIdx(this.builder.fixedNoises.weirdnesses,this.builder.weirdnesses):void 0,i=this.builder.fixedNoises.continentalness?this.findIdx(this.builder.fixedNoises.continentalness,this.builder.continentalnesses):void 0,o=this.builder.fixedNoises.erosion?this.findIdx(this.builder.fixedNoises.erosion,this.builder.erosions):void 0,r=this.builder.fixedNoises.temperature?this.findIdx(this.builder.fixedNoises.temperature,this.builder.temperatures):void 0,s=this.builder.fixedNoises.humidity?this.findIdx(this.builder.fixedNoises.humidity,this.builder.humidities):void 0,a=0;a<this.builder.depths.length;a++){t[a]=[];for(var l=0;l<this.builder.weirdnesses.length;l++){t[a][l]=[];for(var u=0;u<this.builder.continentalnesses.length;u++){t[a][l][u]=[];for(var h=0;h<this.builder.erosions.length;h++){t[a][l][u][h]=[];for(var c=0;c<this.builder.temperatures.length;c++){t[a][l][u][h][c]=[];for(var d=0;d<this.builder.humidities.length;d++){var f=this.builder.dimension.lookupRecursive({d:null!=e?e:a,w:null!=n?n:l,c:null!=i?i:u,e:null!=o?o:h,h:null!=s?s:d,t:null!=r?r:c},"Any");void 0===f||f instanceof Bi?t[a][l][u][h][c][d]={biome:"",done:!0}:f instanceof Pi?t[a][l][u][h][c][d]={biome:f.name,done:!1}:console.warn("Data structure corruption at w: "+l,NaN+u+" e: "+h+" t: "+c+" h: "+d+" - Found element of type "+f.constructor.name)}}}}}}var p=[];for(a=0;a<this.builder.depths.length;a++)for(l=0;l<this.builder.weirdnesses.length;l++)for(u=0;u<this.builder.continentalnesses.length;u++)for(h=0;h<this.builder.erosions.length;h++)for(c=0;c<this.builder.temperatures.length;c++)for(d=0;d<this.builder.humidities.length;d++)if(!t[a][l][u][h][c][d].done){var _=void 0;for(_=h;_<this.builder.erosions.length&&this.checkRange(t,l,a,u,h,c,d,l,a,u,_,c,d);_++);_--;var v=void 0;for(v=l;v<this.builder.weirdnesses.length&&this.checkRange(t,l,a,u,h,c,d,v,a,u,_,c,d);v++);v--;var m=void 0;for(m=a;m<this.builder.depths.length&&this.checkRange(t,l,a,u,h,c,d,v,m,u,_,c,d);m++);m--;var g=void 0;for(g=u;g<this.builder.continentalnesses.length&&this.checkRange(t,l,a,u,h,c,d,v,m,g,_,c,d);g++);g--;var y=void 0;for(y=d;y<this.builder.humidities.length&&this.checkRange(t,l,a,u,h,c,d,v,m,g,_,c,y);y++);y--;var b=void 0;for(b=c;b<this.builder.temperatures.length&&this.checkRange(t,l,a,u,h,c,d,v,m,g,_,b,y);b++);b--,this.setDone(t,l,a,u,h,c,d,v,m,g,_,b,y),p.push({parameters:{weirdness:[this.builder.weirdnesses[l].min,this.builder.weirdnesses[v].max],continentalness:[this.builder.continentalnesses[u].min,this.builder.continentalnesses[g].max],erosion:[this.builder.erosions[h].min,this.builder.erosions[_].max],temperature:[this.builder.temperatures[c].min,this.builder.temperatures[b].max],humidity:[this.builder.humidities[d].min,this.builder.humidities[y].max],depth:[this.builder.depths[a].min,this.builder.depths[m].max],offset:0},biome:t[a][l][u][h][c][d].biome})}var w={type:"minecraft:overworld",generator:{biome_source:{biomes:p,type:"minecraft:multi_noise"},seed:Number(this.builder.seed),settings:"minecraft:overworld",type:"minecraft:noise"}};return console.log("Emmited "+p.length+" Biome settings..."),JSON.stringify(w)},t.prototype.checkRange=function(t,e,n,i,o,r,s,a,l,u,h,c,d){for(var f,p,_,v,m,g,y,b,w,x,E,T,k=t[n][e][i][o][r][s].biome,S=n;S<=l;S++)for(var P=e;P<=a;P++)for(var L=i;L<=u;L++)for(var A=o;A<=h;A++)for(var I=r;I<=c;I++)for(var M=s;M<=d;M++)if(void 0===(null===(g=null===(m=null===(v=null===(_=null===(p=null===(f=t[S])||void 0===f?void 0:f[P])||void 0===p?void 0:p[L])||void 0===_?void 0:_[A])||void 0===v?void 0:v[I])||void 0===m?void 0:m[M])||void 0===g?void 0:g.biome)&&console.warn("undefined element at w: "+P+" c: "+L+" e: "+A+" t: "+I+" h: "+M),(null===(T=null===(E=null===(x=null===(w=null===(b=null===(y=t[S])||void 0===y?void 0:y[P])||void 0===b?void 0:b[L])||void 0===w?void 0:w[A])||void 0===x?void 0:x[I])||void 0===E?void 0:E[M])||void 0===T?void 0:T.biome)!==k)return!1;return!0},t.prototype.setDone=function(t,e,n,i,o,r,s,a,l,u,h,c,d){for(var f=n;f<=l;f++)for(var p=e;p<=a;p++)for(var _=i;_<=u;_++)for(var v=o;v<=h;v++)for(var m=r;m<=c;m++)for(var g=s;g<=d;g++)t[f][p][_][v][m][g].done=!0},t}(),Oi=function(){function t(){}return t.createClickHandlers=function(){var t=this;this.loadVanillaButton=document.getElementById("loadVanillaButton"),this.loadEmptyButton=document.getElementById("loadEmptyButton"),this.openButton=document.getElementById("openButton"),this.saveButton=document.getElementById("saveButton"),this.exportDimensionButton=document.getElementById("exportDimensionButton"),this.exportSplinesButton=document.getElementById("exportSplinesButton"),this.settingsButton=document.getElementById("settingsButton"),this.toggleDarkmodeButton=document.getElementById("toggleDarkmodeButton"),this.loadVanillaButton.onclick=function(e){t.confirmUnsavedChanges()&&(Vl.getInstance().builder.hasChanges=!1,fetch("minecraft_overworld.snowcapped.json").then((function(t){return t.text()})).then((function(t){Vl.getInstance().builder.loadJSON(JSON.parse(t)),Vl.getInstance().sidebarManager.openElement({type:"dimension",key:"dimension"}),Vl.getInstance().refresh({biome:{},spline:!0,grids:!0,noises:!0})})))},this.loadEmptyButton.onclick=function(e){t.confirmUnsavedChanges()&&(Vl.getInstance().builder.hasChanges=!1,fetch("empty.snowcapped.json").then((function(t){return t.text()})).then((function(t){Vl.getInstance().builder.loadJSON(JSON.parse(t)),Vl.getInstance().sidebarManager.openElement({type:"dimension",key:"dimension"}),Vl.getInstance().refresh({biome:{},spline:!0,grids:!0,noises:!0})})))},this.openButton.onclick=function(e){if(t.confirmUnsavedChanges()){Vl.getInstance().builder.hasChanges=!1;var n=document.createElement("input");n.type="file",n.accept=".snowcapped.json",n.onchange=function(t){var e=t.target.files[0],n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(t){var e=t.target.result;Vl.getInstance().builder.loadJSON(JSON.parse(e)),Vl.getInstance().sidebarManager.openElement({type:"dimension",key:"dimension"}),Vl.getInstance().refresh({biome:{},spline:!0,grids:!0,noises:!0})},console.log(e)},n.click()}},this.saveButton.onclick=function(t){if(!su||confirm("You are currently using an experimental version of Snowcapped. Save files from this version can not be loaded in the sable release. Please don't override your old file!")){var e=JSON.stringify(Vl.getInstance().builder.toJSON()),n=new Blob([e],{type:"text/plain"}),i=document.createElement("a");i.download=Vl.getInstance().builder.dimensionName.replace(new RegExp(":|/"),"_")+(su?"_experimental":"")+".snowcapped.json",i.href=window.URL.createObjectURL(n),i.click(),Vl.getInstance().builder.hasChanges=!1}},this.exportDimensionButton.onclick=function(t){var e=new Ci(Vl.getInstance().builder).export(),n=new Blob([e],{type:"text/plain"}),i=document.createElement("a"),o=Vl.getInstance().builder.dimensionName.split(new RegExp(":|/")).reverse()[0]+".json";i.download=o,i.href=window.URL.createObjectURL(n),i.click()},this.exportSplinesButton.onclick=function(t){var e={offset:Vl.getInstance().builder.splines.offset.export(Vl.getInstance().builder.fixedNoises),factor:Vl.getInstance().builder.splines.factor.export(Vl.getInstance().builder.fixedNoises),jaggedness:Vl.getInstance().builder.splines.jaggedness.export(Vl.getInstance().builder.fixedNoises)},n='"terrain_shaper": '+JSON.stringify(e),i=new Blob([n],{type:"text/plain"}),o=document.createElement("a"),r=Vl.getInstance().builder.dimensionName.split(new RegExp(":|/")).reverse()[0]+"_terrain_shaper.json";o.download=r,o.href=window.URL.createObjectURL(i),o.click()},this.settingsButton.onclick=function(e){var n=!document.getElementById("settings").classList.toggle("hidden");document.getElementById("editor").classList.toggle("hidden",n),t.settingsButton.classList.toggle("open",n)},this.toggleDarkmodeButton.onclick=function(e){var n=document.body.classList.toggle("light");t.toggleDarkmodeButton.children[0].src=n?"moon.svg":"sun.svg",Vl.getInstance().refresh({})},window.onbeforeunload=function(t){if(Vl.getInstance().builder.hasChanges)return"You have unsaved changes. Continue?"}},t.confirmUnsavedChanges=function(){return!Vl.getInstance().builder.hasChanges||confirm("You have unsaved changes. Continue?")},t.toggleAction=function(t,e){document.getElementById(t).classList.toggle("hidden",!e)},t}();function Ri(t,e,n){return(1-n)*t+n*e}var Fi=function(){function t(t){var e=this;this.builder=t,this.title=document.getElementById("layoutName"),this.canvas=document.getElementById("layoutEditorCanvas"),this.backButton=document.getElementById("backButton");var n=document.getElementById("layoutEditorTooltip"),i=n.getElementsByClassName("name")[0],o=n.getElementsByClassName("noises")[0],r=n.getElementsByClassName("noise_x")[0],s=n.getElementsByClassName("noise_y")[0];this.title.onchange=function(t){e.layout.name=e.title.value,e.builder.hasChanges=!0,Vl.getInstance().refresh({})},this.canvas.onmousemove=function(a){var l=e.layout.getRenderer();e.mouse_position=e.getMousePosition(a);var u=l.getIdsFromPosition(0,0,e.canvas.width,e.canvas.height,e.mouse_position.mouse_x,e.mouse_position.mouse_y);if(void 0===u||-1===u.indexes.d)return n.classList.add("hidden"),Oi.toggleAction("paint",!1),Oi.toggleAction("paint-mode",!1),void Oi.toggleAction("open",!1);Oi.toggleAction("paint",!0),e.canvas.focus(),n.style.left=Math.min(a.pageX+20,document.body.clientWidth-n.clientWidth)+"px",n.style.top=a.pageY+15+"px",n.classList.remove("hidden");var h=e.layout.lookup(u.indexes,u.mode);if(e.layout instanceof Ql?h instanceof eu?(Oi.toggleAction("paint-mode",!1),h=h.getElement(u.mode)):Oi.toggleAction("paint-mode",!0):Oi.toggleAction("paint-mode",!1),h instanceof Ql&&"slice"===h.getType()?(i.innerHTML="&crarr; "+h.name+" (Slice)",Oi.toggleAction("open",!0),Oi.toggleAction("remove",!0)):h instanceof Ql&&"layout"===h.getType()?(i.innerHTML="&crarr; "+h.name+" (Layout)",Oi.toggleAction("open",!0),Oi.toggleAction("remove",!0)):h instanceof Pi?(i.innerHTML=h.name,Oi.toggleAction("open",!1),Oi.toggleAction("remove",!0)):(i.innerHTML="Unassigned",Oi.toggleAction("open",!1),Oi.toggleAction("remove",!1)),o.classList.remove("hidden"),"dimension"===e.layout.getType()?(r.innerHTML="Weirdness: ["+e.builder.weirdnesses[u.indexes.w].min.toFixed(3)+", "+e.builder.weirdnesses[u.indexes.w].max.toFixed(3)+"]",s.innerHTML="Depth: ["+e.builder.depths[u.indexes.d].min.toFixed(3)+", "+e.builder.depths[u.indexes.d].max.toFixed(3)+"]"):"slice"===e.layout.getType()?(r.innerHTML="Erosion: ["+e.builder.erosions[u.indexes.e].min.toFixed(3)+", "+e.builder.erosions[u.indexes.e].max.toFixed(3)+"]",s.innerHTML="Continentalness: ["+e.builder.continentalnesses[u.indexes.c].min.toFixed(3)+", "+e.builder.continentalnesses[u.indexes.c].max.toFixed(3)+"]"):"layout"===e.layout.getType()&&(r.innerHTML="Humitiy: ["+e.builder.humidities[u.indexes.h].min.toFixed(3)+", "+e.builder.humidities[u.indexes.h].max.toFixed(3)+"]",s.innerHTML="Temperature: ["+e.builder.temperatures[u.indexes.t].min.toFixed(3)+", "+e.builder.temperatures[u.indexes.t].max.toFixed(3)+"]"),e.layout instanceof Ql&&"slice"===e.layout.getType()){var c=t.continentalnesses[u.indexes.c],d=Ri(c.min,c.max,u.local_t),f=t.erosions[u.indexes.e],p=Ri(f.min,f.max,u.local_h);Vl.getInstance().splineDisplayManager.setPos({c:d,e:p}),Vl.getInstance().splineDisplayManager.refresh()}},this.canvas.onmouseleave=function(t){n.classList.add("hidden"),Vl.getInstance().splineDisplayManager.setPos(void 0),Vl.getInstance().splineDisplayManager.refresh(),Oi.toggleAction("paint",!1),Oi.toggleAction("paint-mode",!1),Oi.toggleAction("open",!1),Oi.toggleAction("remove",!1)},this.canvas.onclick=function(t){var n=e.layout.getRenderer(),i=e.getMousePosition(t),o=n.getIdsFromPosition(0,0,e.canvas.width,e.canvas.height,i.mouse_x,i.mouse_y);void 0!==o&&e.handleInteraction(o.indexes,o.mode,t.ctrlKey||t.metaKey?"add_alt":t.altKey?"pick":"add")},this.canvas.onauxclick=function(t){if(1===t.button){var n=e.layout.getRenderer(),i=e.getMousePosition(t),o=n.getIdsFromPosition(0,0,e.canvas.width,e.canvas.height,i.mouse_x,i.mouse_y);if(void 0===o)return;e.handleInteraction(o.indexes,o.mode,"pick")}},this.canvas.oncontextmenu=function(t){var n=e.layout.getRenderer(),i=e.getMousePosition(t),o=n.getIdsFromPosition(0,0,e.canvas.width,e.canvas.height,i.mouse_x,i.mouse_y);void 0!==o&&(e.handleInteraction(o.indexes,o.mode,"open"),t.preventDefault())},this.canvas.onkeydown=function(t){"z"===t.key&&(t.ctrlKey||t.metaKey)&&(e.undo(),Vl.getInstance().refresh({biome:{}}))},this.canvas.onkeyup=function(t){if("Delete"===t.key){var n=e.layout.getRenderer(),i=e.mouse_position,o=n.getIdsFromPosition(0,0,e.canvas.width,e.canvas.height,i.mouse_x,i.mouse_y);if(void 0===o)return;e.handleInteraction(o.indexes,o.mode,"remove"),t.preventDefault}},this.backButton.onclick=function(){Vl.getInstance().sidebarManager.back()}}return t.prototype.highlight=function(t,e){var n=this.builder.getLayoutElement(Vl.getInstance().sidebarManager.openedElement.key);n instanceof Ql&&(this.layout=n),this.layout.getRenderer().setHighlight(t,e)},t.prototype.getMousePosition=function(t){var e=this.canvas.getBoundingClientRect(),n=this.canvas.width/e.width,i=this.canvas.height/e.height;return{mouse_x:(t.clientX-e.left)*n,mouse_y:(t.clientY-e.top)*i}},t.prototype.handleInteraction=function(t,e,n){var i;if(-1===t.d)return"add"!==n&&"add_alt"!==n||(this.builder.modes[t.w]="A"===this.builder.modes[t.w]?"B":"A"),void Vl.getInstance().refresh({biome:{w:t.w}});var o=this.layout.lookup(t,e),r=o;r instanceof eu&&(r="A"===e?this.builder.getLayoutElement(r.elementA):this.builder.getLayoutElement(r.elementB));var s=null===(i=Vl.getInstance().sidebarManager.selectedElement)||void 0===i?void 0:i.key;if("remove"===n&&(s="unassigned",n="add"),"pick"===n)Vl.getInstance().sidebarManager.selectElement({type:r instanceof Ql?r.getType():"biome",key:s=r.getKey()});else if("add"!==n&&"add_alt"!==n||void 0===s)"open"===n&&r instanceof Ql&&Vl.getInstance().sidebarManager.openElement({type:r.getType(),key:r.getKey()},!0);else{var a=this.builder.gridElements.get(s);if(void 0===a){var l=this.builder.vanillaBiomes.get(s);void 0!==l&&this.builder.registerBiome(l),a=l}if(a.has(this.layout.getKey(),t))return;!a&&this.builder.vanillaBiomes.has(s)&&this.builder.registerGridElement(this.builder.vanillaBiomes.get(s)),"add_alt"!==n||o instanceof eu?o instanceof eu?"A"===e?s===o.elementB?this.layout.set(t,s):this.layout.set(t,s+"/"+o.elementB):s===o.elementA?this.layout.set(t,s):this.layout.set(t,o.elementA+"/"+s):this.layout.set(t,s):"A"===e?this.layout.set(t,s+"/"+o.getKey()):this.layout.set(t,o.getKey()+"/"+s),Vl.getInstance().refresh({biome:t})}},t.prototype.undo=function(){this.layout.undo()},t.prototype.refresh=function(){this.canvas.parentElement.classList.remove("hidden"),this.title.readOnly=!1;var t=Vl.getInstance().sidebarManager.openedElement.type,e="dimension"===t?this.builder.dimension:this.builder.getLayoutElement(Vl.getInstance().sidebarManager.openedElement.key);e instanceof Ql&&(this.layout=e),this.title.value=this.layout.name,Vl.getInstance().splineDisplayManager.setWeirdnesses([]),Vl.getInstance().splineDisplayManager.setPos(void 0),"dimension"===t?Vl.getInstance().setLabels("Weirdness","Depth"):"slice"===t?Vl.getInstance().setLabels("Erosion","Continentalness"):"layout"===t&&Vl.getInstance().setLabels("Humidity","Temperature");var n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height),this.layout.getRenderer().setDirty(),this.layout.getRenderer().draw(n,0,0,this.canvas.width,this.canvas.height,{},!1),this.backButton.classList.toggle("hidden",0==Vl.getInstance().sidebarManager.parentElements.length)},t.prototype.hide=function(){this.canvas.parentElement.classList.add("hidden")},t}(),Di=function(){function t(t){this.builder=t,this.refresh()}return t.prototype.refresh=function(){var t=this,e=document.getElementById("dimension_name");e.value=this.builder.dimensionName,e.onchange=function(n){t.builder.hasChanges=!0,t.builder.dimensionName=e.value};var n=document.getElementById("seed");n.value=this.builder.seed.toString(),n.onkeypress=function(t){t.key.match(/^[0-9|-]+$/)||t.preventDefault()},n.onchange=function(e){t.builder.hasChanges=!0,t.builder.seed=BigInt(n.value),Vl.getInstance().refresh({noises:!0})},n.onkeyup=function(t){"Enter"===t.key&&n.blur()},this.createNoiseSettingFields(document.getElementById("continentalness_setting"),"Continentalness",this.builder.noiseSettings.continentalness),this.createNoiseSettingFields(document.getElementById("erosion_setting"),"Erosion",this.builder.noiseSettings.erosion),this.createNoiseSettingFields(document.getElementById("weirdness_setting"),"Weirdness",this.builder.noiseSettings.weirdness),this.createNoiseSettingFields(document.getElementById("temperature_setting"),"Temperature",this.builder.noiseSettings.temperature),this.createNoiseSettingFields(document.getElementById("humidity_setting"),"Humidity",this.builder.noiseSettings.humidity),this.createNoiseSettingFields(document.getElementById("shift_setting"),"Shift",this.builder.noiseSettings.shift),document.getElementById("reset_noises").onclick=function(e){t.builder.hasChanges=!0,t.builder.noiseSettings=Ii.default(),Vl.getInstance().refresh({noises:!0})},document.getElementById("copy_noise_settings").onclick=function(e){navigator.clipboard.writeText('"octaves": '+JSON.stringify(t.builder.noiseSettings))},this.handleFixNoiseSetting(document.getElementById("fix_continentalness_setting"),"continentalness"),this.handleFixNoiseSetting(document.getElementById("fix_erosion_setting"),"erosion"),this.handleFixNoiseSetting(document.getElementById("fix_weirdness_setting"),"weirdness"),this.handleFixNoiseSetting(document.getElementById("fix_temperature_setting"),"temperature"),this.handleFixNoiseSetting(document.getElementById("fix_humidity_setting"),"humidity")},t.prototype.handleFixNoiseSetting=function(t,e){var n,i,o,r,s=this,a=t.getElementsByClassName("enabled")[0],l=t.getElementsByClassName("range")[0],u=t.getElementsByClassName("display")[0];a.checked=void 0!==this.builder.fixedNoises[e],l.disabled=void 0===this.builder.fixedNoises[e],u.value=null!==(i=null===(n=this.builder.fixedNoises[e])||void 0===n?void 0:n.toFixed(2))&&void 0!==i?i:"0.00",l.value=null!==(r=null===(o=this.builder.fixedNoises[e])||void 0===o?void 0:o.toString())&&void 0!==r?r:"0",a.oninput=function(t){l.disabled=!a.checked,a.checked?s.builder.fixedNoises[e]=parseFloat(l.value):s.builder.fixedNoises[e]=void 0,Vl.getInstance().refresh({noises:!0,biome:{},grids:!0})},l.oninput=function(t){s.builder.fixedNoises[e]=parseFloat(l.value),u.value=s.builder.fixedNoises[e].toFixed(2)},l.onchange=function(t){Vl.getInstance().refresh({noises:!0,biome:{},grids:!0})}},t.prototype.createNoiseSettingFields=function(t,e,n){var i=this;t.innerHTML="";var o=document.createElement("span");o.classList.add("description"),o.innerHTML=e+":",t.appendChild(o);var r=document.createElement("label"),s=document.createElement("div");s.classList.add("description","minor"),s.innerHTML="FO:",s.title="First Octave",r.appendChild(s);var a=document.createElement("input");a.classList.add("small"),a.type="number",a.value=n.firstOctave.toString(),a.max="-1",a.step="1",a.onkeypress=function(t){t.key.match(/^[0-9|-]+$/)||t.preventDefault()},a.onchange=function(t){n.firstOctave=parseInt(a.value),a.value=n.firstOctave.toString(),i.builder.hasChanges=!0,Vl.getInstance().refresh({noises:!0})},a.onkeyup=function(t){"Enter"===t.key&&a.blur()},r.appendChild(a),t.appendChild(r);var l=document.createElement("label"),u=document.createElement("div");u.classList.add("description","minor"),u.innerHTML="A:",u.title="Amplitudes",l.appendChild(u);for(var h=function(t){var e=document.createElement("input");e.classList.add("small"),t===n.amplitudes.length-1&&t>0&&e.classList.add("last"),e.type="number",e.value=n.amplitudes[t].toString(),e.min="0",e.step="0.1",e.onkeypress=function(t){t.key.match(/^[0-9|.]+$/)||t.preventDefault()},e.onchange=function(o){n.amplitudes[t]=parseFloat(e.value),i.builder.hasChanges=!0,Vl.getInstance().refresh({noises:!0})},e.onkeyup=function(t){"Enter"===t.key&&e.blur()},l.appendChild(e)},c=0;c<n.amplitudes.length;c++)h(c);if(n.amplitudes.length>1){var d=document.createElement("button");d.classList.add("delete");var f=document.createElement("img");f.src="trash-bin.svg",d.appendChild(f),d.onclick=function(t){n.amplitudes.splice(n.amplitudes.length-1,1),i.builder.hasChanges=!0,Vl.getInstance().refresh({noises:!0})},l.appendChild(d)}var p=document.createElement("button");p.classList.add("add");var _=document.createElement("img");_.src="add.svg",p.appendChild(_),p.onclick=function(t){n.amplitudes[n.amplitudes.length]=0,n.firstOctave=parseInt(a.value),a.value=n.firstOctave.toString(),i.builder.hasChanges=!0,Vl.getInstance().refresh({noises:!0})},l.appendChild(p),t.appendChild(l)},t}();function Zi(){}function ji(t){return null==t?Zi:function(){return this.querySelector(t)}}function Ui(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Hi(){return[]}function Wi(t){return null==t?Hi:function(){return this.querySelectorAll(t)}}function Gi(t){return function(){return this.matches(t)}}function Ki(t){return function(e){return e.matches(t)}}var Xi=Array.prototype.find;function Vi(){return this.firstElementChild}var qi=Array.prototype.filter;function Ji(){return Array.from(this.children)}function Yi(t){return new Array(t.length)}function $i(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Qi(t){return function(){return t}}function to(t,e,n,i,o,r){for(var s,a=0,l=e.length,u=r.length;a<u;++a)(s=e[a])?(s.__data__=r[a],i[a]=s):n[a]=new $i(t,r[a]);for(;a<l;++a)(s=e[a])&&(o[a]=s)}function eo(t,e,n,i,o,r,s){var a,l,u,h=new Map,c=e.length,d=r.length,f=new Array(c);for(a=0;a<c;++a)(l=e[a])&&(f[a]=u=s.call(l,l.__data__,a,e)+"",h.has(u)?o[a]=l:h.set(u,l));for(a=0;a<d;++a)u=s.call(t,r[a],a,r)+"",(l=h.get(u))?(i[a]=l,l.__data__=r[a],h.delete(u)):n[a]=new $i(t,r[a]);for(a=0;a<c;++a)(l=e[a])&&h.get(f[a])===l&&(o[a]=l)}function no(t){return t.__data__}function io(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function oo(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}$i.prototype={constructor:$i,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ro="http://www.w3.org/1999/xhtml";const so={svg:"http://www.w3.org/2000/svg",xhtml:ro,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ao(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),so.hasOwnProperty(e)?{space:so[e],local:t}:t}function lo(t){return function(){this.removeAttribute(t)}}function uo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ho(t,e){return function(){this.setAttribute(t,e)}}function co(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function fo(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function po(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _o(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function vo(t){return function(){this.style.removeProperty(t)}}function mo(t,e,n){return function(){this.style.setProperty(t,e,n)}}function go(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function yo(t,e){return t.style.getPropertyValue(e)||_o(t).getComputedStyle(t,null).getPropertyValue(e)}function bo(t){return function(){delete this[t]}}function wo(t,e){return function(){this[t]=e}}function xo(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Eo(t){return t.trim().split(/^|\s+/)}function To(t){return t.classList||new ko(t)}function ko(t){this._node=t,this._names=Eo(t.getAttribute("class")||"")}function So(t,e){for(var n=To(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function Po(t,e){for(var n=To(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function Lo(t){return function(){So(this,t)}}function Ao(t){return function(){Po(this,t)}}function Io(t,e){return function(){(e.apply(this,arguments)?So:Po)(this,t)}}function Mo(){this.textContent=""}function zo(t){return function(){this.textContent=t}}function No(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Bo(){this.innerHTML=""}function Co(t){return function(){this.innerHTML=t}}function Oo(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ro(){this.nextSibling&&this.parentNode.appendChild(this)}function Fo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Do(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ro&&e.documentElement.namespaceURI===ro?e.createElement(t):e.createElementNS(n,t)}}function Zo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function jo(t){var e=ao(t);return(e.local?Zo:Do)(e)}function Uo(){return null}function Ho(){var t=this.parentNode;t&&t.removeChild(this)}function Wo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Go(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ko(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Xo(t){return function(){var e=this.__on;if(e){for(var n,i=0,o=-1,r=e.length;i<r;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?e.length=o:delete this.__on}}}function Vo(t,e,n){return function(){var i,o=this.__on,r=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var s=0,a=o.length;s<a;++s)if((i=o[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),void(i.value=e);this.addEventListener(t.type,r,n),i={type:t.type,name:t.name,value:e,listener:r,options:n},o?o.push(i):this.__on=[i]}}function qo(t,e,n){var i=_o(t),o=i.CustomEvent;"function"==typeof o?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Jo(t,e){return function(){return qo(this,t,e)}}function Yo(t,e){return function(){return qo(this,t,e.apply(this,arguments))}}ko.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var $o=[null];function Qo(t,e){this._groups=t,this._parents=e}function tr(){return new Qo([[document.documentElement]],$o)}Qo.prototype=tr.prototype={constructor:Qo,select:function(t){"function"!=typeof t&&(t=ji(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,s,a=e[o],l=a.length,u=i[o]=new Array(l),h=0;h<l;++h)(r=a[h])&&(s=t.call(r,r.__data__,h,a))&&("__data__"in r&&(s.__data__=r.__data__),u[h]=s);return new Qo(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Ui(t.apply(this,arguments))}}(t):Wi(t);for(var e=this._groups,n=e.length,i=[],o=[],r=0;r<n;++r)for(var s,a=e[r],l=a.length,u=0;u<l;++u)(s=a[u])&&(i.push(t.call(s,s.__data__,u,a)),o.push(s));return new Qo(i,o)},selectChild:function(t){return this.select(null==t?Vi:function(t){return function(){return Xi.call(this.children,t)}}("function"==typeof t?t:Ki(t)))},selectChildren:function(t){return this.selectAll(null==t?Ji:function(t){return function(){return qi.call(this.children,t)}}("function"==typeof t?t:Ki(t)))},filter:function(t){"function"!=typeof t&&(t=Gi(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,s=e[o],a=s.length,l=i[o]=[],u=0;u<a;++u)(r=s[u])&&t.call(r,r.__data__,u,s)&&l.push(r);return new Qo(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,no);var n=e?eo:to,i=this._parents,o=this._groups;"function"!=typeof t&&(t=Qi(t));for(var r=o.length,s=new Array(r),a=new Array(r),l=new Array(r),u=0;u<r;++u){var h=i[u],c=o[u],d=c.length,f=io(t.call(h,h&&h.__data__,u,i)),p=f.length,_=a[u]=new Array(p),v=s[u]=new Array(p),m=l[u]=new Array(d);n(h,c,_,v,m,f,e);for(var g,y,b=0,w=0;b<p;++b)if(g=_[b]){for(b>=w&&(w=b+1);!(y=v[w])&&++w<p;);g._next=y||null}}return(s=new Qo(s,i))._enter=a,s._exit=l,s},enter:function(){return new Qo(this._enter||this._groups.map(Yi),this._parents)},exit:function(){return new Qo(this._exit||this._groups.map(Yi),this._parents)},join:function(t,e,n){var i=this.enter(),o=this,r=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(o=e(o))&&(o=o.selection()),null==n?r.remove():n(r),i&&o?i.merge(o).order():o},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,o=n.length,r=i.length,s=Math.min(o,r),a=new Array(o),l=0;l<s;++l)for(var u,h=n[l],c=i[l],d=h.length,f=a[l]=new Array(d),p=0;p<d;++p)(u=h[p]||c[p])&&(f[p]=u);for(;l<o;++l)a[l]=n[l];return new Qo(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,o=t[e],r=o.length-1,s=o[r];--r>=0;)(i=o[r])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=oo);for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var s,a=n[r],l=a.length,u=o[r]=new Array(l),h=0;h<l;++h)(s=a[h])&&(u[h]=s);u.sort(e)}return new Qo(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length;o<r;++o){var s=i[o];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o,r=e[n],s=0,a=r.length;s<a;++s)(o=r[s])&&t.call(o,o.__data__,s,r);return this},attr:function(t,e){var n=ao(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?uo:lo:"function"==typeof e?n.local?po:fo:n.local?co:ho)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?vo:"function"==typeof e?go:mo)(t,e,null==n?"":n)):yo(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?bo:"function"==typeof e?xo:wo)(t,e)):this.node()[t]},classed:function(t,e){var n=Eo(t+"");if(arguments.length<2){for(var i=To(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?Io:e?Lo:Ao)(n,e))},text:function(t){return arguments.length?this.each(null==t?Mo:("function"==typeof t?No:zo)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Bo:("function"==typeof t?Oo:Co)(t)):this.node().innerHTML},raise:function(){return this.each(Ro)},lower:function(){return this.each(Fo)},append:function(t){var e="function"==typeof t?t:jo(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:jo(t),i=null==e?Uo:"function"==typeof e?e:ji(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(Ho)},clone:function(t){return this.select(t?Go:Wo)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,o,r=Ko(t+""),s=r.length;if(!(arguments.length<2)){for(a=e?Vo:Xo,i=0;i<s;++i)this.each(a(r[i],e,n));return this}var a=this.node().__on;if(a)for(var l,u=0,h=a.length;u<h;++u)for(i=0,l=a[u];i<s;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Yo:Jo)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,o=t[e],r=0,s=o.length;r<s;++r)(i=o[r])&&(yield i)}};const er=tr;var nr={value:()=>{}};function ir(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new or(i)}function or(t){this._=t}function rr(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function sr(t,e){for(var n,i=0,o=t.length;i<o;++i)if((n=t[i]).name===e)return n.value}function ar(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=nr,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}or.prototype=ir.prototype={constructor:or,on:function(t,e){var n,i=this._,o=rr(t+"",i),r=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++r<s;)if(n=(t=o[r]).type)i[n]=ar(i[n],t.name,e);else if(null==e)for(n in i)i[n]=ar(i[n],t.name,null);return this}for(;++r<s;)if((n=(t=o[r]).type)&&(n=sr(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new or(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),r=0;r<n;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,n=(i=this._[t]).length;r<n;++r)i[r].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)}};const lr=ir;var ur,hr,cr=0,dr=0,fr=0,pr=0,_r=0,vr=0,mr="object"==typeof performance&&performance.now?performance:Date,gr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function yr(){return _r||(gr(br),_r=mr.now()+vr)}function br(){_r=0}function wr(){this._call=this._time=this._next=null}function xr(t,e,n){var i=new wr;return i.restart(t,e,n),i}function Er(){_r=(pr=mr.now())+vr,cr=dr=0;try{!function(){yr(),++cr;for(var t,e=ur;e;)(t=_r-e._time)>=0&&e._call.call(void 0,t),e=e._next;--cr}()}finally{cr=0,function(){for(var t,e,n=ur,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ur=e);hr=t,kr(i)}(),_r=0}}function Tr(){var t=mr.now(),e=t-pr;e>1e3&&(vr-=e,pr=t)}function kr(t){cr||(dr&&(dr=clearTimeout(dr)),t-_r>24?(t<1/0&&(dr=setTimeout(Er,t-mr.now()-vr)),fr&&(fr=clearInterval(fr))):(fr||(pr=mr.now(),fr=setInterval(Tr,1e3)),cr=1,gr(Er)))}function Sr(t,e,n){var i=new wr;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}wr.prototype=xr.prototype={constructor:wr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?yr():+n)+(null==e?0:+e),this._next||hr===this||(hr?hr._next=this:ur=this,hr=this),this._call=t,this._time=n,kr()},stop:function(){this._call&&(this._call=null,this._time=1/0,kr())}};var Pr=lr("start","end","cancel","interrupt"),Lr=[];function Ar(t,e,n,i,o,r){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var i,o=t.__transition;function r(l){var u,h,c,d;if(1!==n.state)return a();for(u in o)if((d=o[u]).name===n.name){if(3===d.state)return Sr(r);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete o[u]):+u<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete o[u])}if(Sr((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(l))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(c=n.tween.length),u=0,h=-1;u<c;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function s(e){for(var o=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),r=-1,s=i.length;++r<s;)i[r].call(t,o);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var i in n.state=6,n.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=n,n.timer=xr((function(t){n.state=1,n.timer.restart(r,n.delay,n.time),n.delay<=t&&r(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:o,on:Pr,tween:Lr,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:0})}function Ir(t,e){var n=zr(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Mr(t,e){var n=zr(t,e);if(n.state>3)throw new Error("too late; already running");return n}function zr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Nr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Br,Cr=180/Math.PI,Or={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Rr(t,e,n,i,o,r){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:o,translateY:r,rotate:Math.atan2(e,t)*Cr,skewX:Math.atan(l)*Cr,scaleX:s,scaleY:a}}function Fr(t,e,n,i){function o(t){return t.length?t.pop()+" ":""}return function(r,s){var a=[],l=[];return r=t(r),s=t(s),function(t,i,o,r,s,a){if(t!==o||i!==r){var l=s.push("translate(",null,e,null,n);a.push({i:l-4,x:Nr(t,o)},{i:l-2,x:Nr(i,r)})}else(o||r)&&s.push("translate("+o+e+r+n)}(r.translateX,r.translateY,s.translateX,s.translateY,a,l),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(o(n)+"rotate(",null,i)-2,x:Nr(t,e)})):e&&n.push(o(n)+"rotate("+e+i)}(r.rotate,s.rotate,a,l),function(t,e,n,r){t!==e?r.push({i:n.push(o(n)+"skewX(",null,i)-2,x:Nr(t,e)}):e&&n.push(o(n)+"skewX("+e+i)}(r.skewX,s.skewX,a,l),function(t,e,n,i,r,s){if(t!==n||e!==i){var a=r.push(o(r)+"scale(",null,",",null,")");s.push({i:a-4,x:Nr(t,n)},{i:a-2,x:Nr(e,i)})}else 1===n&&1===i||r.push(o(r)+"scale("+n+","+i+")")}(r.scaleX,r.scaleY,s.scaleX,s.scaleY,a,l),r=s=null,function(t){for(var e,n=-1,i=l.length;++n<i;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var Dr=Fr((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Or:Rr(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Zr=Fr((function(t){return null==t?Or:(Br||(Br=document.createElementNS("http://www.w3.org/2000/svg","g")),Br.setAttribute("transform",t),(t=Br.transform.baseVal.consolidate())?Rr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Or)}),", ",")",")");function jr(t,e){var n,i;return function(){var o=Mr(this,t),r=o.tween;if(r!==n)for(var s=0,a=(i=n=r).length;s<a;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}o.tween=i}}function Ur(t,e,n){var i,o;if("function"!=typeof n)throw new Error;return function(){var r=Mr(this,t),s=r.tween;if(s!==i){o=(i=s).slice();for(var a={name:e,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===e){o[l]=a;break}l===u&&o.push(a)}r.tween=o}}function Hr(t,e,n){var i=t._id;return t.each((function(){var t=Mr(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return zr(t,i).value[e]}}function Wr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Gr(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Kr(){}var Xr=.7,Vr=1/Xr,qr="\\s*([+-]?\\d+)\\s*",Jr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$r=/^#([0-9a-f]{3,8})$/,Qr=new RegExp("^rgb\\("+[qr,qr,qr]+"\\)$"),ts=new RegExp("^rgb\\("+[Yr,Yr,Yr]+"\\)$"),es=new RegExp("^rgba\\("+[qr,qr,qr,Jr]+"\\)$"),ns=new RegExp("^rgba\\("+[Yr,Yr,Yr,Jr]+"\\)$"),is=new RegExp("^hsl\\("+[Jr,Yr,Yr]+"\\)$"),os=new RegExp("^hsla\\("+[Jr,Yr,Yr,Jr]+"\\)$"),rs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ss(){return this.rgb().formatHex()}function as(){return this.rgb().formatRgb()}function ls(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$r.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?us(e):3===n?new fs(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?hs(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?hs(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Qr.exec(t))?new fs(e[1],e[2],e[3],1):(e=ts.exec(t))?new fs(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=es.exec(t))?hs(e[1],e[2],e[3],e[4]):(e=ns.exec(t))?hs(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=is.exec(t))?ms(e[1],e[2]/100,e[3]/100,1):(e=os.exec(t))?ms(e[1],e[2]/100,e[3]/100,e[4]):rs.hasOwnProperty(t)?us(rs[t]):"transparent"===t?new fs(NaN,NaN,NaN,0):null}function us(t){return new fs(t>>16&255,t>>8&255,255&t,1)}function hs(t,e,n,i){return i<=0&&(t=e=n=NaN),new fs(t,e,n,i)}function cs(t){return t instanceof Kr||(t=ls(t)),t?new fs((t=t.rgb()).r,t.g,t.b,t.opacity):new fs}function ds(t,e,n,i){return 1===arguments.length?cs(t):new fs(t,e,n,null==i?1:i)}function fs(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function ps(){return"#"+vs(this.r)+vs(this.g)+vs(this.b)}function _s(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function vs(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ms(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ys(t,e,n,i)}function gs(t){if(t instanceof ys)return new ys(t.h,t.s,t.l,t.opacity);if(t instanceof Kr||(t=ls(t)),!t)return new ys;if(t instanceof ys)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),r=Math.max(e,n,i),s=NaN,a=r-o,l=(r+o)/2;return a?(s=e===r?(n-i)/a+6*(n<i):n===r?(i-e)/a+2:(e-n)/a+4,a/=l<.5?r+o:2-r-o,s*=60):a=l>0&&l<1?0:s,new ys(s,a,l,t.opacity)}function ys(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function bs(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function ws(t,e,n,i,o){var r=t*t,s=r*t;return((1-3*t+3*r-s)*e+(4-6*r+3*s)*n+(1+3*t+3*r-3*s)*i+s*o)/6}Wr(Kr,ls,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ss,formatHex:ss,formatHsl:function(){return gs(this).formatHsl()},formatRgb:as,toString:as}),Wr(fs,ds,Gr(Kr,{brighter:function(t){return t=null==t?Vr:Math.pow(Vr,t),new fs(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Xr:Math.pow(Xr,t),new fs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ps,formatHex:ps,formatRgb:_s,toString:_s})),Wr(ys,(function(t,e,n,i){return 1===arguments.length?gs(t):new ys(t,e,n,null==i?1:i)}),Gr(Kr,{brighter:function(t){return t=null==t?Vr:Math.pow(Vr,t),new ys(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Xr:Math.pow(Xr,t),new ys(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new fs(bs(t>=240?t-240:t+120,o,i),bs(t,o,i),bs(t<120?t+240:t-120,o,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const xs=t=>()=>t;function Es(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):xs(isNaN(t)?e:t)}const Ts=function t(e){var n=function(t){return 1==(t=+t)?Es:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):xs(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=ds(t)).r,(e=ds(e)).r),o=n(t.g,e.g),r=n(t.b,e.b),s=Es(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=o(e),t.b=r(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function ks(t){return function(e){var n,i,o=e.length,r=new Array(o),s=new Array(o),a=new Array(o);for(n=0;n<o;++n)i=ds(e[n]),r[n]=i.r||0,s[n]=i.g||0,a[n]=i.b||0;return r=t(r),s=t(s),a=t(a),i.opacity=1,function(t){return i.r=r(t),i.g=s(t),i.b=a(t),i+""}}}ks((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],r=t[i+1],s=i>0?t[i-1]:2*o-r,a=i<e-1?t[i+2]:2*r-o;return ws((n-i/e)*e,s,o,r,a)}})),ks((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),o=t[(i+e-1)%e],r=t[i%e],s=t[(i+1)%e],a=t[(i+2)%e];return ws((n-i/e)*e,o,r,s,a)}}));var Ss=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ps=new RegExp(Ss.source,"g");function Ls(t,e){var n,i,o,r=Ss.lastIndex=Ps.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=Ss.exec(t))&&(i=Ps.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Nr(n,i)})),r=Ps.lastIndex;return r<e.length&&(o=e.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)a[(n=l[i]).i]=n.x(t);return a.join("")})}function As(t,e){var n;return("number"==typeof e?Nr:e instanceof ls?Ts:(n=ls(e))?(e=n,Ts):Ls)(t,e)}function Is(t){return function(){this.removeAttribute(t)}}function Ms(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zs(t,e,n){var i,o,r=n+"";return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function Ns(t,e,n){var i,o,r=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function Bs(t,e,n){var i,o,r;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(t))===(a=l+"")?null:s===i&&a===o?r:(o=a,r=e(i=s,l));this.removeAttribute(t)}}function Cs(t,e,n){var i,o,r;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:s===i&&a===o?r:(o=a,r=e(i=s,l));this.removeAttributeNS(t.space,t.local)}}function Os(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Rs(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Fs(t,e){var n,i;function o(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Rs(t,o)),n}return o._value=e,o}function Ds(t,e){var n,i;function o(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Os(t,o)),n}return o._value=e,o}function Zs(t,e){return function(){Ir(this,t).delay=+e.apply(this,arguments)}}function js(t,e){return e=+e,function(){Ir(this,t).delay=e}}function Us(t,e){return function(){Mr(this,t).duration=+e.apply(this,arguments)}}function Hs(t,e){return e=+e,function(){Mr(this,t).duration=e}}function Ws(t,e){if("function"!=typeof e)throw new Error;return function(){Mr(this,t).ease=e}}function Gs(t,e,n){var i,o,r=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Ir:Mr;return function(){var s=r(this,t),a=s.on;a!==i&&(o=(i=a).copy()).on(e,n),s.on=o}}var Ks=er.prototype.constructor;function Xs(t){return function(){this.style.removeProperty(t)}}function Vs(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function qs(t,e,n){var i,o;function r(){var r=e.apply(this,arguments);return r!==o&&(i=(o=r)&&Vs(t,r,n)),i}return r._value=e,r}function Js(t){return function(e){this.textContent=t.call(this,e)}}function Ys(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Js(i)),e}return i._value=t,i}var $s=0;function Qs(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function ta(){return++$s}var ea=er.prototype;Qs.prototype=function(t){return er().transition(t)}.prototype={constructor:Qs,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ji(t));for(var i=this._groups,o=i.length,r=new Array(o),s=0;s<o;++s)for(var a,l,u=i[s],h=u.length,c=r[s]=new Array(h),d=0;d<h;++d)(a=u[d])&&(l=t.call(a,a.__data__,d,u))&&("__data__"in a&&(l.__data__=a.__data__),c[d]=l,Ar(c[d],e,n,d,c,zr(a,n)));return new Qs(r,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Wi(t));for(var i=this._groups,o=i.length,r=[],s=[],a=0;a<o;++a)for(var l,u=i[a],h=u.length,c=0;c<h;++c)if(l=u[c]){for(var d,f=t.call(l,l.__data__,c,u),p=zr(l,n),_=0,v=f.length;_<v;++_)(d=f[_])&&Ar(d,e,n,_,f,p);r.push(f),s.push(l)}return new Qs(r,s,e,n)},selectChild:ea.selectChild,selectChildren:ea.selectChildren,filter:function(t){"function"!=typeof t&&(t=Gi(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,s=e[o],a=s.length,l=i[o]=[],u=0;u<a;++u)(r=s[u])&&t.call(r,r.__data__,u,s)&&l.push(r);return new Qs(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),s=new Array(i),a=0;a<r;++a)for(var l,u=e[a],h=n[a],c=u.length,d=s[a]=new Array(c),f=0;f<c;++f)(l=u[f]||h[f])&&(d[f]=l);for(;a<i;++a)s[a]=e[a];return new Qs(s,this._parents,this._name,this._id)},selection:function(){return new Ks(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ta(),i=this._groups,o=i.length,r=0;r<o;++r)for(var s,a=i[r],l=a.length,u=0;u<l;++u)if(s=a[u]){var h=zr(s,e);Ar(s,t,n,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Qs(i,this._parents,t,n)},call:ea.call,nodes:ea.nodes,node:ea.node,size:ea.size,empty:ea.empty,each:ea.each,on:function(t,e){var n=this._id;return arguments.length<2?zr(this.node(),n).on.on(t):this.each(Gs(n,t,e))},attr:function(t,e){var n=ao(t),i="transform"===n?Zr:As;return this.attrTween(t,"function"==typeof e?(n.local?Cs:Bs)(n,i,Hr(this,"attr."+t,e)):null==e?(n.local?Ms:Is)(n):(n.local?Ns:zs)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=ao(t);return this.tween(n,(i.local?Fs:Ds)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Dr:As;return null==e?this.styleTween(t,function(t,e){var n,i,o;return function(){var r=yo(this,t),s=(this.style.removeProperty(t),yo(this,t));return r===s?null:r===n&&s===i?o:o=e(n=r,i=s)}}(t,i)).on("end.style."+t,Xs(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,o,r;return function(){var s=yo(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=yo(this,t)),s===l?null:s===i&&l===o?r:(o=l,r=e(i=s,a))}}(t,i,Hr(this,"style."+t,e))).each(function(t,e){var n,i,o,r,s="style."+e,a="end."+s;return function(){var l=Mr(this,t),u=l.on,h=null==l.value[s]?r||(r=Xs(e)):void 0;u===n&&o===h||(i=(n=u).copy()).on(a,o=h),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,o,r=n+"";return function(){var s=yo(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,qs(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Hr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Ys(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,o=zr(this.node(),n).tween,r=0,s=o.length;r<s;++r)if((i=o[r]).name===t)return i.value;return null}return this.each((null==e?jr:Ur)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Zs:js)(e,t)):zr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Us:Hs)(e,t)):zr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Ws(e,t)):zr(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Mr(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,o=n.size();return new Promise((function(r,s){var a={value:s},l={value:function(){0==--o&&r()}};n.each((function(){var n=Mr(this,i),o=n.on;o!==t&&((e=(t=o).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})),0===o&&r()}))},[Symbol.iterator]:ea[Symbol.iterator]};var na={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function ia(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}er.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,o,r=t.__transition,s=!0;if(r){for(o in e=null==e?null:e+"",r)(n=r[o]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[o]):s=!1;s&&delete t.__transition}}(this,t)}))},er.prototype.transition=function(t){var e,n;t instanceof Qs?(e=t._id,t=t._name):(e=ta(),(n=na).time=yr(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,r=0;r<o;++r)for(var s,a=i[r],l=a.length,u=0;u<l;++u)(s=a[u])&&Ar(s,t,e,u,a,n||ia(s,e));return new Qs(i,this._parents,t,e)};const{abs:oa,max:ra,min:sa}=Math;function aa(t){return{type:t}}function la(t){return"string"==typeof t?new Qo([[document.querySelector(t)]],[document.documentElement]):new Qo([[t]],$o)}function ua(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}["w","e"].map(aa),["n","s"].map(aa),["n","w","e","s","nw","ne","sw","se"].map(aa);const ha={passive:!1},ca={capture:!0,passive:!1};function da(t){t.stopImmediatePropagation()}function fa(t){t.preventDefault(),t.stopImmediatePropagation()}const pa=t=>()=>t;function _a(t,{sourceEvent:e,subject:n,target:i,identifier:o,active:r,x:s,y:a,dx:l,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function va(t){return!t.ctrlKey&&!t.button}function ma(){return this.parentNode}function ga(t,e){return null==e?{x:t.x,y:t.y}:e}function ya(){return navigator.maxTouchPoints||"ontouchstart"in this}function ba(){var t,e,n,i,o=va,r=ma,s=ga,a=ya,l={},u=lr("start","drag","end"),h=0,c=0;function d(t){t.on("mousedown.drag",f).filter(a).on("touchstart.drag",v).on("touchmove.drag",m,ha).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(s,a){if(!i&&o.call(this,s,a)){var l=y(this,r.call(this,s,a),s,a,"mouse");l&&(la(s.view).on("mousemove.drag",p,ca).on("mouseup.drag",_,ca),function(t){var e=t.document.documentElement,n=la(t).on("dragstart.drag",fa,ca);"onselectstart"in e?n.on("selectstart.drag",fa,ca):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(s.view),da(s),n=!1,t=s.clientX,e=s.clientY,l("start",s))}}function p(i){if(fa(i),!n){var o=i.clientX-t,r=i.clientY-e;n=o*o+r*r>c}l.mouse("drag",i)}function _(t){la(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,i=la(t).on("dragstart.drag",null);e&&(i.on("click.drag",fa,ca),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,n),fa(t),l.mouse("end",t)}function v(t,e){if(o.call(this,t,e)){var n,i,s=t.changedTouches,a=r.call(this,t,e),l=s.length;for(n=0;n<l;++n)(i=y(this,a,t,e,s[n].identifier,s[n]))&&(da(t),i("start",t,s[n]))}}function m(t){var e,n,i=t.changedTouches,o=i.length;for(e=0;e<o;++e)(n=l[i[e].identifier])&&(fa(t),n("drag",t,i[e]))}function g(t){var e,n,o=t.changedTouches,r=o.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<r;++e)(n=l[o[e].identifier])&&(da(t),n("end",t,o[e]))}function y(t,e,n,i,o,r){var a,c,f,p=u.copy(),_=ua(r||n,e);if(null!=(f=s.call(t,new _a("beforestart",{sourceEvent:n,target:d,identifier:o,active:h,x:_[0],y:_[1],dx:0,dy:0,dispatch:p}),i)))return a=f.x-_[0]||0,c=f.y-_[1]||0,function n(r,s,u){var v,m=_;switch(r){case"start":l[o]=n,v=h++;break;case"end":delete l[o],--h;case"drag":_=ua(u||s,e),v=h}p.call(r,t,new _a(r,{sourceEvent:s,subject:f,target:d,identifier:o,active:v,x:_[0]+a,y:_[1]+c,dx:_[0]-m[0],dy:_[1]-m[1],dispatch:p}),i)}}return d.filter=function(t){return arguments.length?(o="function"==typeof t?t:pa(!!t),d):o},d.container=function(t){return arguments.length?(r="function"==typeof t?t:pa(t),d):r},d.subject=function(t){return arguments.length?(s="function"==typeof t?t:pa(t),d):s},d.touchable=function(t){return arguments.length?(a="function"==typeof t?t:pa(!!t),d):a},d.on=function(){var t=u.on.apply(u,arguments);return t===u?d:t},d.clickDistance=function(t){return arguments.length?(c=(t=+t)*t,d):Math.sqrt(c)},d}_a.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var wa=Math.sqrt(50),xa=Math.sqrt(10),Ea=Math.sqrt(2);function Ta(t,e,n){var i=(e-t)/Math.max(0,n),o=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,o);return o>=0?(r>=wa?10:r>=xa?5:r>=Ea?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(r>=wa?10:r>=xa?5:r>=Ea?2:1)}function ka(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sa(t){let e=t,n=t,i=t;function o(t,e,o=0,r=t.length){if(o<r){if(0!==n(e,e))return r;do{const n=o+r>>>1;i(t[n],e)<0?o=n+1:r=n}while(o<r)}return o}return 2!==t.length&&(e=(e,n)=>t(e)-n,n=ka,i=(e,n)=>ka(t(e),n)),{left:o,center:function(t,n,i=0,r=t.length){const s=o(t,n,i,r-1);return s>i&&e(t[s-1],n)>-e(t[s],n)?s-1:s},right:function(t,e,o=0,r=t.length){if(o<r){if(0!==n(e,e))return r;do{const n=o+r>>>1;i(t[n],e)<=0?o=n+1:r=n}while(o<r)}return o}}}const Pa=Sa(ka),La=Pa.right,Aa=(Pa.left,Sa((function(t){return null===t?NaN:+t})).center,La);function Ia(t,e){var n,i=e?e.length:0,o=t?Math.min(i,t.length):0,r=new Array(o),s=new Array(i);for(n=0;n<o;++n)r[n]=Ba(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<o;++n)s[n]=r[n](t);return s}}function Ma(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function za(t,e){var n,i={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Ba(t[n],e[n]):o[n]=e[n];return function(t){for(n in i)o[n]=i[n](t);return o}}function Na(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,o=e.slice();return function(r){for(n=0;n<i;++n)o[n]=t[n]*(1-r)+e[n]*r;return o}}function Ba(t,e){var n,i=typeof e;return null==e||"boolean"===i?xs(e):("number"===i?Nr:"string"===i?(n=ls(e))?(e=n,Ts):Ls:e instanceof ls?Ts:e instanceof Date?Ma:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Na:Array.isArray(e)?Ia:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?za:Nr)(t,e)}function Ca(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Oa(t){return+t}var Ra=[0,1];function Fa(t){return t}function Da(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Za(t,e,n){var i=t[0],o=t[1],r=e[0],s=e[1];return o<i?(i=Da(o,i),r=n(s,r)):(i=Da(i,o),r=n(r,s)),function(t){return r(i(t))}}function ja(t,e,n){var i=Math.min(t.length,e.length)-1,o=new Array(i),r=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=Da(t[s],t[s+1]),r[s]=n(e[s],e[s+1]);return function(e){var n=Aa(t,e,1,i)-1;return r[n](o[n](e))}}function Ua(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ha(){return function(){var t,e,n,i,o,r,s=Ra,a=Ra,l=Ba,u=Fa;function h(){var t=Math.min(s.length,a.length);return u!==Fa&&(u=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(s[0],s[t-1])),i=t>2?ja:Za,o=r=null,c}function c(e){return null==e||isNaN(e=+e)?n:(o||(o=i(s.map(t),a,l)))(t(u(e)))}return c.invert=function(n){return u(e((r||(r=i(a,s.map(t),Nr)))(n)))},c.domain=function(t){return arguments.length?(s=Array.from(t,Oa),h()):s.slice()},c.range=function(t){return arguments.length?(a=Array.from(t),h()):a.slice()},c.rangeRound=function(t){return a=Array.from(t),l=Ca,h()},c.clamp=function(t){return arguments.length?(u=!!t||Fa,h()):u!==Fa},c.interpolate=function(t){return arguments.length?(l=t,h()):l},c.unknown=function(t){return arguments.length?(n=t,c):n},function(n,i){return t=n,e=i,h()}}()(Fa,Fa)}function Wa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Ga,Ka=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xa(t){if(!(e=Ka.exec(t)))throw new Error("invalid format: "+t);var e;return new Va({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Va(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function qa(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Ja(t){return(t=qa(Math.abs(t)))?t[1]:NaN}function Ya(t,e){var n=qa(t,e);if(!n)return t+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}Xa.prototype=Va.prototype,Va.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const $a={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ya(100*t,e),r:Ya,s:function(t,e){var n=qa(t,e);if(!n)return t+"";var i=n[0],o=n[1],r=o-(Ga=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return r===s?i:r>s?i+new Array(r-s+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+qa(t,Math.max(0,e+r-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Qa(t){return t}var tl,el,nl,il=Array.prototype.map,ol=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function rl(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,o,r,s,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(o=t,t=e,e=o),0===(s=Ta(t,e,n))||!isFinite(s))return[];if(s>0){let n=Math.round(t/s),i=Math.round(e/s);for(n*s<t&&++n,i*s>e&&--i,r=new Array(o=i-n+1);++a<o;)r[a]=(n+a)*s}else{s=-s;let n=Math.round(t*s),i=Math.round(e*s);for(n/s<t&&++n,i/s>e&&--i,r=new Array(o=i-n+1);++a<o;)r[a]=(n+a)/s}return i&&r.reverse(),r}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return function(t,e,n,i){var o,r=function(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/o;return r>=wa?o*=10:r>=xa?o*=5:r>=Ea&&(o*=2),e<t?-o:o}(t,e,n);switch((i=Xa(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ja(e)/3)))-Ja(Math.abs(t)))}(r,s))||(i.precision=o),nl(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ja(e)-Ja(t))+1}(r,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=function(t){return Math.max(0,-Ja(Math.abs(t)))}(r))||(i.precision=o-2*("%"===i.type))}return el(i)}(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,o,r=e(),s=0,a=r.length-1,l=r[s],u=r[a],h=10;for(u<l&&(o=l,l=u,u=o,o=s,s=a,a=o);h-- >0;){if((o=Ta(l,u,n))===i)return r[s]=l,r[a]=u,e(r);if(o>0)l=Math.floor(l/o)*o,u=Math.ceil(u/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,u=Math.floor(u*o)/o}i=o}return t},t}function sl(){var t=Ha();return t.copy=function(){return Ua(t,sl())},Wa.apply(t,arguments),rl(t)}tl=function(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Qa:(e=il.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var o=t.length,r=[],s=0,a=e[0],l=0;o>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),r.push(t.substring(o-=a,o+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return r.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Qa:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(il.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"−":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function c(t){var e=(t=Xa(t)).fill,n=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,_=t.comma,v=t.precision,m=t.trim,g=t.type;"n"===g?(_=!0,g="g"):$a[g]||(void 0===v&&(v=12),m=!0,g="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var y="$"===d?o:"#"===d&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===d?r:/[%p]/.test(g)?l:"",w=$a[g],x=/[defgprs%]/.test(g);function E(t){var o,r,l,d=y,E=b;if("c"===g)E=w(t)+E,t="";else{var T=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:w(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,i=1,o=-1;i<n;++i)switch(t[i]){case".":o=e=i;break;case"0":0===o&&(o=i),e=i;break;default:if(!+t[i])break t;o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t}(t)),T&&0==+t&&"+"!==c&&(T=!1),d=(T?"("===c?c:u:"-"===c||"("===c?"":c)+d,E=("s"===g?ol[8+Ga/3]:"")+E+(T&&"("===c?")":""),x)for(o=-1,r=t.length;++o<r;)if(48>(l=t.charCodeAt(o))||l>57){E=(46===l?s+t.slice(o+1):t.slice(o))+E,t=t.slice(0,o);break}}_&&!f&&(t=i(t,1/0));var k=d.length+t.length+E.length,S=k<p?new Array(p-k+1).join(e):"";switch(_&&f&&(t=i(S+t,S.length?p-E.length:1/0),S=""),n){case"<":t=d+t+E+S;break;case"=":t=d+S+t+E;break;case"^":t=S.slice(0,k=S.length>>1)+d+t+E+S.slice(k);break;default:t=S+d+t+E}return a(t)}return v=void 0===v?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),E.toString=function(){return t+""},E}return{format:c,formatPrefix:function(t,e){var n=c(((t=Xa(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Ja(e)/3))),o=Math.pow(10,-i),r=ol[8+i/3];return function(t){return n(o*t)+r}}}}({thousands:",",grouping:[3],currency:["$",""]}),el=tl.format,nl=tl.formatPrefix;const al=Math.PI,ll=2*al,ul=1e-6,hl=ll-ul;function cl(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function dl(){return new cl}cl.prototype=dl.prototype={constructor:cl,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,o,r){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(t,e,n,i,o){t=+t,e=+e,n=+n,i=+i,o=+o;var r=this._x1,s=this._y1,a=n-t,l=i-e,u=r-t,h=s-e,c=u*u+h*h;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(c>ul)if(Math.abs(h*a-l*u)>ul&&o){var d=n-r,f=i-s,p=a*a+l*l,_=d*d+f*f,v=Math.sqrt(p),m=Math.sqrt(c),g=o*Math.tan((al-Math.acos((p+c-_)/(2*v*m)))/2),y=g/m,b=g/v;Math.abs(y-1)>ul&&(this._+="L"+(t+y*u)+","+(e+y*h)),this._+="A"+o+","+o+",0,0,"+ +(h*d>u*f)+","+(this._x1=t+b*a)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,o,r){t=+t,e=+e,r=!!r;var s=(n=+n)*Math.cos(i),a=n*Math.sin(i),l=t+s,u=e+a,h=1^r,c=r?i-o:o-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>ul||Math.abs(this._y1-u)>ul)&&(this._+="L"+l+","+u),n&&(c<0&&(c=c%ll+ll),c>hl?this._+="A"+n+","+n+",0,1,"+h+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u):c>ul&&(this._+="A"+n+","+n+",0,"+ +(c>=al)+","+h+","+(this._x1=t+n*Math.cos(o))+","+(this._y1=e+n*Math.sin(o))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const fl=dl;function pl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function _l(t){return function(){return t}}function vl(t){this._context=t}function ml(t){return new vl(t)}function gl(t){return t[0]}function yl(t){return t[1]}function bl(t,e){var n=_l(!0),i=null,o=ml,r=null;function s(s){var a,l,u,h=(s=pl(s)).length,c=!1;for(null==i&&(r=o(u=fl())),a=0;a<=h;++a)!(a<h&&n(l=s[a],a,s))===c&&((c=!c)?r.lineStart():r.lineEnd()),c&&r.point(+t(l,a,s),+e(l,a,s));if(u)return r=null,u+""||null}return t="function"==typeof t?t:void 0===t?gl:_l(t),e="function"==typeof e?e:void 0===e?yl:_l(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:_l(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:_l(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:_l(!!t),s):n},s.curve=function(t){return arguments.length?(o=t,null!=i&&(r=o(i)),s):o},s.context=function(t){return arguments.length?(null==t?i=r=null:r=o(i=t),s):i},s}function wl(t,e,n){var i=null,o=_l(!0),r=null,s=ml,a=null;function l(l){var u,h,c,d,f,p=(l=pl(l)).length,_=!1,v=new Array(p),m=new Array(p);for(null==r&&(a=s(f=fl())),u=0;u<=p;++u){if(!(u<p&&o(d=l[u],u,l))===_)if(_=!_)h=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),c=u-1;c>=h;--c)a.point(v[c],m[c]);a.lineEnd(),a.areaEnd()}_&&(v[u]=+t(d,u,l),m[u]=+e(d,u,l),a.point(i?+i(d,u,l):v[u],n?+n(d,u,l):m[u]))}if(f)return a=null,f+""||null}function u(){return bl().defined(o).curve(s).context(r)}return t="function"==typeof t?t:void 0===t?gl:_l(+t),e="function"==typeof e?e:_l(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?yl:_l(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:_l(+e),i=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:_l(+e),l):t},l.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:_l(+t),l):i},l.y=function(t){return arguments.length?(e="function"==typeof t?t:_l(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:_l(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:_l(+t),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(i).y(e)},l.defined=function(t){return arguments.length?(o="function"==typeof t?t:_l(!!t),l):o},l.curve=function(t){return arguments.length?(s=t,null!=r&&(a=s(r)),l):s},l.context=function(t){return arguments.length?(null==t?r=a=null:a=s(r=t),l):r},l}function xl(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function El(t,e){this._context=t,this._k=(1-e)/6}function Tl(t,e){this._context=t,this._alpha=e}Array.prototype.slice,vl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt,Math.PI,El.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:xl(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:xl(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new El(t,e)}return n.tension=function(e){return t(+e)},n}(0),Tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var i=t._x1,o=t._y1,r=t._x2,s=t._y2;if(t._l01_a>1e-12){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,o=(o*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>1e-12){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*u+t._x1*t._l23_2a-e*t._l12_2a)/h,s=(s*u+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(i,o,r,s,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const kl=function t(e){function n(t){return e?new Tl(t,e):new El(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Sl(t,e,n){this.k=t,this.x=e,this.y=n}Sl.prototype={constructor:Sl,scale:function(t){return 1===t?this:new Sl(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Sl(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Sl(1,0,0),Sl.prototype;var Pl,Ll=function(){function t(t){var e=this;this.parentElements=[],this.openedElement={type:"dimension",key:"dimension"};var n=la("#sidebar_menu");this.builder=t;var i=this;n.selectAll(".sidebar_entry_list#splines .sidebar_entry.spline").on("click",(function(t){"dimension"===this.id?i.openElement({type:"dimension",key:this.id}):i.openElement({type:"spline",key:this.id}),t.stopPropagation()})).on("contextmenu",(function(t){"dimension"===this.id?i.openElement({type:"dimension",key:"dimension"}):i.openElement({type:"spline",key:this.id}),t.stopPropagation(),t.preventDefault()})).selectAll(".edit_grid_button").on("click",(function(t){i.openElement({type:"grid",key:this.parentElement.id}),t.stopPropagation()})),n.select("#splines_grid_view_button").on("click",(function(t){var e=!n.select("#splines").classed("compact");n.select("#splines").classed("compact",e),n.select("#splines_grid_view_button").attr("src",e?"list-view.svg":"grid-view.svg")})),n.select("#slices_grid_view_button").on("click",(function(t){var e=!n.select("#slices").classed("compact");n.select("#slices").classed("compact",e),n.select("#slices_grid_view_button").attr("src",e?"list-view.svg":"grid-view.svg")})),n.select("#layouts_grid_view_button").on("click",(function(t){var e=!n.select("#layouts").classed("compact");n.select("#layouts").classed("compact",e),n.select("#layouts_grid_view_button").attr("src",e?"list-view.svg":"grid-view.svg")})),n.select("#biomes_grid_view_button").on("click",(function(t){var e=!n.select("#biomes").classed("compact");n.select("#biomes").classed("compact",e),n.select("#vanilla_biomes").classed("compact",e),n.select("#biomes_grid_view_button").attr("src",e?"list-view.svg":"grid-view.svg")})),n.select("#assign_slices_button").on("click",(function(t){e.openElement({type:"assign_slices"}),t.preventDefault()})).on("contextmenu",(function(t){e.openElement({type:"assign_slices"}),t.preventDefault()})),n.select("#edit_slices_grid_button").on("click",(function(t){e.openElement({type:"grid",key:"slice"}),t.stopPropagation()})),n.select("#add_slices_button").on("click",(function(t){var n=Ql.create(e.builder,"New Slice",new Yl);e.builder.hasChanges=!0,e.openElement({type:"slice",key:n.getKey()}),t.stopPropagation()})),n.select("#hide_all_slices_button").on("click",(function(t){var n=e.builder.slices.every((function(t){return!t.hidden}));e.builder.slices.forEach((function(t){return t.hidden=n})),Vl.getInstance().refresh({biome:{}}),t.stopPropagation()})),n.select("#add_layout_button").on("click",(function(t){var n=Ql.create(e.builder,"New Layout",new $l);e.builder.hasChanges=!0,e.openElement({type:"layout",key:n.getKey()}),t.stopPropagation()})),n.select("#hide_all_layouts_button").on("click",(function(t){var n=e.builder.layouts.every((function(t){return!t.hidden}));e.builder.layouts.forEach((function(t){return t.hidden=n})),e.builder.hasChanges=!0,Vl.getInstance().refresh({biome:{}}),t.stopPropagation()})),n.select("#edit_layout_grid_button").on("click",(function(t){e.openElement({type:"grid",key:"layout"}),t.stopPropagation()})),n.select("#add_biome_button").on("click",(function(t){var i=prompt("Input biome name:","new:biome");null!==i&&(Pi.create(e.builder,i,"#888888"),e.builder.hasChanges=!0,e.refresh(),e.resizeBottomSpacer(n),t.stopPropagation())})),n.select("#hide_all_biomes_button").on("click",(function(t){var n=e.builder.biomes.every((function(t){return!t.hidden}));e.builder.biomes.forEach((function(t){return t.hidden=n})),Vl.getInstance().refresh({biome:{}}),t.stopPropagation()}));var o=n.select("#biome_search_bar");o.on("input",(function(t){n.select("#sidebar_bottom_spacer").style("height","10000pt"),n.select(".sidebar_entry_list#biomes").selectAll(".sidebar_entry").data(e.builder.biomes,(function(t){return t.getKey()})).classed("hidden",(function(t){return!t.name.includes(o.property("value"))})),n.select(".sidebar_entry_list#vanilla_biomes").selectAll(".sidebar_entry").data(Array.from(e.builder.vanillaBiomes.values()).filter((function(t){return!e.builder.gridElements.has(t.getKey())})),(function(t){return t.getKey()})).classed("hidden",(function(t){return!t.name.includes(o.property("value"))})),e.resizeBottomSpacer(n)})),n.on("scroll",(function(t){e.resizeBottomSpacer(n)}))}return t.prototype.resizeBottomSpacer=function(t){var e=t.select("#sidebar_bottom_spacer"),n=e.node().getBoundingClientRect().top-t.node().getBoundingClientRect().top,i=Math.max(t.node().clientHeight-n-20,0);e.style("height",i+"px")},t.prototype.openElement=function(t,e,n){var i,o;void 0===e&&(e=!1),void 0===n&&(n=!1),"biome"!==t.type&&"vanilla_biome"!==t.type&&(e?this.parentElements.push(this.openedElement):n||(this.parentElements=[]),this.openedElement=null!=t?t:this.openedElement,("assign_slices"===this.openedElement.type&&"slice"!==(null===(i=this.selectedElement)||void 0===i?void 0:i.type)||"layout"===this.openedElement.type&&"slice"===(null===(o=this.selectedElement)||void 0===o?void 0:o.type)||this.openedElement.type.startsWith("modify_")||"spline"===this.openedElement.type||"spline_grid"===this.openedElement.type)&&(this.selectedElement=void 0),Vl.getInstance().splineEditor.zoom=.01,Vl.getInstance().refresh({}))},t.prototype.back=function(){0!=this.parentElements.length&&this.openElement(this.parentElements.pop(),!1,!0)},t.prototype.selectElement=function(t){"assign_slices"===this.openedElement.type&&"slice"!==t.type||"layout"===this.openedElement.type&&"slice"===t.type||this.openedElement.type.startsWith("modify_")||(this.selectedElement=t,this.refresh())},t.prototype.refresh=function(){var t=this,e=la("#sidebar_menu"),n=this;e.selectAll(".sidebar_entry_list#splines .sidebar_entry.spline").classed("open",(function(){return"spline"===n.openedElement.type&&this.id===n.openedElement.key||"dimension"===n.openedElement.type&&"dimension"===this.id})).selectAll(".edit_grid_button").classed("open",(function(){return"grid"===n.openedElement.type&&this.parentElement.id===n.openedElement.key})),e.select("#assign_slices_button").classed("open","assign_slices"===this.openedElement.type),e.select("#hide_all_slices_button").classed("enabled",!this.builder.slices.every((function(t){return!t.hidden}))),e.select("#edit_slices_grid_button").classed("open","grid"===this.openedElement.type&&"slice"===this.openedElement.key),e.select("#hide_all_layouts_button").classed("enabled",!this.builder.layouts.every((function(t){return!t.hidden}))),e.select("#edit_layout_grid_button").classed("open","grid"===this.openedElement.type&&"layout"===this.openedElement.key),e.select("#hide_all_biomes_button").classed("enabled",!this.builder.biomes.every((function(t){return!t.hidden}))),this.handleElementDivs(this.builder.slices,"slice",e.select(".sidebar_entry_list#slices"),120,!1,!1),this.handleElementDivs(this.builder.layouts,"layout",e.select(".sidebar_entry_list#layouts"),80,!1,!1),this.handleElementDivs(this.builder.biomes,"biome",e.select(".sidebar_entry_list#biomes"),44,!1,!0),this.handleElementDivs(Array.from(this.builder.vanillaBiomes.values()).filter((function(e){return!t.builder.gridElements.has(e.getKey())})),"vanilla_biome",e.select(".sidebar_entry_list#vanilla_biomes"),44,!0,!0)},t.prototype.handleElementDivs=function(t,e,n,i,o,r){var s=this,a=la("#layoutEditorTooltip"),l=n.selectAll(".sidebar_entry").data(t,(function(t){return t.getKey()})).join((function(l){var u=l.append("div").classed("sidebar_entry",!0).classed(e,!0);if(r?u.append("input").attr("type","color").classed("color_selector",!0).attr("disabled",o?"":void 0).property("value",(function(t){return t.color})).on("change",(function(t,e){e.setColor(this.value),Vl.getInstance().refresh({biome:{}})})):u.append("canvas").classed("grid",!0).attr("width",i).attr("height",i).each((function(t,e,n){return t.getRenderer().draw(n[e].getContext("2d"),0,0,i,i,{},!0)})),u.append("span").classed("name",!0),u.attr("draggable",!o),o||(u.filter((function(t){return t.allowEdit})).append("img").classed("button",!0).classed("edit",!0).attr("src","edit-pen.svg").attr("title","Rename").on("click",(function(t,e){var n=prompt("Edit name of "+e.constructor.name,e.name);null!==n&&(e.name=n,s.refresh(),t.stopPropagation())})),u.append("img").classed("button",!0).classed("delete",!0).attr("src","trash-bin.svg").attr("title","Delete").on("click",(function(t,e){confirm("Deleting "+e.constructor.name+' "'+e.name+'"')&&(s.builder.hasChanges=!0,s.builder.removeGridElement(e),Vl.getInstance().refresh({biome:{}}),t.stopPropagation())})),u.append("img").classed("button",!0).classed("hide",!0).attr("src","eye.svg").attr("title","Hide/Show").on("click",(function(t,e){e.hidden=!e.hidden,Vl.getInstance().refresh({biome:{}}),t.stopPropagation()}))),u.on("click",(function(t,n){s.selectElement({type:e,key:n.getKey()})})),u.on("dblclick",(function(t,n){s.openElement({type:e,key:n.getKey()}),t.preventDefault()})),u.on("contextmenu",(function(t,n){s.openElement({type:e,key:n.getKey()}),t.preventDefault()})),u.on("mouseover",(function(t,e){if(n.classed("compact")){var i=this.getBoundingClientRect();a.select(".name").text(e.name),a.style("left",i.left+"px"),a.style("top",i.bottom+"px"),a.classed("hidden",!1),a.select(".noises").classed("hidden",!0)}})),u.on("mouseleave",(function(t,e){a.classed("hidden",!0)})),!o){var h=s;u.on("dragstart",(function(t,n){a.classed("hidden",!0),h.dragType=e,h.dragKey=n.getKey(),this.classList.add("dragged")})),u.on("dragend",(function(t,e){h.dragType=void 0,h.dragKey=void 0,this.classList.remove("dragged")})),u.on("dragover",(function(n,i){h.dragover(this,e,t,i)&&n.preventDefault()})),u.on("dragleave",(function(t,e){var n=this;setTimeout((function(){return n.classList.remove("dragover_up","dragover_down")}),20),t.preventDefault()})),u.on("drop",(function(n,i){h.drop(this,e,t,i)&&(n.preventDefault(),h.refresh())}))}return u}));l.classed("open",(function(t){var e;return(null===(e=s.openedElement)||void 0===e?void 0:e.key)===t.getKey()})),l.classed("selected",(function(t){var e;return(null===(e=s.selectedElement)||void 0===e?void 0:e.key)===t.getKey()})),l.select("canvas.grid").filter((function(t){return t.getKey()===s.openedElement.key})).each((function(t,e,n){var o=n[e].getContext("2d");o.clearRect(0,0,i,i),t.getRenderer().draw(o,0,0,i,i,{},!0)})),l.select("span.name").text((function(t){return t.name})),l.select("input.color_selector").attr("aria-label",(function(t){return"Color of Biome "+t.name})),l.select("img.button.hide").classed("enabled",(function(t){return t.hidden}))},t.prototype.dragover=function(t,e,n,i){var o,r,s=this;return this.dragType===e&&this.dragKey!==i.getKey()&&(n.findIndex((function(t){return t.getKey()===i.getKey()}))<n.findIndex((function(t){return t.getKey()===s.dragKey}))?t.classList.add("dragover_up"):t.classList.add("dragover_down"),this.lastDragedOverDiv!=t&&(null===(r=null===(o=this.lastDragedOverDiv)||void 0===o?void 0:o.classList)||void 0===r||r.remove("dragover_up","dragover_down"),this.lastDragedOverDiv=t),!0)},t.prototype.drop=function(t,e,n,i){var o=this;if(t.classList.remove("dragover_up","dragover_down"),this.dragType===e&&this.dragKey!==i.getKey()){var r=n.indexOf(i),s=n.findIndex((function(t){return t.getKey()===o.dragKey}));return n.splice(r,0,n.splice(s,1)[0]),!0}return!1},t}(),Al=function(){function t(t){this.builder=t,this.splineCanvas=document.getElementById("splineDisplayCanvas"),this.weirdnesses=[]}return t.prototype.setPos=function(t){this.pos=t},t.prototype.setWeirdnesses=function(t){this.weirdnesses=t},t.prototype.refresh=function(){var t,e,n,i,o=0,r=la("#splineDisplaySvg"),s=parseInt(r.style("width"),10),a=parseInt(r.style("height"),10),l=sl().domain([-1.5,1.5]).range([0,s]),u=sl().domain([-.3,1.2]).range([a,0]),h=sl().domain([8,0]).range([a,0]),c=sl().domain([0,1]).range([a-10,0]),d=[],f=[],p=[];if(this.pos)for(var _=-1.5;_<=1.51;_+=.05)d.push([_,this.builder.splines.offset.apply(this.pos.c,this.pos.e,_)]),f.push([_,this.builder.splines.factor.apply(this.pos.c,this.pos.e,_)]),p.push([_,this.builder.splines.jaggedness.apply(this.pos.c,this.pos.e,_)]);else o=-.3;r.select("rect.water").attr("x",0).attr("y",u(o)).attr("width",s).attr("height",a-u(o));var v=wl().x((function(t){return l(t[0])})).y0((function(t){return u(t[1])})).y1((function(t){return u(-1.5)})).curve(kl.alpha(.5)),m=bl().x((function(t){return l(t[0])})).y((function(t){return h(t[1])})).curve(kl.alpha(.5)),g=bl().x((function(t){return l(t[0])})).y((function(t){return c(t[1])})).curve(kl.alpha(.5));r.select("path.terrain").datum(d).attr("d",v),r.select("path.factor").datum(f).attr("d",m),r.select("path.roughness").datum(p).attr("d",g),r.select("g.weirdnesses").selectAll("rect").data(this.weirdnesses).join("rect").attr("x",(function(t){return l(t.min)})).attr("y",-5).attr("width",(function(t){return l(t.max)-l(t.min)})).attr("height",a+10),r.select("line.weirdness").attr("x1",l(null!==(e=null===(t=this.pos)||void 0===t?void 0:t.w)&&void 0!==e?e:-2)).attr("x2",l(null!==(i=null===(n=this.pos)||void 0===n?void 0:n.w)&&void 0!==i?i:-2)).attr("y1",-5).attr("y2",a+5)},t}(),Il=function(){function t(t){this.points=t,this.order()}return t.prototype.toJSON=function(){for(var t=[],e=0,n=this.points;e<n.length;e++){var i=n[e];t.push({location:i.location,value:i.value,derivative:i.derivative_left}),i.derivative_left!==i.derivative_right&&t.push({location:i.location,value:i.value,derivative:i.derivative_right})}return{coordinate:"weirdness",points:t}},t.fromJSON=function(e){if("ridges"===e.coordinate||"weirdness"===e.coordinate){for(var n=[],i="ridges"===e.coordinate,o=function(e){var o=e.location,s=e.derivative,a="number"==typeof e.value?{apply:function(t){return e.value}}:t.fromJSON(e.value);if(i)for(var l=r.inversPeaksAndValleys(o),u=0;u<l.weirdnesses.length;u++){var h=l.derivative_factors[u];"number"==typeof h?n.push({location:l.weirdnesses[u],derivative_left:s*h,derivative_right:s*h,value:a.apply(l.weirdnesses[u])}):n.push({location:l.weirdnesses[u],derivative_left:s*h[0],derivative_right:s*h[1],value:a.apply(l.weirdnesses[u])})}else n.length>0&&Math.abs(n[n.length-1].location-o)<1e-5?n[n.length-1].derivative_right=s:n.push({location:o,derivative_left:s,derivative_right:s,value:a.apply(o)})},r=this,s=0,a=e.points;s<a.length;s++)o(a[s]);return new t(n)}console.warn("Trying to create SimpleSpline from non weirdness parameter")},t.peaksAndValleys=function(t){return 3*-(Math.abs(Math.abs(t)-.6666667)-.33333334)},t.inversPeaksAndValleys=function(t){if(t>1||t<-1)return{weirdnesses:[],derivative_factors:[]};var e=t/3-.33333334;return e-.6666667<-1.5?{weirdnesses:[-e-.6666667,e+.6666667],derivative_factors:[-3,3]}:1===t?{weirdnesses:[-.6666667,.6666667],derivative_factors:[[3,-3],[3,-3]]}:-1===t?{weirdnesses:[-1.33333334,0,1.33333334],derivative_factors:[3,[-3,3],-3]}:{weirdnesses:[e-.6666667,-e-.6666667,e+.6666667,.6666667-e],derivative_factors:[3,-3,3,-3]}},t.prototype.order=function(){this.points.sort((function(t,e){return t.location-e.location}))},t.prototype.apply=function(t){var e=this,n=t,i=Dn(0,this.points.length,(function(t){return n<e.points[t].location}))-1,o=this.points.length-1;if(i<0)return this.points[0].value+this.points[0].derivative_left*(n-this.points[0].location);if(i===o)return this.points[o].value+this.points[o].derivative_right*(n-this.points[o].location);var r=this.points[i].location,s=this.points[i+1].location,a=this.points[i].derivative_right,l=this.points[i+1].derivative_left,u=(n-r)/(s-r),h=this.points[i].value,c=this.points[i+1].value,d=a*(s-r)-(c-h),f=-l*(s-r)+(c-h);return On(u,h,c)+u*(1-u)*On(u,d,f)},t.prototype.derivative=function(t,e){var n=this;void 0===e&&(e="left");var i=t,o=this.points.find((function(t){return t.location===i}));if(o)return"left"===e?o.derivative_left:o.derivative_right;var r=Dn(0,this.points.length,(function(t){return i<n.points[t].location}))-1,s=this.points.length-1;if(r<0)return this.points[0].derivative_left;if(r===s)return this.points[s].derivative_right;var a=this.points[r].location,l=this.points[r+1].location,u=this.points[r].derivative_right,h=this.points[r+1].derivative_left,c=(i-a)/(l-a),d=this.points[r].value,f=this.points[r+1].value,p=u*(l-a)-(f-d),_=-h*(l-a)+(f-d);return(-d+f+p+2*c*(_-2*p)+3*c*c*(p-_))/(l-a)},t}(),Ml=function(){function t(t){var e=this;this.builder=t,this.title=document.getElementById("layoutName"),this.hide(),this.zoom=1;var n=la("#splineEditorDiv"),i=parseInt(n.style("width"),10),o=parseInt(n.style("height"),10)-20;la("#splineEditorDiv").append("div").classed("zoomDiv",!0).style("width",i).style("height",o).on("wheel",(function(t){var n=la("#splineEditorDiv"),i=parseInt(n.style("width"),10),o=parseInt(n.style("height"),10)-30,r=(n.property("scrollTop")+.5*i)/e.zoom,s=(n.property("scrollLeft")+.5*o)/e.zoom;e.zoom=Math.max(e.zoom*(t.wheelDelta>0?1.15:1/1.15),.01),e.refresh(),n.property("scrollTop",r*e.zoom-.5*i),n.property("scrollLeft",s*e.zoom-.5*o),t.preventDefault()})).call(ba().filter((function(t){return 2===t.button})).on("start",(function(t,e){})).on("drag",(function(t,e){n.property("scrollTop",n.property("scrollTop")-t.dy),n.property("scrollLeft",n.property("scrollLeft")-t.dx)})).on("end",(function(t,e){}))).on("contextmenu",(function(t){return t.preventDefault()}))}return t.prototype.dragLocationValue=function(t,e,n,i,o,r,s){var a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x,E,T,k,S,P,L,A=Vl.getInstance().sidebarManager.openedElement.key;if(i){var I=n?void 0:s.spline.points.find((function(e){return Math.abs(e.location+t)<.1})),M=null!==(_=null!==(d=null!==(u=s.col>0?null===(l=null===(a=this.builder.splines[A].splines[s.row][s.col-1])||void 0===a?void 0:a.points)||void 0===l?void 0:l.find((function(e){return Math.abs(e.location-t)<.1})):void 0)&&void 0!==u?u:s.col<this.builder.splines[A].erosions.length-1?null===(c=null===(h=this.builder.splines[A].splines[s.row][s.col+1])||void 0===h?void 0:h.points)||void 0===c?void 0:c.find((function(e){return Math.abs(e.location-t)<.1})):void 0)&&void 0!==d?d:s.row>0?null===(p=null===(f=this.builder.splines[A].splines[s.row-1][s.col])||void 0===f?void 0:f.points)||void 0===p?void 0:p.find((function(e){return Math.abs(e.location-t)<.1})):void 0)&&void 0!==_?_:s.row<this.builder.splines[A].continentalnesses.length-1?null===(m=null===(v=this.builder.splines[A].splines[s.row+1][s.col])||void 0===v?void 0:v.points)||void 0===m?void 0:m.find((function(e){return Math.abs(e.location-t)<.1})):void 0,z=s.spline.points.find((function(t){return Math.abs(t.value-e)<.05&&t!==o&&(!n||t!==r)}));if(this.snapModeLocation="none",this.snapModeValue="none",I&&(t=-I.location,this.snapModeLocation="self"),z&&(e=z.value,this.snapModeValue="self"),M&&("none"===this.snapModeLocation||"none"===this.snapModeValue)){t=M.location,this.snapModeLocation="neighbor";var N=null!==(S=null!==(E=null!==(b=s.col>0?null===(y=null===(g=this.builder.splines[A].splines[s.row][s.col-1])||void 0===g?void 0:g.points)||void 0===y?void 0:y.find((function(n){return n.location===t&&Math.abs(n.value-e)<.05})):void 0)&&void 0!==b?b:s.col<this.builder.splines[A].erosions.length-1?null===(x=null===(w=this.builder.splines[A].splines[s.row][s.col+1])||void 0===w?void 0:w.points)||void 0===x?void 0:x.find((function(n){return n.location===t&&Math.abs(n.value-e)<.05})):void 0)&&void 0!==E?E:s.row>0?null===(k=null===(T=this.builder.splines[A].splines[s.row-1][s.col])||void 0===T?void 0:T.points)||void 0===k?void 0:k.find((function(n){return n.location===t&&Math.abs(n.value-e)<.05})):void 0)&&void 0!==S?S:s.row<this.builder.splines[A].continentalnesses.length-1?null===(L=null===(P=this.builder.splines[A].splines[s.row+1][s.col])||void 0===P?void 0:P.points)||void 0===L?void 0:L.find((function(n){return n.location===t&&Math.abs(n.value-e)<.05})):void 0;N&&(e=N.value,this.snapModeValue="neighbor")}}o.location=t,o.value=e,this.dragValue=e,this.dragLocation=t,this.dragCol=s.col,this.dragRow=s.row,r&&n&&(r.location=-t,r.value=e),s.spline.order()},t.prototype.draw=function(t){var e=this,n=Vl.getInstance().sidebarManager.openedElement.key,i=this.builder.splines[n].erosions.length,o=this.builder.splines[n].continentalnesses.length,r=la("#splineEditorDiv"),s=r.select(".zoomDiv"),a=Math.min(parseInt(r.style("width"),10)/i-10,parseInt(r.style("height"),10)/o-10)/50;this.zoom<a&&(this.zoom=a);var l=50*this.zoom;la("#splineEditorDiv .zoomDiv").style("width",(l+10)*i).style("height",(l+10)*o);var u,h,c=sl().domain([-1.5,1.5]).range([0,l]),d=3/l;"offset"===n?(u=sl().domain([-.3,1.6]).range([l,0]),h=-1.9/l):"factor"===n?(u=sl().domain([8,0]).range([l,0]),h=8/l):"jaggedness"===n&&(u=sl().domain([0,2]).range([.9*l,0]),h=-2/(.9*l));var f,p,_,v=d*d/h/h,m=wl().x((function(t){return c(t[0])})).y0((function(t){return u(-.3)})).y1((function(t){return u(t[1])})),g=bl().x((function(t){return c(t[0])})).y((function(t){return u(t[1])})),y=this,b=s.selectAll("div.row"+(t?"#row_"+t.row:"")).data(this.builder.splines[n].splines).join((function(t){var e=t.append("div").classed("row",!0).attr("id",(function(t,e){return"row_"+e}));return e})).selectAll("svg"+(t?"#col_"+t.col:"")).data((function(t,e){return t.map((function(t,n){return{spline:t,row:e,col:n}}))})).join((function(t){var e=t.append("svg").attr("id",(function(t,e){return"col_"+e}));e.append("rect").classed("water",!0),e.append("image").classed("add",!0).attr("href","add-gray.svg");var n=e.append("g").classed("splines",!0);return n.append("path").classed("spline",!0),n.append("path").classed("spline_pointer",!0),e.append("line").classed("value_indicator",!0).classed("snap_indicator",!0),e.append("line").classed("location_indicator",!0).classed("snap_indicator",!0),e.append("line").classed("mirror_location_indicator",!0).classed("snap_indicator",!0),e.append("g").classed("spline_points",!0),e})).attr("width",l).attr("height",l);b.select("rect.water").attr("x",0).attr("y",u(0)).attr("width",l).attr("height",l-u(0)).classed("hide",(function(t){return"offset"!==n||void 0===t.spline})),b.select(".add").classed("hide",(function(t){return void 0!==t.spline})).attr("width",l).attr("height",l),b.on("click",(function(t,i){i.spline||(y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0,e.builder.splines[n].createSpline(i.row,i.col),Vl.getInstance().refresh({spline:!0}))}));var w,x=b.selectAll("g.splines").data((function(t){var e=[];if(t.spline){for(var n=-1.5;n<=1.5001;n+=.05)e.push([n,t.spline.apply(n)]);for(var i=0,o=t.spline.points;i<o.length;i++)n=o[i],e.push([n.location,n.value]);e.sort((function(t,e){return t[0]-e[0]}))}else e.push([0,0]);return[e]}));x.select(".spline").datum((function(t){return t})).classed("area","offset"===n).attr("d","offset"===n?m:g),x.select("path.spline_pointer").datum((function(t){return t})).attr("d",g).call(ba().filter((function(t){return!t.button})).on("start",(function(t,e){var i=la(this.parentElement.parentElement).datum().spline;y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0,_=Math.abs(i.apply(c.invert(t.x))-i.apply(-c.invert(t.x)))<1e-5&&!t.sourceEvent.ctrlKey&&!t.sourceEvent.metaKey,f={location:c.invert(t.x),value:i.apply(c.invert(t.x)),derivative_left:i.derivative(c.invert(t.x)),derivative_right:i.derivative(c.invert(t.x))},i.points.push(f),_&&(p={location:-f.location,value:f.value,derivative_left:-f.derivative_right,derivative_right:-f.derivative_left},i.points.push(p)),i.order()})).on("drag",(function(t,e){var n=la(this.parentElement.parentElement).datum(),i=!t.sourceEvent.altKey,o=c.invert(t.x),r=u.invert(t.y);y.dragLocationValue(o,r,_,i,f,p,n),y.refresh()})).on("end",(function(t,e){if(y.snapModeLocation="none",y.snapModeValue="none",0===f.location&&_){var n=la(this.parentElement.parentElement).datum().spline,i=n.points.indexOf(f),o=n.points.indexOf(p);i>o?f.derivative_left=p.derivative_left:f.derivative_right=p.derivative_right,n.points.splice(o,1)}Vl.getInstance().refresh({spline:!0})})));var E=b.select("g.spline_points ").selectAll("g").data((function(t){var e,n;return null!==(n=null===(e=t.spline)||void 0===e?void 0:e.points)&&void 0!==n?n:[]})).join((function(t){var e=t.append("g").classed("handle",!0);return e.append("circle"),e.append("line").classed("handle_line_left",!0).classed("handle_line",!0),e.append("line").classed("handle_line_left_pointer",!0).classed("handle_line_pointer",!0),e.append("line").classed("handle_line_right",!0).classed("handle_line",!0),e.append("line").classed("handle_line_right_pointer",!0).classed("handle_line_pointer",!0),e})).on("contextmenu",(function(t,e){var i=la(this.parentElement).datum();y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0;var o=i.spline.points.indexOf(e);i.spline.points.splice(o,1);var r=i.spline.points.findIndex((function(t){return t.location===-e.location&&t.value===e.value&&t.derivative_left===-e.derivative_right&&t.derivative_right===-e.derivative_left}));r>-1&&!t.ctrlKey&&!t.metaKey&&i.spline.points.splice(r,1),0===i.spline.points.length&&(y.builder.splines[n].splines[i.row][i.col]=void 0),Vl.getInstance().refresh({spline:!0}),t.preventDefault()})).call(ba().filter((function(t){return!t.button})).on("start",(function(t,e){la(this).classed("dragged",!0);var i=la(this.parentElement).datum().spline;y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0,Math.pow(c(e.location)-t.x,2)+Math.pow(u(e.value)-t.y,2)<25?(w="value",t.sourceEvent.ctrlKey||t.sourceEvent.metaKey?(_=!1,p=void 0):0===e.location?(p={location:0,value:e.value,derivative_left:e.derivative_right,derivative_right:e.derivative_right},i.points.push(p),e.derivative_right=e.derivative_left,_=!0):(p=i.points.find((function(t){return t.location===-e.location&&t.value===e.value})),_=void 0!==p)):e.derivative_left!==e.derivative_right||t.sourceEvent.shiftKey?c(e.location)>t.x?(w="derivative_left",p=i.points.find((function(t){return t.location===-e.location&&t.value===e.value&&t.derivative_right===-e.derivative_left})),_=p&&!t.sourceEvent.ctrlKey&&!t.sourceEvent.metaKey):(w="derivative_right",p=i.points.find((function(t){return t.location===-e.location&&t.value===e.value&&t.derivative_left===-e.derivative_right})),_=p&&!t.sourceEvent.ctrlKey&&!t.sourceEvent.metaKey):(w="derivative",p=i.points.find((function(t){return t.location===-e.location&&t.value===e.value&&t.derivative_left===-e.derivative_right&&t.derivative_right===-e.derivative_left})),_=p&&!t.sourceEvent.ctrlKey&&!t.sourceEvent.metaKey)})).on("drag",(function(t,e){var n=la(this.parentElement).datum(),i=!t.sourceEvent.altKey;if("value"===w){var o=c.invert(t.x),r=u.invert(t.y);y.dragLocationValue(o,r,_,i,e,p,n)}else{var s=c.invert(t.x)-e.location,a=u.invert(t.y)-e.value;if(Math.abs(s)>.001){var l=a/s;Math.abs(l)<.1&&(l=0),"derivative_left"===w?Math.abs(l-e.derivative_right)<.2?l=e.derivative_right:!_&&Math.abs(l+(null==p?void 0:p.derivative_right))<.2&&(l=-p.derivative_right):"derivative_right"===w?Math.abs(l-e.derivative_left)<.2?l=e.derivative_left:!_&&Math.abs(l+(null==p?void 0:p.derivative_left))<.2&&(l=-p.derivative_left):"derivative"===w&&(!_&&Math.abs(l-(null==p?void 0:p.derivative_left))<.2?l=-p.derivative_left:!_&&Math.abs(l+(null==p?void 0:p.derivative_right))<.2&&(l=-p.derivative_right)),"derivative_right"!==w&&(e.derivative_left=l,p&&_&&(p.derivative_right=-l)),"derivative_left"!==w&&(e.derivative_right=l,p&&_&&(p.derivative_left=-l))}}y.refresh()})).on("end",(function(t,e){if(la(this).classed("dragged",!1),y.snapModeLocation="none",y.snapModeValue="none",0===e.location&&_&&"value"===w){var n=la(this.parentElement).datum().spline,i=n.points.indexOf(e),o=n.points.indexOf(p);i>o?e.derivative_left=p.derivative_left:e.derivative_right=p.derivative_right,n.points.splice(o,1)}Vl.getInstance().refresh({spline:!0})})));E.select("circle").attr("cx",(function(t){return c(t.location)})).attr("cy",(function(t){return u(t.value)})).attr("r",Math.max(l/120,2));var T=l/10;E.select("line.handle_line_left").attr("x1",(function(t){return c(t.location)-T/Math.sqrt(t.derivative_left*t.derivative_left*v+1)})).attr("y1",(function(t){return u(t.value)-T*t.derivative_left*d/h/Math.sqrt(t.derivative_left*t.derivative_left*v+1)})).attr("x2",(function(t){return c(t.location)})).attr("y2",(function(t){return u(t.value)})),E.select("line.handle_line_left_pointer").attr("x1",(function(t){return c(t.location)-T/Math.sqrt(t.derivative_left*t.derivative_left*v+1)})).attr("y1",(function(t){return u(t.value)-T*t.derivative_left*d/h/Math.sqrt(t.derivative_left*t.derivative_left*v+1)})).attr("x2",(function(t){return c(t.location)})).attr("y2",(function(t){return u(t.value)})),E.select("line.handle_line_right").attr("x1",(function(t){return c(t.location)+T/Math.sqrt(t.derivative_right*t.derivative_right*v+1)})).attr("y1",(function(t){return u(t.value)+T*t.derivative_right*d/h/Math.sqrt(t.derivative_right*t.derivative_right*v+1)})).attr("x2",(function(t){return c(t.location)})).attr("y2",(function(t){return u(t.value)})),E.select("line.handle_line_right_pointer").attr("x1",(function(t){return c(t.location)+T/Math.sqrt(t.derivative_right*t.derivative_right*v+1)})).attr("y1",(function(t){return u(t.value)+T*t.derivative_right*d/h/Math.sqrt(t.derivative_right*t.derivative_right*v+1)})).attr("x2",(function(t){return c(t.location)})).attr("y2",(function(t){return u(t.value)})),b.select(".value_indicator").style("visibility",(function(t){return t.spline&&("none"!==e.snapModeValue&&t.col===e.dragCol&&t.row===e.dragRow||"neighbor"===e.snapModeLocation&&Math.abs(t.col-e.dragCol)+Math.abs(t.row-e.dragRow)===1&&t.spline.points.findIndex((function(t){return t.location===e.dragLocation&&t.value===e.dragValue}))>=0)?"visible":"hidden"})).attr("x1",0).attr("x2",l).attr("y1",u(this.dragValue)).attr("y2",u(this.dragValue)),b.select(".location_indicator").style("visibility",(function(t){return t.spline&&("self"===e.snapModeLocation&&t.col===e.dragCol&&t.row===e.dragRow||"neighbor"===e.snapModeLocation&&Math.abs(t.col-e.dragCol)+Math.abs(t.row-e.dragRow)<=1&&t.spline.points.findIndex((function(t){return t.location===e.dragLocation}))>=0)?"visible":"hidden"})).attr("x1",c(this.dragLocation)).attr("x2",c(this.dragLocation)).attr("y1",0).attr("y2",l),b.select(".mirror_location_indicator").style("visibility",(function(t){return t.spline&&"self"===e.snapModeLocation&&t.col===e.dragCol&&t.row===e.dragRow?"visible":"hidden"})).attr("x1",c(-this.dragLocation)).attr("x2",c(-this.dragLocation)).attr("y1",0).attr("y2",l),b.on("mouseover",(function(t,n){return e.hover=n})),b.on("mouseout",(function(t,n){return e.hover=void 0})),la("body").on("keydown",(function(t){e.hover&&("Delete"===t.key?(y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0,y.builder.splines[n].splines[e.hover.row][e.hover.col]=void 0,Vl.getInstance().refresh({spline:!0})):"KeyC"===t.code&&(t.ctrlKey||t.metaKey)?e.copy=e.hover.spline:"KeyV"===t.code&&(t.ctrlKey||t.metaKey)&&e.copy?(y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0,y.builder.splines[n].splines[e.hover.row][e.hover.col]=new Il(e.copy.points.map((function(t){return Object.create(t)}))),Vl.getInstance().refresh({spline:!0})):"KeyZ"===t.code&&(t.ctrlKey||t.metaKey)&&(y.builder.splines[n].undo(),y.builder.hasChanges=!0,Vl.getInstance().refresh({spline:!0})))}))},t.prototype.refresh=function(){this.title.readOnly=!0,this.title.value="offset"===Vl.getInstance().sidebarManager.openedElement.key?"Offset Spline":"factor"===Vl.getInstance().sidebarManager.openedElement.key?"Factor Spline":"Jaggedness Spline",la("#splineEditorDiv").attr("hidden",void 0),Vl.getInstance().splineDisplayManager.setWeirdnesses([]),Vl.getInstance().splineDisplayManager.setPos(void 0),Vl.getInstance().setLabels("Erosion","Continentalness"),this.draw()},t.prototype.hide=function(){la("#splineEditorDiv").attr("hidden",!0)},t}(),zl=n(243),Nl=(Pl=function(t,e){return Pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Pl(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Pl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Bl=n(196);function Cl(t,e,n){return new Promise((function(i,o){var r=2,s=0;setTimeout((function a(){s++;var l=t.clientWaitSync(e,0,0);if(l!=t.WAIT_FAILED){if(l==t.TIMEOUT_EXPIRED)return r=5,void setTimeout(a,n);r=5,i(s*n)}else 0==--r?o("Wait failed"):setTimeout(a,n)}),n)}))}var Ol=function(t){function e(e,n){var i=t.call(this,n)||this;return i.visualization_manager=e,i.timer_query=null,i.Tiles={},i.renderingQueue=[],i.isRendering=!1,i.gpu_timer_results=[],i}return Nl(e,t),e.preInitalize=function(t){var e=zl.DomUtil.create("canvas"),n=e.getContext("webgl2",{premultipliedAlpha:!1});console.time("Load GL Program");var i=n.getExtension("KHR_parallel_shader_compile"),o=n.createProgram(),r=n.createShader(n.VERTEX_SHADER),s=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,"#version 300 es\nin vec2 aVertexCoords;  in vec2 aCRSCoords;  out vec2 vCRSCoords;  void main(void) {  \tgl_Position = vec4(aVertexCoords , 1.0, 1.0);  \tvCRSCoords = aCRSCoords;  }"),n.shaderSource(s,Bl),n.compileShader(r),n.compileShader(s),n.attachShader(o,r),n.attachShader(o,s),i?this.initPromise=new Promise((function(t){n.linkProgram(o),function(t,e,n){return new Promise((function(i){var o=setInterval((function(){t.getProgramParameter(e,n.COMPLETION_STATUS_KHR)&&(clearInterval(o),i())}),200)}))}(n,o,i).then((function(){return t({renderer:e,gl:n,glProgram:o})}))})):t&&(this.initPromise=new Promise((function(t){setTimeout((function(){n.linkProgram(o),n.getProgramParameter(o,n.LINK_STATUS),t({renderer:e,gl:n,glProgram:o})}),50)})))},e.prototype.initialize=function(t){var n=this;this.isCompiled=!1,void 0===t&&(t={}),this.builder=Vl.getInstance().builder,t.noWrap=!0,t=zl.setOptions(this,t),this.tileSize=t.tileSize,this.resolution=1/16,void 0===e.initPromise&&(console.log("need to pre init syncronized"),e.preInitalize(!0)),e.initPromise.then((function(t){n.renderer=t.renderer,n.gl=t.gl,n.glProgram=t.glProgram,n.renderer.width=n.renderer.height=n.tileSize*n.resolution,n.gl.viewport(0,0,n.tileSize*n.resolution,n.tileSize*n.resolution),n.timer_query_ext=n.gl.getExtension("EXT_disjoint_timer_query_webgl2"),n.loadGLProgram()}))},e.prototype.getGlError=function(){return this.glError},e.prototype.updateResolution=function(){for(var t in console.log("New resolution: "+this.resolution),this.renderer.width=this.renderer.height=this.tileSize*this.resolution,this.gl.viewport(0,0,this.tileSize*this.resolution,this.tileSize*this.resolution),this._tiles)this.Tiles[t].canvas.width<this.tileSize*this.resolution&&this.addRenderingTask(t,(function(){}))},e.prototype.loadGLProgram=function(){console.log("is compiled"),this.gl.useProgram(this.glProgram);var t=this.gl.getAttribLocation(this.glProgram,"aCRSCoords"),e=this.gl.getAttribLocation(this.glProgram,"aVertexCoords");this.CRSBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.CRSBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(8),this.gl.STATIC_DRAW),-1!==t&&(this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,8,0));var n=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),this.gl.STATIC_DRAW),-1!==e&&(this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,2,this.gl.FLOAT,!1,8,0)),this.uniformLocations={enable_isolines:this.gl.getUniformLocation(this.glProgram,"enable_isolines"),enable_hillshading:this.gl.getUniformLocation(this.glProgram,"enable_hillshading"),y_level:this.gl.getUniformLocation(this.glProgram,"y_level"),fixed_continentalness:this.gl.getUniformLocation(this.glProgram,"fixed_continentalness"),fixed_erosion:this.gl.getUniformLocation(this.glProgram,"fixed_erosion"),fixed_weirdness:this.gl.getUniformLocation(this.glProgram,"fixed_weirdness"),fixed_temperature:this.gl.getUniformLocation(this.glProgram,"fixed_temperature"),fixed_humidity:this.gl.getUniformLocation(this.glProgram,"fixed_humidity")},this.parameterTexture=this.gl.createTexture(),this.gl.uniform1i(this.gl.getUniformLocation(this.glProgram,"parameterTexture"),0),this.biomeTexture=this.gl.createTexture(),this.gl.uniform1i(this.gl.getUniformLocation(this.glProgram,"biomeTexture"),1),this.splinesTexture=this.gl.createTexture(),this.gl.uniform1i(this.gl.getUniformLocation(this.glProgram,"splineTexture"),2),console.log("is setup"),this.isCompiled=!0,console.timeEnd("Load GL Program"),this.reRender({biome:{},grids:!0,noises:!0,spline:!0}),!this.isRendering&&this.renderingQueue.length>0&&(this.isRendering=!0,this.doNextRenderingTask())},e.prototype.getIdxs=function(t){var e,n,i,o,r;if(void 0!==this.normalnoises){var s=this._map.options.crs.project(t).multiplyBy(.25),a=s.x+4*this.normalnoises.shift.sample(s.x,0,-s.y),l=-s.y+4*this.normalnoises.shift.sample(-s.y,s.x,0),u={c:null!==(e=this.builder.fixedNoises.continentalness)&&void 0!==e?e:this.normalnoises.continentalness.sample(a,0,l),e:null!==(n=this.builder.fixedNoises.erosion)&&void 0!==n?n:this.normalnoises.erosion.sample(a,0,l),w:null!==(i=this.builder.fixedNoises.weirdness)&&void 0!==i?i:this.normalnoises.weirdness.sample(a,0,l),t:null!==(o=this.builder.fixedNoises.temperature)&&void 0!==o?o:this.normalnoises.temperature.sample(a,0,l),h:null!==(r=this.builder.fixedNoises.humidity)&&void 0!==r?r:this.normalnoises.humidity.sample(a,0,l),d:-.01};return{idx:this.builder.getIndexes(u),values:u,position:{x:4*s.x,z:4*-s.y}}}},e.prototype.render=function(t){this.gl.clearColor(.5,.5,.5,0),this.gl.enable(this.gl.BLEND);var e=this._tileCoordsToBounds(t),n=e.getWest(),i=e.getEast(),o=e.getNorth(),r=e.getSouth(),s=this._map.options.crs,a=s.project(zl.latLng(r,n)),l=s.project(zl.latLng(o,i)),u=[l.x,l.y,a.x,l.y,l.x,a.y,a.x,a.y];this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.CRSBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(u),this.gl.STATIC_DRAW),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)},e.prototype.bindParametersTexture=function(t){void 0===this.parameterArray&&(this.parameterArray=new Float32Array(65536)),this.fillParameterArray(t),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.parameterTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.R32F,256,256,0,this.gl.RED,this.gl.FLOAT,this.parameterArray),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)},e.prototype.fillParameterArray=function(t){var e=10402,n=["weirdness","continentalness","erosion","temperature","humidity","shift"];if(t.noises)for(var i=0;i<n.length;i++){var o=n[i],r=this.builder.noiseSettings[o];this.parameterArray[i*e]=r.firstOctave;for(var s=1/0,a=-1/0,l=0;l<r.amplitudes.length;l+=1)0!==r.amplitudes[l]&&(s=Math.min(s,l),a=Math.max(a,l));var u=1/6/(.1*(1+1/(a-s+1))),h=Math.pow(2,r.amplitudes.length-1)/(Math.pow(2,r.amplitudes.length)-1);for(this.parameterArray[i*e+1]=u*h,l=0;l<20;l++)this.parameterArray[i*e+2+l]=r.amplitudes.length>l?r.amplitudes[l]:0;for(var c=0;c<=1;c++)for(var d=this.normalnoises[o][0===c?"first":"second"].noiseLevels,f=0;f<20;f++){var p=i*e+2+20+20+5180*c+259*f;if(f<d.length&&void 0!==d[f]){var _=d[f];for(this.parameterArray[p]=_.xo,this.parameterArray[p+1]=_.yo,this.parameterArray[p+2]=_.zo,l=0;l<256;l++)this.parameterArray[p+3+l]=_.p[l]}else for(l=0;l<259;l++)this.parameterArray.fill(0,p,p+258)}}if(t.grids){var v={weirdness:this.builder.weirdnesses,continentalness:this.builder.continentalnesses,erosion:this.builder.erosions,temperature:this.builder.temperatures,humidity:this.builder.humidities,shift:this.builder.depths};for(i=0;i<n.length;i++)for(o=n[i],l=0;l<20;l++)l<v[o].length-1?this.parameterArray[i*e+2+20+l]=v[o][l].max:this.parameterArray[i*e+2+20+l]=-200}},e.prototype.bindBiomeTexture=function(t){if(t.grids||void 0===this.biomeArray){var e=this.builder.depths.length*this.builder.humidities.length*this.builder.temperatures.length*this.builder.weirdnesses.length*this.builder.erosions.length*this.builder.continentalnesses.length;this.biomeTextureSize=Math.ceil(Math.sqrt(e)),this.biomeArray=new Uint8Array(this.biomeTextureSize*this.biomeTextureSize*4)}this.fillBiomeArray(t.biome),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.biomeTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.biomeTextureSize,this.biomeTextureSize,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.biomeArray),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)},e.prototype.fillBiomeArray=function(t){for(var e,n,i,o,r,s,a,l,u,h,c,d,f=null!==(e=t.d)&&void 0!==e?e:0;f<=(null!==(n=t.d)&&void 0!==n?n:this.builder.depths.length-1);f++)for(var p=null!==(i=t.h)&&void 0!==i?i:0;p<=(null!==(o=t.h)&&void 0!==o?o:this.builder.humidities.length-1);p++)for(var _=null!==(r=t.t)&&void 0!==r?r:0;_<=(null!==(s=t.t)&&void 0!==s?s:this.builder.temperatures.length-1);_++)for(var v=null!==(a=t.w)&&void 0!==a?a:0;v<=(null!==(l=t.w)&&void 0!==l?l:this.builder.weirdnesses.length-1);v++)for(var m=null!==(u=t.e)&&void 0!==u?u:0;m<=(null!==(h=t.e)&&void 0!==h?h:this.builder.erosions.length-1);m++)for(var g=null!==(c=t.c)&&void 0!==c?c:0;g<=(null!==(d=t.c)&&void 0!==d?d:this.builder.continentalnesses.length-1);g++){var y=this.builder.dimension.lookupRecursive({d:f,w:v,c:g,e:m,h:p,t:_},"Any",!0),b=4*(f*this.builder.humidities.length*this.builder.temperatures.length*this.builder.weirdnesses.length*this.builder.erosions.length*this.builder.continentalnesses.length+p*this.builder.temperatures.length*this.builder.weirdnesses.length*this.builder.erosions.length*this.builder.continentalnesses.length+_*this.builder.weirdnesses.length*this.builder.erosions.length*this.builder.continentalnesses.length+v*this.builder.erosions.length*this.builder.continentalnesses.length+m*this.builder.continentalnesses.length+g);if(void 0!==y&&y instanceof Pi){var w=y.raw_color;this.biomeArray[b]=w.r,this.biomeArray[b+1]=w.g,this.biomeArray[b+2]=w.b,this.biomeArray[b+3]=255}else this.biomeArray[b]=0,this.biomeArray[b+1]=0,this.biomeArray[b+2]=0,this.biomeArray[b+3]=0}},e.prototype.bindSplinesTexture=function(){void 0===this.splinesArray&&(this.splinesArray=new Float32Array(65536)),this.fillSplinesArray(),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.splinesTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.R32F,256,256,0,this.gl.RED,this.gl.FLOAT,this.splinesArray),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)},e.prototype.fillSplinesArray=function(){this.splinesArray[21]=this.builder.splines.offset.erosions.length;for(var t=0;t<this.builder.splines.offset.erosions.length;t++)this.splinesArray[t+22]=this.builder.splines.offset.erosions[t];for(var e=0,n=0;n<this.builder.splines.offset.continentalnesses.length;n++){for(var i=!1,o=0;o<this.builder.splines.offset.erosions.length;o++){var r=42+161*(20*(n-e)+o);if(void 0===this.builder.splines.offset.splines[n][o])this.splinesArray[r]=0;else{i=!0,this.splinesArray[r]=this.builder.splines.offset.splines[n][o].points.length;for(var s=0;s<this.builder.splines.offset.splines[n][o].points.length;s++)this.splinesArray[r+1+4*s]=this.builder.splines.offset.splines[n][o].points[s].location,this.splinesArray[r+1+4*s+1]=this.builder.splines.offset.splines[n][o].points[s].value,this.splinesArray[r+1+4*s+2]=this.builder.splines.offset.splines[n][o].points[s].derivative_left,this.splinesArray[r+1+4*s+3]=this.builder.splines.offset.splines[n][o].points[s].derivative_right}}i?this.splinesArray[n+1-e]=this.builder.splines.offset.continentalnesses[n]:e++}this.splinesArray[0]=this.builder.splines.offset.continentalnesses.length-e},e.prototype.createTile=function(t,e){var n=zl.DomUtil.create("canvas","leaflet-tile");n.width=n.height=this.tileSize*this.resolution,n.onselectstart=n.onmousemove=zl.Util.falseFn;var i=n.getContext("2d");if(this._map){var o=this._tileCoordsToKey(t);return this.Tiles[o]={canvas:n,ctx:i},this.addRenderingTask(o,(function(){e()})),n}},e.prototype._removeTile=function(t){delete this.Tiles[t],zl.TileLayer.prototype._removeTile.call(this,t)},e.prototype.reRender=function(t){if(console.time("reRender BiomeLayerGL"),this.isCompiled){if(t.noises){var e=jn.create(this.builder.seed).fork();this.normalnoises={temperature:new Gn(e.forkWithHashOf("minecraft:temperature"),this.builder.noiseSettings.temperature),humidity:new Gn(e.forkWithHashOf("minecraft:vegetation"),this.builder.noiseSettings.humidity),continentalness:new Gn(e.forkWithHashOf("minecraft:continentalness"),this.builder.noiseSettings.continentalness),erosion:new Gn(e.forkWithHashOf("minecraft:erosion"),this.builder.noiseSettings.erosion),weirdness:new Gn(e.forkWithHashOf("minecraft:ridge"),this.builder.noiseSettings.weirdness),shift:new Gn(e.forkWithHashOf("minecraft:offset"),this.builder.noiseSettings.shift)}}for(var n in(t.noises||t.grids)&&this.bindParametersTexture(t),void 0!==t.biome&&this.bindBiomeTexture(t),t.spline&&this.bindSplinesTexture(),this.gl.uniform1i(this.uniformLocations.enable_isolines,this.visualization_manager.enable_isolines?1:0),this.gl.uniform1i(this.uniformLocations.enable_hillshading,this.visualization_manager.enable_hillshading?1:0),this.gl.uniform1i(this.uniformLocations.y_level,"surface"===this.builder.vis_y_level?1e4:this.builder.vis_y_level),this.gl.uniform1f(this.uniformLocations.fixed_continentalness,void 0===this.builder.fixedNoises.continentalness?1e4:this.builder.fixedNoises.continentalness),this.gl.uniform1f(this.uniformLocations.fixed_erosion,void 0===this.builder.fixedNoises.erosion?1e4:this.builder.fixedNoises.erosion),this.gl.uniform1f(this.uniformLocations.fixed_weirdness,void 0===this.builder.fixedNoises.weirdness?1e4:this.builder.fixedNoises.weirdness),this.gl.uniform1f(this.uniformLocations.fixed_temperature,void 0===this.builder.fixedNoises.temperature?1e4:this.builder.fixedNoises.temperature),this.gl.uniform1f(this.uniformLocations.fixed_humidity,void 0===this.builder.fixedNoises.humidity?1e4:this.builder.fixedNoises.humidity),this._tiles)this.addRenderingTask(n,(function(){}))}console.timeEnd("reRender BiomeLayerGL")},e.prototype.addRenderingTask=function(t,e){this.renderingQueue.findIndex((function(e){return e.key===t}))>=0||(this.renderingQueue.push({key:t,callback:e}),!this.isRendering&&this.isCompiled&&(this.isRendering=!0,this.doNextRenderingTask()))},e.prototype.doNextRenderingTask=function(){var t,e=this;do{if(0===this.renderingQueue.length)return void(this.isRendering=!1);t=this.renderingQueue.shift()}while(void 0===this.Tiles[t.key]);this.isRendering=!0;var n=this._keyToTileCoords(t.key);requestAnimationFrame((function(){return i=e,o=void 0,s=function(){var e,i,o,r,s,a,l,u=this;return function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(h){switch(h.label){case 0:return void 0===(e=this.Tiles[t.key])?[3,3]:(i=!1,this.timer_query_ext&&(o=this.gl.createQuery(),this.gl.beginQuery(this.timer_query_ext.TIME_ELAPSED_EXT,o),i=!0),this.render(n),this.timer_query_ext?[3,2]:(r=this.gl.fenceSync(this.gl.SYNC_GPU_COMMANDS_COMPLETE,0),this.gl.flush(),a=(s=this.gpu_timer_results).push,[4,Cl(this.gl,r,2)]));case 1:a.apply(s,[h.sent()]),h.label=2;case 2:e.canvas.width=e.canvas.height=this.tileSize*this.resolution,e.ctx.clearRect(0,0,this.tileSize*this.resolution,this.tileSize*this.resolution),e.ctx.drawImage(this.renderer,0,0),i?(this.gl.endQuery(this.timer_query_ext.TIME_ELAPSED_EXT),(c=this.gl,d=this.timer_query_ext,f=o,new Promise((function(t,e){setTimeout((function n(){var i=c.getQueryParameter(f,c.QUERY_RESULT_AVAILABLE),o=c.getParameter(d.GPU_DISJOINT_EXT);i&&!o?t():o?e("Disjoint Timer"):setTimeout(n,20)}),20)}))).then((function(){if(u.gpu_timer_results.push(1e-6*u.gl.getQueryParameter(o,u.gl.QUERY_RESULT)),u.gpu_timer_results.length>=6){var t=u.gpu_timer_results.reduce((function(t,e){return t+e}))/u.gpu_timer_results.length;u.gpu_timer_results.length>20&&u.gpu_timer_results.shift(),t>18&&(u.gpu_timer_results.length=0,u.resolution/=2,u.resolution,u.updateResolution()),t<6&&u.resolution<1&&(u.gpu_timer_results.length=0,u.resolution=Math.min(1,2*u.resolution),u.updateResolution())}})).catch((function(t){console.warn("failed to read timer: "+t)})).finally((function(){u.gl.deleteQuery(o)}))):this.gpu_timer_results.length>=6&&(l=this.gpu_timer_results.reduce((function(t,e){return t+e}))/this.gpu_timer_results.length,this.gpu_timer_results.length>20&&this.gpu_timer_results.shift(),l>18&&(this.gpu_timer_results.length=0,this.resolution/=2,this.updateResolution()),l<6&&this.resolution<1&&(this.gpu_timer_results.length=0,this.resolution=Math.min(1,2*this.resolution),this.updateResolution())),setTimeout(t.callback,0),h.label=3;case 3:return this.doNextRenderingTask(),[2]}var c,d,f}))},new((r=void 0)||(r=Promise))((function(t,e){function n(t){try{l(s.next(t))}catch(t){e(t)}}function a(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){e.done?t(e.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(e.value).then(n,a)}l((s=s.apply(i,o||[])).next())}));var i,o,r,s}))},e}(zl.GridLayer);function Rl(t,e,n){return t<e?(n-t)/(e-t):(t-n)/(t-e)}function Fl(){this.successCallback=null,this.verbose=!1,this.polygons=!1,this.polygons_full=!1,this.linearRing=!0,this.noQuadTree=!1,this.noFrame=!1}function Dl(t,e,n,i){var o=[];return t.polygons.forEach((function(t){t.forEach((function(t){t[0]+=e,t[1]+=n})),i.linearRing&&t.push(t[0]),o.push(t)})),o}function Zl(t,e,n,i){return 0===n?(t+=1,e+=i[0][1]):1===n?t+=i[0][0]:2===n?e+=i[0][1]:3===n&&(t+=i[0][0],e+=1),[t,e]}function jl(t,e,n){return 0===n?t++:1===n||(2===n?e++:3===n&&(t++,e++)),[t,e]}function Ul(t,e,n,i,o){var r=i,s=o,a=0,l=0;if(this.x=e,this.y=n,this.lowerBound=null,this.upperBound=null,this.childA=null,this.childB=null,this.childC=null,this.childD=null,1===i&&1===o)this.lowerBound=Math.min(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]),this.upperBound=Math.max(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]);else{if(i>1){for(;0!==r;)r>>=1,a++;i===1<<a-1&&a--,r=1<<a-1}if(o>1){for(;0!==s;)s>>=1,l++;o===1<<l-1&&l--,s=1<<l-1}this.childA=new Ul(t,e,n,r,s),this.lowerBound=this.childA.lowerBound,this.upperBound=this.childA.upperBound,i-r>0&&(this.childB=new Ul(t,e+r,n,i-r,s),this.lowerBound=Math.min(this.lowerBound,this.childB.lowerBound),this.upperBound=Math.max(this.upperBound,this.childB.upperBound),o-s>0&&(this.childC=new Ul(t,e+r,n+s,i-r,o-s),this.lowerBound=Math.min(this.lowerBound,this.childC.lowerBound),this.upperBound=Math.max(this.upperBound,this.childC.upperBound))),o-s>0&&(this.childD=new Ul(t,e,n+s,r,o-s),this.lowerBound=Math.min(this.lowerBound,this.childD.lowerBound),this.upperBound=Math.max(this.upperBound,this.childD.upperBound))}}function Hl(t){var e,n;if(!t)throw new Error("data is required");if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("data must be scalar field, i.e. array of arrays");if(t.length<2)throw new Error("data must contain at least two rows");if((n=t[0].length)<2)throw new Error("data must contain at least two columns");for(e=1;e<t.length;e++){if(!Array.isArray(t[e]))throw new Error("Row "+e+" is not an array");if(t[e].length!=n)throw new Error("unequal row lengths detected, please provide a regular grid")}this.data=t,this.root=new Ul(t,0,0,t[0].length-1,t.length-1)}function Wl(t,e,n,i){var o,r,s,a,l,u,h=0,c=t[n+1][e],d=t[n+1][e+1],f=t[n][e+1],p=t[n][e],_=i.threshold;if(!(isNaN(p)||isNaN(f)||isNaN(d)||isNaN(c))){switch(h|=c>=_?8:0,h|=d>=_?4:0,h|=f>=_?2:0,u={cval:h=+(h|=p>=_?1:0),polygons:[],edges:{},x0:p,x1:f,x2:d,x3:c},h){case 0:i.polygons&&u.polygons.push([[0,0],[0,1],[1,1],[1,0]]);break;case 15:break;case 14:o=i.interpolate(p,c,_),a=i.interpolate(p,f,_),i.polygons_full&&(u.edges.left={path:[[0,o],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&u.polygons.push([[0,0],[0,o],[a,0]]);break;case 13:a=i.interpolate(p,f,_),r=i.interpolate(f,d,_),i.polygons_full&&(u.edges.bottom={path:[[a,0],[1,r]],move:{x:1,y:0,enter:"left"}}),i.polygons&&u.polygons.push([[a,0],[1,r],[1,0]]);break;case 11:r=i.interpolate(f,d,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.right={path:[[1,r],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&u.polygons.push([[1,r],[s,1],[1,1]]);break;case 7:o=i.interpolate(p,c,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.top={path:[[s,1],[0,o]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&u.polygons.push([[s,1],[0,o],[0,1]]);break;case 1:o=i.interpolate(p,c,_),a=i.interpolate(p,f,_),i.polygons_full&&(u.edges.bottom={path:[[a,0],[0,o]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&u.polygons.push([[a,0],[0,o],[0,1],[1,1],[1,0]]);break;case 2:a=i.interpolate(p,f,_),r=i.interpolate(f,d,_),i.polygons_full&&(u.edges.right={path:[[1,r],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&u.polygons.push([[0,0],[0,1],[1,1],[1,r],[a,0]]);break;case 4:r=i.interpolate(f,d,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.top={path:[[s,1],[1,r]],move:{x:1,y:0,enter:"left"}}),i.polygons&&u.polygons.push([[0,0],[0,1],[s,1],[1,r],[1,0]]);break;case 8:o=i.interpolate(p,c,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.left={path:[[0,o],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&u.polygons.push([[0,0],[0,o],[s,1],[1,1],[1,0]]);break;case 12:o=i.interpolate(p,c,_),r=i.interpolate(f,d,_),i.polygons_full&&(u.edges.left={path:[[0,o],[1,r]],move:{x:1,y:0,enter:"left"}}),i.polygons&&u.polygons.push([[0,0],[0,o],[1,r],[1,0]]);break;case 9:a=i.interpolate(p,f,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.bottom={path:[[a,0],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&u.polygons.push([[a,0],[s,1],[1,1],[1,0]]);break;case 3:o=i.interpolate(p,c,_),r=i.interpolate(f,d,_),i.polygons_full&&(u.edges.right={path:[[1,r],[0,o]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&u.polygons.push([[0,o],[0,1],[1,1],[1,r]]);break;case 6:a=i.interpolate(p,f,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.top={path:[[s,1],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&u.polygons.push([[0,0],[0,1],[s,1],[a,0]]);break;case 10:o=i.interpolate(p,c,_),r=i.interpolate(f,d,_),a=i.interpolate(p,f,_),s=i.interpolate(c,d,_),l=(p+f+d+c)/4,i.polygons_full&&(l<_?(u.edges.left={path:[[0,o],[s,1]],move:{x:0,y:1,enter:"bottom"}},u.edges.right={path:[[1,r],[a,0]],move:{x:0,y:-1,enter:"top"}}):(u.edges.right={path:[[1,r],[s,1]],move:{x:0,y:1,enter:"bottom"}},u.edges.left={path:[[0,o],[a,0]],move:{x:0,y:-1,enter:"top"}})),i.polygons&&(l<_?u.polygons.push([[0,0],[0,o],[s,1],[1,1],[1,r],[a,0]]):(u.polygons.push([[0,0],[0,o],[a,0]]),u.polygons.push([[s,1],[1,1],[1,r]])));break;case 5:o=i.interpolate(p,c,_),r=i.interpolate(f,d,_),a=i.interpolate(p,f,_),s=i.interpolate(c,d,_),l=(p+f+d+c)/4,i.polygons_full&&(l<_?(u.edges.bottom={path:[[a,0],[0,o]],move:{x:-1,y:0,enter:"right"}},u.edges.top={path:[[s,1],[1,r]],move:{x:1,y:0,enter:"left"}}):(u.edges.top={path:[[s,1],[0,o]],move:{x:-1,y:0,enter:"right"}},u.edges.bottom={path:[[a,0],[1,r]],move:{x:1,y:0,enter:"left"}})),i.polygons&&(l<_?u.polygons.push([[0,o],[0,1],[s,1],[1,r],[1,0],[a,0]]):(u.polygons.push([[0,o],[0,1],[s,1]]),u.polygons.push([[a,0],[1,r],[1,0]])))}return u}}Ul.prototype.cellsInBand=function(t,e,n){var i=[];return n=void 0===n||n,this.lowerBound>e||this.upperBound<t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(i=i.concat(this.childA.cellsInBand(t,e,n))),this.childB&&(i=i.concat(this.childB.cellsInBand(t,e,n))),this.childD&&(i=i.concat(this.childD.cellsInBand(t,e,n))),this.childC&&(i=i.concat(this.childC.cellsInBand(t,e,n)))):(n||this.lowerBound<=t||this.upperBound>=e)&&i.push({x:this.x,y:this.y})),i},Ul.prototype.cellsBelowThreshold=function(t,e){var n=[];return e=void 0===e||e,this.lowerBound>t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(n=n.concat(this.childA.cellsBelowThreshold(t,e))),this.childB&&(n=n.concat(this.childB.cellsBelowThreshold(t,e))),this.childD&&(n=n.concat(this.childD.cellsBelowThreshold(t,e))),this.childC&&(n=n.concat(this.childC.cellsBelowThreshold(t,e)))):(e||this.upperBound>=t)&&n.push({x:this.x,y:this.y})),n};for(var Gl=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Kl=function(t){function e(e){var n=t.call(this)||this;return n.builder=e,n}return Gl(e,t),e.prototype.createTile=function(t,e){var n,i,o,r,s=zl.DomUtil.create("canvas","leaflet-tile");return n=this,i=void 0,r=function(){var n,i,o,r,a,l,u=this;return function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(h){switch(h.label){case 0:return n=s.getContext("2d"),i=this.getTileSize(),s.width=i.x,s.height=i.y,(o=this.gridIndicesManager.get(t))instanceof Promise?[4,o]:[3,2];case 1:return o=h.sent(),[3,3];case 2:s.classList.add("leaflet-tile-loaded"),h.label=3;case 3:return r=o.values.map((function(t){return t.map((function(t){return u.builder.splines.offset.apply(t.c,t.e,t.w)}))})),a=Array(14).fill(0).map((function(t,e){return.15*(e-7)})),l=function(t,e,n){var i,o,r,s=!1,a=!1,l=null,u=null,h=null,c=null,d=null,f=[];if(!t)throw new Error("data is required");if(null==e)throw new Error("threshold is required");if(n&&"object"!=typeof n)throw new Error("options must be an object");if(i=function(t){var e,n,i,o,r;for(o=new Fl,t=t||{},r=Object.keys(o),e=0;e<r.length;e++)null!=(i=t[n=r[e]])&&(o[n]=i);return o.polygons_full=!o.polygons,o.interpolate=Rl,o}(n),t instanceof Hl)l=t,u=t.root,h=t.data,i.noQuadTree||(s=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");h=t}if(Array.isArray(e)){for(a=!0,i.noQuadTree||(s=!0),o=0;o<e.length;o++)if(isNaN(+e[o]))throw new Error("threshold["+o+"] is not a number")}else{if(isNaN(+e))throw new Error("threshold must be a number or array of numbers");e=[e]}return s&&!u&&(l=new Hl(h),u=l.root,h=l.data),i.verbose&&(i.polygons?console.log("MarchingSquaresJS-isoLines: returning single lines (polygons) for each grid cell"):console.log("MarchingSquaresJS-isoLines: returning line paths (polygons) for entire data grid"),a&&console.log("MarchingSquaresJS-isoLines: multiple lines requested, returning array of line paths instead of lines for a single threshold")),e.forEach((function(t,e){if(d=[],i.threshold=t,i.verbose&&console.log("MarchingSquaresJS-isoLines: computing iso lines for threshold "+t),i.polygons)if(s)u.cellsBelowThreshold(i.threshold,!0).forEach((function(t){d=d.concat(Dl(Wl(h,t.x,t.y,i),t.x,t.y,i))}));else for(r=0;r<h.length-1;++r)for(e=0;e<h[0].length-1;++e)d=d.concat(Dl(Wl(h,e,r,i),e,r,i));else{for(c=[],e=0;e<h[0].length-1;++e)c[e]=[];if(s)u.cellsBelowThreshold(i.threshold,!1).forEach((function(t){c[t.x][t.y]=Wl(h,t.x,t.y,i)}));else for(e=0;e<h[0].length-1;++e)for(r=0;r<h.length-1;++r)c[e][r]=Wl(h,e,r,i);d=function(t,e,n){var i,o,r,s,a,l,u,h,c,d,f,p,_,v,m,g=[],y=t.length-1,b=t[0].length-1,w=["right","bottom","left","top"],x=[0,-1,0,1],E=[-1,0,1,0],T={bottom:1,left:2,top:3,right:0};return n.noFrame||function(t,e){var n,i,o,r,s;for(n=!0,i=t[0].length,o=t.length,s=0;s<o;s++)if(t[s][0]>=e||t[s][i-1]>=e){n=!1;break}if(n&&(t[o-1][0]>=e||t[o-1][i-1]>=e)&&(n=!1),n)for(r=0;r<i-1;r++)if(t[0][r]>=e||t[o-1][r]>e){n=!1;break}return n}(t,n.threshold)&&(n.linearRing?g.push([[0,0],[0,y],[b,y],[b,0],[0,0]]):g.push([[0,0],[0,y],[b,y],[b,0]])),e.forEach((function(t,k){t.forEach((function(t,S){for(i=null,o=0;o<4;o++)if(i=w[o],"object"==typeof t.edges[i]){for(a=[],r=t.edges[i],l=i,u=k,h=S,c=!1,d=[k+r.path[0][0],S+r.path[0][1]],a.push(d);!c&&"object"==typeof(s=e[u][h]).edges[l];)if(r=s.edges[l],delete s.edges[l],(f=r.path[1])[0]+=u,f[1]+=h,a.push(f),l=r.move.enter,u+=r.move.x,h+=r.move.y,void 0===e[u]||void 0===e[u][h]){if(!n.linearRing)break;if(p=0,_=0,u===b?(u--,p=0):u<0?(u++,p=2):h===y?(h--,p=3):h<0&&(h++,p=1),u===k&&h===S&&p===T[i]){c=!0,l=i;break}for(;;){if(v=!1,_>4)throw new Error("Direction change counter overflow! This should never happen!");if(void 0!==e[u]&&void 0!==e[u][h]&&(s=e[u][h],m=w[p],"object"==typeof s.edges[m])){r=s.edges[m],a.push(Zl(u,h,p,r.path)),l=m,v=!0;break}if(v)break;if(a.push(jl(u,h,p)),h+=E[p],void 0!==e[u+=x[p]]&&void 0!==e[u][h]||(0===p&&h<0||1===p&&u<0||2===p&&h===y||3===p&&u===b)&&(u-=x[p],h-=E[p],p=(p+1)%4,_++),u===k&&h===S&&p===T[i]){c=!0,l=i;break}}}!n.linearRing||a[a.length-1][0]===d[0]&&a[a.length-1][1]===d[1]||a.push(d),g.push(a)}}))})),g}(h,c,i)}a?f.push(d):f=d,"function"==typeof i.successCallback&&i.successCallback(f,t)})),f}(r,a,{noFrame:!0,polygons:!1}),n.strokeStyle="black",n.lineWidth=1,l.forEach((function(t){t.forEach((function(t){n.beginPath();for(var e=0;e<t.length;e++){var o=t[e],r=!0,s=i.x/u.gridIndicesManager.resolution;if(e>0){var a=t[e-1];0===o[0]&&0===a[0]&&(r=!1),0===o[1]&&0===a[1]&&(r=!1),o[0]===s&&a[0]===s&&(r=!1),o[1]===s&&a[1]===s&&(r=!1)}r?n.lineTo(o[1]*u.gridIndicesManager.resolution,o[0]*u.gridIndicesManager.resolution):n.moveTo(o[1]*u.gridIndicesManager.resolution,o[0]*u.gridIndicesManager.resolution)}n.stroke()}))})),e(null,s),[2]}}))},new((o=void 0)||(o=Promise))((function(t,e){function s(t){try{l(r.next(t))}catch(t){e(t)}}function a(t){try{l(r.throw(t))}catch(t){e(t)}}function l(e){e.done?t(e.value):function(t){return t instanceof o?t:new o((function(e){e(t)}))}(e.value).then(s,a)}l((r=r.apply(n,i||[])).next())})),s},e}(zl.GridLayer),Xl=function(){function t(t){var e=this;this.enable_isolines=!1,this.enable_hillshading=!0,this.builder=t;var n=document.getElementById("visualization");this.closeContainer=n.parentElement.parentElement,this.closeContainer.onopenchange=function(){e.biomeLayer.reRender({biome:{},grids:!0,noises:!0,spline:!0})},this.map=zl.map("visualization_map"),this.map.setView([0,0],15),this.map.setMaxZoom(18),this.map.setMinZoom(11),this.biomeLayer=new Ol(this,{tileSize:256}),this.biomeLayer.addTo(this.map),this.contourLayer=new Kl(this.builder);var i=document.getElementById("toggleIsolinesButton");i.onclick=function(t){e.enable_isolines=!e.enable_isolines,i.classList.toggle("enabled",e.enable_isolines),Vl.getInstance().refresh({})};var o=document.getElementById("toggleHillshadeButton");o.onclick=function(t){e.enable_hillshading=!e.enable_hillshading,o.classList.toggle("enabled",e.enable_hillshading),Vl.getInstance().refresh({})};var r=document.getElementById("mapHeightSelection"),s=document.getElementById("mapHeightLabel");r.value=r.max,r.oninput=function(){var t=Number(r.value),e=Number(r.min),n=Number(r.max);s.innerHTML=t===n?"Surface":t.toFixed(0);var i=.94*(1-(t-e)/(n-e))*parseInt(getComputedStyle(r).height);s.style.top=i+"px"},r.onchange=function(){var t=Number(r.value),n=(Number(r.min),Number(r.max));e.builder.vis_y_level=t===n?"surface":t,e.refresh({})};var a=document.getElementById("mapFullscreenButton");a.onclick=function(t){var i=n.classList.toggle("fullscreen");a.classList.toggle("enabled",i),e.map.invalidateSize()};var l,u,h=document.getElementById("visualizationTooltip"),c=h.getElementsByClassName("position")[0],d=h.getElementsByClassName("noise_values")[0],f=h.getElementsByClassName("slice")[0],p=h.getElementsByClassName("mode")[0],_=h.getElementsByClassName("layout")[0],v=h.getElementsByClassName("biome")[0];this.map.addEventListener("click",(function(t){var n=e.getIdxs(t.latlng),i=e.builder.lookupRecursiveWithTracking(n.idx);void 0===i.slice||i.slice instanceof Bi||(void 0!==i.layout&&(t.originalEvent.ctrlKey||t.originalEvent.metaKey)?(Vl.getInstance().sidebarManager.openElement({type:"layout",key:i.layout.getKey()}),Vl.getInstance().layoutEditor.highlight(n.idx.t,n.idx.h),Vl.getInstance().refresh({})):(Vl.getInstance().sidebarManager.openElement({type:"slice",key:i.slice.getKey()}),Vl.getInstance().layoutEditor.highlight(n.idx.c,n.idx.e),Vl.getInstance().refresh({})))})),this.map.addEventListener("mousemove",(function(n){var i,o,r,s=e.getIdxs(n.latlng);if(void 0!==s){var a=s?e.builder.lookupRecursiveWithTracking(s.idx):void 0;h.style.left=Math.min(n.originalEvent.pageX+20,document.body.clientWidth-300)+"px",h.style.top=n.originalEvent.pageY+15+"px",h.classList.remove("hidden"),a&&(p.src="mode_"+(null==a?void 0:a.mode)+".png");var m,g,y=t.splines.offset.apply(s.values.c,s.values.e,s.values.w);"surface"===t.vis_y_level?(m=s?128*y+64:void 0,g=0):(m=t.vis_y_level,g=-(t.vis_y_level-64)/128+y),c.innerHTML="X: "+s.position.x.toFixed(0)+(m?", Y: "+m.toFixed(0):"")+", Z: "+s.position.z.toFixed(0),d.innerHTML="C: "+s.values.c.toFixed(2)+", E: "+s.values.e.toFixed(2)+", W: "+s.values.w.toFixed(2)+"<br /> T: "+s.values.t.toFixed(2)+", H: "+s.values.h.toFixed(2)+", D: "+g.toFixed(2),f.innerHTML="&crarr; "+(null===(i=null==a?void 0:a.slice)||void 0===i?void 0:i.name)+" (Slice)",_.innerHTML="&crarr; "+(null===(o=null==a?void 0:a.layout)||void 0===o?void 0:o.name)+" (Layout)",v.innerHTML=null===(r=null==a?void 0:a.biome)||void 0===r?void 0:r.name,p.classList.toggle("hidden",void 0===(null==a?void 0:a.mode)),f.parentElement.classList.toggle("hidden",void 0===(null==a?void 0:a.slice)||a.slice instanceof Bi),_.parentElement.classList.toggle("hidden",void 0===(null==a?void 0:a.layout)||a.layout instanceof Bi),v.parentElement.classList.toggle("hidden",void 0===(null==a?void 0:a.biome)||a.biome instanceof Bi),s&&(Vl.getInstance().splineDisplayManager.setPos({c:s.values.c,e:s.values.e,w:s.values.w}),Vl.getInstance().splineDisplayManager.refresh()),Oi.toggleAction("open-slice",void 0!==(null==a?void 0:a.slice)&&!((null==a?void 0:a.slice)instanceof Bi)),Oi.toggleAction("open-layout",void 0!==(null==a?void 0:a.layout)),Oi.toggleAction("copy",!0),l=s.position,u=m}})),this.map.addEventListener("mouseout",(function(t){h.classList.add("hidden"),Vl.getInstance().splineDisplayManager.setPos(void 0),Vl.getInstance().splineDisplayManager.refresh(),Oi.toggleAction("open-slice",!1),Oi.toggleAction("open-layout",!1),Oi.toggleAction("copy",!1)})),this.map.addEventListener("keydown",(function(e){"c"===e.originalEvent.key&&(e.originalEvent.ctrlKey||e.originalEvent.metaKey)&&navigator.clipboard.writeText("/execute in "+t.dimensionName+" run tp @s "+l.x.toFixed(0)+" "+(u+10).toFixed(0)+" "+l.z.toFixed(0))}))}return t.prototype.getIdxs=function(t){return this.biomeLayer.getIdxs(t)},t.prototype.refresh=function(t){return e=this,n=void 0,o=function(){return function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(e){return this.closeContainer.classList.contains("closed")||this.biomeLayer.reRender(t),[2]}))},new((i=void 0)||(i=Promise))((function(t,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(e){e.done?t(e.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(e.value).then(s,a)}l((o=o.apply(e,n||[])).next())}));var e,n,i,o},t}(),Vl=function(){function t(e){t.instance=this,this.builder=e,this.layoutEditor=new Fi(e),this.sidebarManager=new Ll(e),this.splineDisplayManager=new Al(e),this.visualizationManager=new Xl(e),this.gridEditor=new zi(e),this.splineEditor=new Ml(e),this.settingsManager=new Di(e),this.horizonalLabel=document.getElementById("horizontal_label"),this.verticalLabel=document.getElementById("vertical_label"),Oi.createClickHandlers()}return t.create=function(e){if(void 0!==t.instance)throw new Error("UI instance already exists");new t(e)},t.getInstance=function(){return t.instance},t.prototype.refresh=function(t){var e=this;console.log("Refreshing: "+JSON.stringify(t)),this.sidebarManager.refresh(),"spline"===this.sidebarManager.openedElement.type?(this.layoutEditor.hide(),this.gridEditor.hide(),this.splineEditor.refresh()):"grid"===this.sidebarManager.openedElement.type?(this.layoutEditor.hide(),this.gridEditor.refresh(),this.splineEditor.hide()):(this.gridEditor.hide(),this.layoutEditor.refresh(),this.splineEditor.hide()),this.splineDisplayManager.refresh(),setTimeout((function(){e.visualizationManager.refresh(t)}),5),this.settingsManager.refresh()},t.prototype.setLabels=function(t,e){this.horizonalLabel.innerHTML=t,this.verticalLabel.innerHTML=e},t.instance=void 0,t}(),ql=function(){function t(t){this.highlight_x=-1,this.highlight_y=-1,this.aImg=document.getElementById("aModeImg"),this.bImg=document.getElementById("bModeImg"),this.canvasSize=void 0,this.grid=t,this.gridCanvas=document.createElement("canvas"),this.overlayCanvas=document.createElement("canvas")}return t.prototype.lookup=function(t,e){return this.grid.lookup(this.grid.cellToIds(e,t),"Any")},t.prototype.getSize=function(){return this.grid.getSize()},t.prototype.setDirty=function(){this.canvasSize=void 0},t.prototype.refresh=function(t){this.gridCanvas.width=this.canvasSize[0],this.gridCanvas.height=this.canvasSize[1],this.overlayCanvas.width=this.canvasSize[0],this.overlayCanvas.height=this.canvasSize[1];var e=this.getSize(),n=0;"dimension"===this.grid.getType()&&(e[1]+=1,n=1);var i=this.canvasSize[0]/e[0],o=this.canvasSize[1]/e[1],r=Math.min(i,o),s=-(r*e[0]-this.canvasSize[0])/2,a=-(r*e[1]-this.canvasSize[1])/2,l=this.gridCanvas.getContext("2d"),u=this.overlayCanvas.getContext("2d");if(l.clearRect(0,0,this.canvasSize[0],this.canvasSize[1]),u.clearRect(0,0,this.canvasSize[0],this.canvasSize[1]),"dimension"===this.grid.getType())for(var h=0;h<e[0];h++)l.drawImage("A"===Vl.getInstance().builder.modes[h]?this.aImg:this.bImg,s+(h+.25)*r,a+.25*r,.5*r,.5*r);for(var c=n;c<e[1];c++)for(h=0;h<e[0];h++){var d=this.lookup(h,c-n);void 0===d&&console.log("undefined at: "+(c-n)+", "+h);var f=d.getRenderer();f instanceof tu&&(f.setParentType(this.grid.getType()),f.drawOverlay(u,s+h*r,a+c*r,r,r,this.grid.cellToIds(c,h))),!t&&d instanceof Ql&&d.getType()!==this.grid.getType()?f.draw(l,s+(h+.05)*r,a+(c+.05)*r,.9*r,.9*r,this.grid.cellToIds(c,h),!0):f.draw(l,s+h*r,a+c*r,r,r,this.grid.cellToIds(c,h),!0),d instanceof Ql&&d.getType()===this.grid.getType()&&(u.fillStyle="rgb(255,255,255,0.8)",u.beginPath(),u.rect(s+h*r,a+c*r,r,r),u.fill(),u.fillStyle="rgb(0,0,0,1)",u.textAlign="center",u.textBaseline="middle",u.font="100px serif",u.fillText(d.name.charAt(0),s+(h+.4)*r,a+(c+.4)*r),u.font="140px serif",u.fillText("↵",s+(h+.65)*r,a+(c+.75)*r)),u.strokeStyle="black",u.lineWidth=r/30,u.beginPath(),u.rect(s+h*r,a+c*r,r,r),u.stroke(),l.strokeStyle="black",l.lineWidth=r/30,l.beginPath(),l.rect(s+h*r,a+c*r,r,r),l.stroke()}},t.prototype.draw=function(t,e,n,i,o,r,s){void 0===s&&(s=!1);var a=this.grid.idsToCell(r);if("all"===a){if(void 0!==this.canvasSize&&this.canvasSize[0]===i&&this.canvasSize[1]===o||(this.canvasSize=[i,o],this.refresh(s)),t.drawImage(this.gridCanvas,e,n,i,o),s||t.drawImage(this.overlayCanvas,e,n,i,o),this.highlight_y>=0&&this.highlight_x>=0&&!s){var l=this.getSize();"dimension"===this.grid.getType()&&(l[1]+=1);var u=this.canvasSize[0]/l[0],h=this.canvasSize[1]/l[1],c=Math.min(u,h),d=-(c*l[0]-this.canvasSize[0])/2,f=-(c*l[1]-this.canvasSize[1])/2;t.strokeStyle="red",t.lineWidth=c/15,t.beginPath(),t.rect(d+this.highlight_x*c,f+this.highlight_y*c,c,c),t.stroke(),this.highlight_y=-1,this.highlight_x=-1}}else this.lookup(a[1],a[0]).getRenderer().draw(t,e,n,i,o,r,s)},t.prototype.getIdsFromPosition=function(t,e,n,i,o,r){var s=this.getSize(),a=0;"dimension"===this.grid.getType()&&(s[1]+=1,a=1);var l=n/s[0],u=i/s[1],h=Math.min(l,u),c=-(h*s[0]-n)/2+t,d=-(h*s[1]-i)/2+e;if(!(o<c||r<d||o>c+s[0]*h||r>d+s[1]*h)){var f=Math.floor((r-d)/h),p=Math.floor((o-c)/h),_=o-c-p*h,v=r-d-f*h,m=_>h-v?"B":"A";return{indexes:this.grid.cellToIds(f-a,p),local_h:_/h,local_t:v/h,mode:m}}},t.prototype.setHighlight=function(t,e){this.highlight_y=t,this.highlight_x=e},t}(),Jl=function(){function t(t){this.builder=t,this.type="dimension"}return t.prototype.getSize=function(t){return[t.getNumWeirdnesses(),t.getNumDepths()]},t.prototype.cellToIds=function(t,e){return{d:t,w:e}},t.prototype.idsToCell=function(t){return void 0===t.w||void 0===t.d?"all":[t.d,t.w]},t.prototype.paramToAxis=function(t){if("depth"===t)return"x";if("weirdness"===t)return"y";throw new Error("Invalid Parameter")},t.prototype.modesetting=function(t){return void 0===t.w?"unchanged":this.builder.modes[t.w]},t}(),Yl=function(){function t(){this.type="slice"}return t.prototype.getSize=function(t){return[t.getNumErosions(),t.getNumContinentalnesses()]},t.prototype.cellToIds=function(t,e){return{c:t,e}},t.prototype.idsToCell=function(t){return void 0===t.c||void 0===t.e?"all":[t.c,t.e]},t.prototype.paramToAxis=function(t){if("continentalness"===t)return"x";if("erosion"===t)return"y";throw new Error("Invalid Parameter")},t.prototype.modesetting=function(t){return"unchanged"},t}(),$l=function(){function t(){this.type="layout"}return t.prototype.getSize=function(t){return[t.getNumHumidities(),t.getNumTemperatures()]},t.prototype.cellToIds=function(t,e){return{t,h:e}},t.prototype.idsToCell=function(t){return void 0===t.t||void 0===t.h?"all":[t.t,t.h]},t.prototype.paramToAxis=function(t){if("temperature"===t)return"x";if("humidity"===t)return"y";throw new Error("Invalid Parameter")},t.prototype.modesetting=function(t){return"unchanged"},t}(),Ql=function(){function t(t,e,n,i,o){this.allowEdit=!0,this.name=e,this.builder=t,this.accessor=n;var r=n.getSize(t);this.array=null!=i?i:new Array(r[1]).fill(0).map((function(){return new Array(r[0]).fill("unassigned")})),this.lookup_cache=new Array(r[1]).fill(0).map((function(){return new Array(r[0]).fill(void 0)})),this.key=null!=o?o:ki("layout_"),this.undoActions=[]}return t.create=function(e,n,i,o,r){var s=new t(e,n,i,o,r);return"layout"===i.type?e.registerLayout(s):"slice"===i.type&&e.registerSlice(s),s},t.fromJSON=function(e,n,i){return t.create(e,n.name,i,n.array,n.key)},t.prototype.toJSON=function(){var t=this;return{key:this.key,name:this.name,array:this.array.map((function(e){return e.map((function(e){return t.builder.getLayoutElement(e).getKey()}))}))}},t.prototype.getSize=function(){return this.accessor.getSize(this.builder)},t.prototype.getType=function(){return this.accessor.type},t.prototype.set=function(t,e,n){void 0===n&&(n=!0);var i=this.accessor.idsToCell(t);if("all"===i)throw new Error("Trying to set element of Layout without proper ids");this.array[i[0]][i[1]]!==e&&(n&&this.undoActions.push({y_id:i[0],x_id:i[1],value:this.array[i[0]][i[1]]}),this.array[i[0]][i[1]]=e,this.builder.hasChanges=!0,this.getRenderer().setDirty())},t.prototype.undo=function(){if(this.undoActions.length>0){var t=this.undoActions.pop();this.array[t.y_id][t.x_id]=t.value}},t.prototype.deleteParam=function(t,e){"x"===this.accessor.paramToAxis(t)?this.array.splice(e,1):this.array.forEach((function(t){return t.splice(e,1)}))},t.prototype.splitParam=function(t,e){"x"===this.accessor.paramToAxis(t)?this.array.splice(e,0,Array.from(this.array[e])):this.array.forEach((function(t){return t.splice(e,0,t[e])}))},t.prototype.deleteGridElement=function(t){for(var e in this.array)for(var n in this.array[e])this.array[e][n]===t&&(this.array[e][n]="unassigned")},t.prototype.lookupKey=function(t,e){var n=this.accessor.idsToCell(t);return"all"===n?this.getKey():this.array[n[0]][n[1]]},t.prototype.lookup=function(t,e){var n=this.accessor.idsToCell(t);if("all"===n)return this;var i=this.array[n[0]][n[1]],o=this.lookup_cache[n[0]][n[1]];if(void 0!==o&&o.getKey()===i)return o;void 0===i&&console.log(t);var r=this.builder.getLayoutElement(i);return this.lookup_cache[n[0]][n[1]]=r,r},t.prototype.lookupRecursive=function(t,e,n){void 0===n&&(n=!1);var i=this.accessor.modesetting(t),o="unchanged"===i?e:i,r=this.lookup(t,o);return n&&r.hidden||r===this?r:r.lookupRecursive(t,o,n)},t.prototype.lookupRecursiveWithTracking=function(t,e,n){var i=this.accessor.modesetting(t),o="unchanged"===i?e:i,r=this.lookup(t,o);if(r.getKey()===this.getKey())throw new Error("Lookup resulted in same element: "+JSON.stringify(t)+" mode: "+e);if(n&&r.hidden){if("slice"===this.accessor.type)return{mode:o,slice:this,layout:void 0,biome:void 0};if("layout"===this.accessor.type)return{mode:o,slice:void 0,layout:this,biome:void 0};if("dimension"===this.accessor.type)return{mode:o,slice:void 0,layout:void 0,biome:void 0}}else{var s=r.lookupRecursiveWithTracking(t,o,n);if("slice"===this.accessor.type)return{mode:o,slice:this,layout:s.layout,biome:s.biome};if("layout"===this.accessor.type)return{mode:o,slice:void 0,layout:this,biome:s.biome};if("dimension"===this.accessor.type)return{mode:o,slice:s.slice,layout:s.layout,biome:s.biome}}},t.prototype.getRenderer=function(){return void 0===this.renderer&&(this.renderer=new ql(this)),this.renderer},t.prototype.cellToIds=function(t,e){return this.accessor.cellToIds(t,e)},t.prototype.idsToCell=function(t){return this.accessor.idsToCell(t)},t.prototype.getKey=function(){return this.key},t.prototype.has=function(t,e){var n=this;return t===this.getKey()||("all"===this.accessor.idsToCell(e)?this.array.findIndex((function(i){return i.findIndex((function(i){return n.builder.getLayoutElement(i).has(t,e)}))>=0}))>=0:this.lookup(e,"Any").has(t,e))},t}(),tu=function(){function t(t){this.ab_element=t}return t.prototype.setHighlight=function(t,e){},t.prototype.setParentType=function(t){this.parentType=t},t.prototype.draw=function(t,e,n,i,o,r,s){var a=this.ab_element.lookupRecursive(r,"A",!1),l=!1;a instanceof Pi?t.fillStyle=a.color:a instanceof Bi?t.fillStyle="gray":l=!0,l?a.getRenderer().draw(t,e+.1*i,n+.1*o,.38*i,.38*o,r,!0):(t.beginPath(),t.moveTo(e,n),t.lineTo(e+i,n),t.lineTo(e,n+o),t.fill(),a instanceof Bi&&(t.fillStyle="white",t.textAlign="center",t.textBaseline="middle",t.font=.5*i+"px serif",t.fillText("?",e+.3*i,n+.4*o)));var u=this.ab_element.lookupRecursive(r,"B",!1),h=!1;u instanceof Pi?t.fillStyle=u.color:u instanceof Bi?t.fillStyle="gray":h=!0,h?u.getRenderer().draw(t,e+.52*i,n+.52*o,.38*i,.38*o,r,!0):(t.beginPath(),t.moveTo(e+i,n),t.lineTo(e+i,n+o),t.lineTo(e,n+o),t.fill(),u instanceof Bi&&(t.fillStyle="white",t.font=.5*i+"px serif",t.textAlign="center",t.textBaseline="middle",t.fillText("?",e+.72*i,n+.75*o))),t.strokeStyle="black",t.lineWidth=i/30,t.beginPath(),t.moveTo(e+i,n),t.lineTo(e,n+o),t.stroke()},t.prototype.drawOverlay=function(t,e,n,i,o,r){var s=this.ab_element.getElement("A");s instanceof Ql&&s.getType()===this.parentType&&(t.fillStyle="rgb(255,255,255,0.8)",t.beginPath(),t.moveTo(e,n),t.lineTo(e+i,n),t.lineTo(e,n+o),t.fill(),t.fillStyle="rgb(0,0,0,1)",t.textAlign="center",t.textBaseline="middle",t.font="80px serif",t.fillText(this.ab_element.getElement("A").name.charAt(0),e+.2*i,n+.3*o),t.font="110px serif",t.fillText("↵",e+.3*i,n+.5*o));var a=this.ab_element.getElement("B");a instanceof Ql&&a.getType()===this.parentType&&(t.fillStyle="rgb(255,255,255,0.8)",t.beginPath(),t.moveTo(e+i,n),t.lineTo(e+i,n+o),t.lineTo(e,n+o),t.fill(),t.fillStyle="rgb(0,0,0,1)",t.textAlign="center",t.textBaseline="middle",t.font="80px serif",t.fillText(this.ab_element.getElement("B").name.charAt(0),e+.65*i,n+.7*o),t.font="110px serif",t.fillText("↵",e+.77*i,n+.85*o)),t.strokeStyle="black",t.lineWidth=i/30,t.beginPath(),t.moveTo(e+i,n),t.lineTo(e,n+o),t.stroke()},t}(),eu=function(){function t(t,e,n){this.allowEdit=!1,this.type_id=-1,this.elementA=e,this.elementB=n,this.builder=t}return t.create=function(e,n,i){var o=new t(e,n,i);return e.registerGridElement(o),o},t.prototype.lookupKey=function(t,e){return"A"===e?this.elementA:"B"===e?this.elementB:this.getKey()},t.prototype.lookup=function(t,e){return"A"===e?this.builder.getLayoutElement(this.elementA):"B"===e?this.builder.getLayoutElement(this.elementB):this},t.prototype.lookupRecursive=function(t,e,n){var i;return void 0===n&&(n=!1),"Any"===e?this:(i="A"===e?this.builder.getLayoutElement(this.elementA):this.builder.getLayoutElement(this.elementB),n&&i.hidden?i:i.lookupRecursive(t,e,n))},t.prototype.lookupRecursiveWithTracking=function(t,e,n){var i;return"Any"===e?{slice:void 0,layout:void 0,biome:void 0}:(i="A"===e?this.builder.getLayoutElement(this.elementA):this.builder.getLayoutElement(this.elementB),n&&i.hidden?{slice:void 0,layout:void 0,biome:void 0}:i.lookupRecursiveWithTracking(t,e,n))},t.prototype.getElement=function(t){return"A"===t?this.builder.getLayoutElement(this.elementA):this.builder.getLayoutElement(this.elementB)},t.prototype.getRenderer=function(){return void 0===this.renderer&&(this.renderer=new tu(this)),this.renderer},t.prototype.getKey=function(){return this.elementA+"/"+this.elementB},t.prototype.has=function(t,e){return t===this.getKey()||this.getElement("A").has(t,e)||this.getElement("B").has(t,e)},t}(),nu=function(){function t(t,e,n){if(this.undoSteps=[],this.continentalnesses=t,this.erosions=e,n)this.splines=n;else{this.splines=[];for(var i=0;i<this.continentalnesses.length;i++){this.splines.push([]);for(var o=0;o<this.erosions.length;o++)this.splines[i].push(void 0)}this.createSpline(0,0)}}return t.prototype.apply=function(e,n,i){for(var o,r,s=0;s<this.continentalnesses.length;s++){for(var a=!1,l=0;l<this.erosions.length;l++)if(void 0!==this.splines[s][l]){a=!0;break}if(a){if(!(this.continentalnesses[s]<e)){r=s;break}o=s}}return void 0===o&&void 0===r?void 0:void 0===o?this.applyErosion(r,n,i):void 0===r?this.applyErosion(o,n,i):t.interpolateZeroGrad((e-this.continentalnesses[o])/(this.continentalnesses[r]-this.continentalnesses[o]),this.applyErosion(o,n,i),this.applyErosion(r,n,i))},t.prototype.undo=function(){this.undoSteps.length>0&&(this.splines=JSON.parse(this.undoSteps.pop()).map((function(t){return t.map((function(t){return t?Il.fromJSON(t):void 0}))})))},t.prototype.addUndoStep=function(){this.undoSteps.push(JSON.stringify(this.splines.map((function(t){return t.map((function(t){return t?t.toJSON():void 0}))})))),this.undoSteps.length>500&&this.undoSteps.shift()},t.prototype.applyErosion=function(e,n,i){for(var o,r,s=0;s<this.erosions.length;s++)if(this.splines[e][s]){if(!(this.erosions[s]<n)){r=s;break}o=s}return void 0===o&&void 0===r?void 0:void 0===o?this.splines[e][r].apply(i):void 0===r?this.splines[e][o].apply(i):t.interpolateZeroGrad((n-this.erosions[o])/(this.erosions[r]-this.erosions[o]),this.splines[e][o].apply(i),this.splines[e][r].apply(i))},t.interpolateZeroGrad=function(t,e,n){return On(t,e,n)+t*(1-t)*On(t,e-n,n-e)},t.prototype.toJSON=function(){return{continentalnesses:this.continentalnesses,erosions:this.erosions,splines:this.splines.map((function(t){return t.map((function(t){return t?t.toJSON():void 0}))}))}},t.fromJSON=function(e){return new t(e.continentalnesses,e.erosions,e.splines.map((function(t){return t.map((function(t){return t?Il.fromJSON(t):void 0}))})))},t.prototype.export=function(t){var e,n,i=this;if(void 0!==t.continentalness){var o=(d=Dn(0,this.continentalnesses.length,(function(e){return t.continentalness<i.continentalnesses[e]}))-1)<this.continentalnesses.length-1&&d>=0?(t.continentalness-this.continentalnesses[d])/(t.continentalness-this.continentalnesses[d]):void 0;if(void 0!==t.erosion){var r=(h=Dn(0,this.erosions.length,(function(e){return t.erosion<i.erosions[e]}))-1)<this.erosions.length-1&&h>=0?(t.erosion-this.continentalnesses[h])/(t.erosion-this.continentalnesses[h]):void 0,s=this.interpolateSplinesZeroGrad(r,this.getErosionInterpolatedSpline(d,h),this.getErosionInterpolatedSpline(d,h+1)),a=this.interpolateSplinesZeroGrad(r,this.getErosionInterpolatedSpline(d+1,h),this.getErosionInterpolatedSpline(d+1,h+1)),l=this.interpolateSplinesZeroGrad(o,s,a);return void 0!==t.weirdness?l.apply(t.weirdness):l.toJSON()}for(var u=[],h=0;h<this.erosions.length;h++)((null===(e=this.splines[d])||void 0===e?void 0:e[h])||(null===(n=this.splines[d+1])||void 0===n?void 0:n[h]))&&(l=this.interpolateSplinesZeroGrad(o,this.getErosionInterpolatedSpline(d,h),this.getErosionInterpolatedSpline(d+1,h)),u.push({location:this.erosions[h],derivative:0,value:void 0!==t.weirdness?l.apply(t.weirdness):l.toJSON()}));return{coordinate:"erosion",points:u}}for(var c=[],d=0;d<this.continentalnesses.length;d++)if(void 0!==t.erosion)r=(h=Dn(0,this.erosions.length,(function(e){return t.erosion<i.erosions[e]}))-1)<this.erosions.length-1&&h>=0?(t.erosion-this.continentalnesses[h])/(t.erosion-this.continentalnesses[h]):void 0,l=this.interpolateSplinesZeroGrad(r,this.getErosionInterpolatedSpline(d,h),this.getErosionInterpolatedSpline(d,h+1)),c.push({location:this.continentalnesses[d],derivative:0,value:void 0!==t.weirdness?l.apply(t.weirdness):l.toJSON()});else{for(u=[],h=0;h<this.erosions.length;h++)this.splines[d][h]&&u.push({location:this.erosions[h],derivative:0,value:void 0!==t.weirdness?this.splines[d][h].apply(t.weirdness):this.splines[d][h].toJSON()});c.push({location:this.continentalnesses[d],derivative:0,value:{coordinate:"erosion",points:u}})}return{coordinate:"continents",points:c}},t.fromMinecraftJSON=function(e){if("continents"===e.coordinate){var n=e.points.map((function(t){return t.location})),i=new Set;e.points.forEach((function(t){"number"!=typeof t.value&&"erosion"===t.value.coordinate&&t.value.points.forEach((function(t){i.add(t.location)}))}));for(var o=Array.from(i).sort((function(t,e){return t-e})),r=[],s=0;s<n.length;s++){r.push([]);for(var a=0;a<o.length;a++)r[s].push(void 0)}return e.points.forEach((function(t){var e=n.findIndex((function(e){return e===t.location}));"number"==typeof t.value?r[e][0]=new Il([{location:0,value:t.value,derivative_left:0,derivative_right:0}]):"erosion"===t.value.coordinate&&t.value.points.forEach((function(t){var n=o.findIndex((function(e){return e===t.location}));"number"==typeof t.value?r[e][n]=new Il([{location:0,value:t.value,derivative_left:0,derivative_right:0}]):r[e][n]=Il.fromJSON(t.value)}))})),new t(n,o,r)}console.warn("Spline order not suppored")},t.prototype.interpolateSplinesZeroGrad=function(e,n,i){if(void 0===n)return i;if(void 0===i)return n;var o=new Set;n.points.map((function(t){return t.location})).forEach(o.add,o),i.points.map((function(t){return t.location})).forEach(o.add,o);var r=Array.from(o).sort((function(t,e){return t-e})).map((function(o){return{location:o,value:t.interpolateZeroGrad(e,n.apply(o),i.apply(o)),derivative_left:t.interpolateZeroGrad(e,n.derivative(o,"left"),i.derivative(o,"left")),derivative_right:t.interpolateZeroGrad(e,n.derivative(o,"right"),i.derivative(o,"right"))}}));return new Il(r)},t.prototype.getErosionInterpolatedSpline=function(t,e){if(!(t<0||t>=this.continentalnesses.length||e<0||e>=this.erosions.length)){if(this.splines[t][e])return this.splines[t][e];for(var n,i,o=e-1;o>=0;o--)if(this.splines[t][o]){n=o;break}for(o=e+1;o<this.erosions.length;o++)if(this.splines[t][o]){i=o;break}if(void 0!==n||void 0!==i){if(void 0===i)return new Il(Array.from(this.splines[t][n].points.map((function(t){return Object.create(t)}))));if(void 0===n)return new Il(Array.from(this.splines[t][i].points.map((function(t){return Object.create(t)}))));var r=(this.erosions[e]-this.erosions[n])/(this.erosions[i]-this.erosions[n]);return this.interpolateSplinesZeroGrad(r,this.splines[t][n],this.splines[t][i])}}},t.prototype.createSpline=function(t,e){var n;this.splines[t][e]=null!==(n=this.getErosionInterpolatedSpline(t,e))&&void 0!==n?n:new Il([{location:0,value:0,derivative_left:0,derivative_right:0}])},t}(),iu=function(){function t(){}return t.fixJSON=function(t){var e;if(t.version=null!==(e=t.version)&&void 0!==e?e:0,0===t.version){for(var n=[],i=[],o=0;o<t.weirdnesses.length;o++){n[o]=[],i[o]=t.weirdnesses[o][3];for(var r=0;r<5;r++)n[o][r]=0===r||4===r?t.weirdnesses[o][2]:"unassigned"}t.dimension={key:"dimension",name:"Biomes",array:n},t.modes=i,t.continentalnesses=t.continentalnesses.map((function(t){return t[1]})),t.weirdnesses=t.weirdnesses.map((function(t){return t[1]})),t.erosions=t.erosions.map((function(t){return t[1]})),t.temperatures=t.temperatures.map((function(t){return t[1]})),t.humidities=t.humidities.map((function(t){return t[1]})),t.depths=[{min:-.2,max:0},{min:0,max:.2},{min:.2,max:.8},{min:.8,max:1},{min:1,max:1.2}],t.version=1}return 1===t.version&&(t.dimension.array=t.dimension.array[0].map((function(e,n){return t.dimension.array.map((function(t){return t[n]}))})),t.version=2),t},t}(),ou=function(){function t(){this.splines={},this.noiseSettings=Ii.default(),this.fixedNoises={},this.vis_y_level="surface",this.seed=BigInt("1"),this.dimensionName="minecraft:overworld",this.useLegacyRandom=!1,this.gridElements=new Map,this.vanillaBiomes=new Map,this.slices=[],this.layouts=[],this.biomes=[],this.layoutElementUnassigned=Bi.create(this),this.dimensionName="",this.seed=BigInt(1),this.noiseSettings={continentalness:{firstOctave:0,amplitudes:[1]},erosion:{firstOctave:0,amplitudes:[1]},weirdness:{firstOctave:0,amplitudes:[1]},temperature:{firstOctave:0,amplitudes:[1]},humidity:{firstOctave:0,amplitudes:[1]},shift:{firstOctave:0,amplitudes:[1]}}}return t.prototype.loadJSON=function(t){var e,n,i,o,r,s,a,l=this;if((t=iu.fixJSON(t)).version!==ru)throw new Error("Datafixer did output json in version "+t.version+". Newest version is "+ru);this.dimensionName=null!==(e=t.dimensionName)&&void 0!==e?e:"minecraft:overworld",this.seed=BigInt(null!==(n=t.seed)&&void 0!==n?n:"1"),this.noiseSettings=null!==(i=t.noiseSettings)&&void 0!==i?i:Ii.default(),this.useLegacyRandom=null!==(o=t.useLegacyRandom)&&void 0!==o&&o,this.continentalnesses=t.continentalnesses,this.erosions=t.erosions,this.weirdnesses=t.weirdnesses,this.temperatures=t.temperatures,this.humidities=t.humidities,this.depths=t.depths,this.gridElements.clear(),this.vanillaBiomes.clear(),this.layouts.length=0,this.biomes.length=0,this.slices.length=0,this.dimension=Ql.fromJSON(this,t.dimension,new Jl(this)),this.modes=t.modes,Li.registerVanillaBiomes(this),this.gridElements.set("unassigned",this.layoutElementUnassigned),null===(r=t.slices)||void 0===r||r.forEach((function(t){Ql.fromJSON(l,t,new Yl)})),null===(s=t.layouts)||void 0===s||s.forEach((function(t){Ql.fromJSON(l,t,new $l)})),null===(a=t.biomes)||void 0===a||a.forEach((function(t){Pi.fromJSON(l,t)})),t.splines?(this.splines.offset=nu.fromJSON(t.splines.offset),this.splines.factor=nu.fromJSON(t.splines.factor),this.splines.jaggedness=nu.fromJSON(t.splines.jaggedness)):(this.splines.offset=nu.fromMinecraftJSON(Mi.offset),this.splines.factor=nu.fromMinecraftJSON(Mi.factor),this.splines.jaggedness=nu.fromMinecraftJSON(Mi.jaggedness))},t.prototype.toJSON=function(){return{dimensionName:this.dimensionName,seed:this.seed.toString(),noiseSettings:this.noiseSettings,useLegacyRandom:this.useLegacyRandom,continentalnesses:this.continentalnesses,erosions:this.erosions,weirdnesses:this.weirdnesses,temperatures:this.temperatures,humidities:this.humidities,depths:this.depths,dimension:this.dimension,modes:this.modes,layouts:this.layouts,slices:this.slices,biomes:this.biomes,splines:{offset:this.splines.offset.toJSON(),factor:this.splines.factor.toJSON(),jaggedness:this.splines.jaggedness.toJSON()},version:ru}},t.prototype.getSlice=function(t){var e;return null!==(e=this.gridElements.get(t))&&void 0!==e?e:this.layoutElementUnassigned},t.prototype.getLayoutElement=function(t){var e=this.gridElements.get(t);if(void 0===e){var n=t.split("/");if(2!==n.length)return this.layoutElementUnassigned;var i=this.getLayoutElement(n[0]),o=this.getLayoutElement(n[1]);return eu.create(this,i.getKey(),o.getKey())}return e},t.prototype.registerVanillaBiome=function(t){this.vanillaBiomes.set(t.getKey(),t)},t.prototype.registerGridElement=function(t){this.gridElements.set(t.getKey(),t)},t.prototype.registerSlice=function(t){this.gridElements.set(t.getKey(),t),this.slices.push(t)},t.prototype.registerLayout=function(t){this.gridElements.set(t.getKey(),t),this.layouts.push(t)},t.prototype.registerBiome=function(t){this.gridElements.set(t.getKey(),t),this.biomes.push(t)},t.prototype.removeGridElement=function(t){if(this.gridElements.delete(t.getKey()),this.slices.forEach((function(e){return e.deleteGridElement(t.getKey())})),this.layouts.forEach((function(e){return e.deleteGridElement(t.getKey())})),t instanceof Ql){var e=this.slices.indexOf(t);e>=0&&this.slices.splice(e,1);var n=this.layouts.indexOf(t);n>=0&&this.layouts.splice(n,1)}if(t instanceof Pi){var i=this.biomes.indexOf(t);this.biomes.splice(i,1)}},t.prototype.findIndex=function(t,e){return e<t[0].min?0:e>t[t.length-1].max?t.length-1:t.findIndex((function(t){return t.min<=e&&t.max>e}))},t.prototype.getIndexes=function(t){var e,n=this.findIndex(this.weirdnesses,t.w),i=this.findIndex(this.continentalnesses,t.c),o=this.findIndex(this.erosions,t.e),r=this.findIndex(this.temperatures,t.t),s=this.findIndex(this.humidities,t.h);return e="surface"===this.vis_y_level?-.01:-(this.vis_y_level-64)/128+this.splines.offset.apply(t.c,t.e,t.w),{w:n,e:o,c:i,t:r,h:s,d:this.findIndex(this.depths,e)}},t.prototype.lookupRecursive=function(t){if(void 0!==t&&void 0!==this.weirdnesses[t.w]){var e=this.dimension.lookupRecursive(t,"Any",!1);return e instanceof Pi?e:void 0}},t.prototype.lookupRecursiveWithTracking=function(t){if(void 0!==t){if(void 0===this.weirdnesses[t.w])return{};var e=this.dimension.lookupRecursiveWithTracking(t,"Any",!0);return{slice:e.slice,layout:e.layout,biome:e.biome,mode:e.mode}}},t.prototype.deleteParam=function(t,e){"humidity"===t||"temperature"===t?(this.layouts.forEach((function(n){return n.deleteParam(t,e)})),"humidity"===t?this.humidities.splice(e,1):this.temperatures.splice(e,1)):"continentalness"===t||"erosion"===t?(this.slices.forEach((function(n){return n.deleteParam(t,e)})),"continentalness"===t?this.continentalnesses.splice(e,1):this.erosions.splice(e,1)):"weirdness"!==t&&"depth"!==t||(this.dimension.deleteParam(t,e),"weirdness"===t?this.weirdnesses.splice(e,1):this.depths.splice(e,1))},t.prototype.splitParam=function(t,e){if("humidity"===t||"temperature"===t)if(this.layouts.forEach((function(n){return n.splitParam(t,e)})),"humidity"===t){var n=(this.humidities[e].min+this.humidities[e].max)/2,i=new _i.Param(this.humidities[e].min,n),o=new _i.Param(n,this.humidities[e].max);this.humidities.splice(e,1,i,o)}else{n=(this.temperatures[e].min+this.temperatures[e].max)/2;var r=new _i.Param(this.temperatures[e].min,n),s=new _i.Param(n,this.temperatures[e].max);this.temperatures.splice(e,1,r,s)}else if("continentalness"===t||"erosion"===t)if(this.slices.forEach((function(n){return n.splitParam(t,e)})),"continentalness"===t){n=(this.continentalnesses[e].min+this.continentalnesses[e].max)/2;var a=new _i.Param(this.continentalnesses[e].min,n),l=new _i.Param(n,this.continentalnesses[e].max);this.continentalnesses.splice(e,1,a,l)}else{n=(this.erosions[e].min+this.erosions[e].max)/2;var u=new _i.Param(this.erosions[e].min,n),h=new _i.Param(n,this.erosions[e].max);this.erosions.splice(e,1,u,h)}else"weirdness"!==t&&"depth"!==t||(this.dimension.splitParam(t,e),"weirdness"===t?(n=(this.weirdnesses[e].min+this.weirdnesses[e].max)/2,a=new _i.Param(this.weirdnesses[e].min,n),l=new _i.Param(n,this.weirdnesses[e].max),this.weirdnesses.splice(e,1,a,l)):(n=(this.depths[e].min+this.depths[e].max)/2,u=new _i.Param(this.depths[e].min,n),h=new _i.Param(n,this.depths[e].max),this.depths.splice(e,1,u,h)))},t.prototype.getNumTemperatures=function(){return this.temperatures.length},t.prototype.getNumHumidities=function(){return this.humidities.length},t.prototype.getNumContinentalnesses=function(){return this.continentalnesses.length},t.prototype.getNumErosions=function(){return this.erosions.length},t.prototype.getNumWeirdnesses=function(){return this.weirdnesses.length},t.prototype.getNumDepths=function(){return this.depths.length},t}(),ru=2,su=!0,au=document.getElementsByClassName("closable"),lu=function(t){au[t].getElementsByClassName("button")[0].onclick=function(){void 0!==au[t].onopenchange&&au[t].onopenchange(),au[t].classList.toggle("closed"),Vl.getInstance().refresh({})}},uu=0;uu<au.length;uu++)lu(uu);Ol.preInitalize(!1);var hu=new ou;Vl.create(hu),fetch("minecraft_overworld.snowcapped.json").then((function(t){return t.text()})).then((function(t){hu.loadJSON(JSON.parse(t)),Vl.getInstance().refresh({biome:{},spline:!0,grids:!0,noises:!0})}))})()})();
//# sourceMappingURL=bundle.js.map