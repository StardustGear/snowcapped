/*! For license information please see multinoiseworker.js.LICENSE.txt */
(()=>{var t={487:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},12:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,i=0;n<t.length;n++,i+=8)e[i>>>5]|=t[n]<<24-i%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],i=0;i<t.length;i+=3)for(var r=t[i]<<16|t[i+1]<<8|t[i+2],s=0;s<4;s++)8*i+6*s<=8*t.length?n.push(e.charAt(r>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],i=0,r=0;i<t.length;r=++i%4)0!=r&&n.push((e.indexOf(t.charAt(i-1))&Math.pow(2,-2*r+8)-1)<<2*r|e.indexOf(t.charAt(i))>>>6-2*r);return n}},t.exports=n},738:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},568:(t,e,n)=>{var i,r,s,a,o;i=n(12),r=n(487).utf8,s=n(738),a=n(487).bin,(o=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?a.stringToBytes(t):r.stringToBytes(t):s(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=i.bytesToWords(t),l=8*t.length,d=1732584193,h=-271733879,u=-1732584194,c=271733878,f=0;f<n.length;f++)n[f]=16711935&(n[f]<<8|n[f]>>>24)|4278255360&(n[f]<<24|n[f]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var _=o._ff,g=o._gg,p=o._hh,m=o._ii;for(f=0;f<n.length;f+=16){var w=d,b=h,v=u,y=c;d=_(d,h,u,c,n[f+0],7,-680876936),c=_(c,d,h,u,n[f+1],12,-389564586),u=_(u,c,d,h,n[f+2],17,606105819),h=_(h,u,c,d,n[f+3],22,-1044525330),d=_(d,h,u,c,n[f+4],7,-176418897),c=_(c,d,h,u,n[f+5],12,1200080426),u=_(u,c,d,h,n[f+6],17,-1473231341),h=_(h,u,c,d,n[f+7],22,-45705983),d=_(d,h,u,c,n[f+8],7,1770035416),c=_(c,d,h,u,n[f+9],12,-1958414417),u=_(u,c,d,h,n[f+10],17,-42063),h=_(h,u,c,d,n[f+11],22,-1990404162),d=_(d,h,u,c,n[f+12],7,1804603682),c=_(c,d,h,u,n[f+13],12,-40341101),u=_(u,c,d,h,n[f+14],17,-1502002290),d=g(d,h=_(h,u,c,d,n[f+15],22,1236535329),u,c,n[f+1],5,-165796510),c=g(c,d,h,u,n[f+6],9,-1069501632),u=g(u,c,d,h,n[f+11],14,643717713),h=g(h,u,c,d,n[f+0],20,-373897302),d=g(d,h,u,c,n[f+5],5,-701558691),c=g(c,d,h,u,n[f+10],9,38016083),u=g(u,c,d,h,n[f+15],14,-660478335),h=g(h,u,c,d,n[f+4],20,-405537848),d=g(d,h,u,c,n[f+9],5,568446438),c=g(c,d,h,u,n[f+14],9,-1019803690),u=g(u,c,d,h,n[f+3],14,-187363961),h=g(h,u,c,d,n[f+8],20,1163531501),d=g(d,h,u,c,n[f+13],5,-1444681467),c=g(c,d,h,u,n[f+2],9,-51403784),u=g(u,c,d,h,n[f+7],14,1735328473),d=p(d,h=g(h,u,c,d,n[f+12],20,-1926607734),u,c,n[f+5],4,-378558),c=p(c,d,h,u,n[f+8],11,-2022574463),u=p(u,c,d,h,n[f+11],16,1839030562),h=p(h,u,c,d,n[f+14],23,-35309556),d=p(d,h,u,c,n[f+1],4,-1530992060),c=p(c,d,h,u,n[f+4],11,1272893353),u=p(u,c,d,h,n[f+7],16,-155497632),h=p(h,u,c,d,n[f+10],23,-1094730640),d=p(d,h,u,c,n[f+13],4,681279174),c=p(c,d,h,u,n[f+0],11,-358537222),u=p(u,c,d,h,n[f+3],16,-722521979),h=p(h,u,c,d,n[f+6],23,76029189),d=p(d,h,u,c,n[f+9],4,-640364487),c=p(c,d,h,u,n[f+12],11,-421815835),u=p(u,c,d,h,n[f+15],16,530742520),d=m(d,h=p(h,u,c,d,n[f+2],23,-995338651),u,c,n[f+0],6,-198630844),c=m(c,d,h,u,n[f+7],10,1126891415),u=m(u,c,d,h,n[f+14],15,-1416354905),h=m(h,u,c,d,n[f+5],21,-57434055),d=m(d,h,u,c,n[f+12],6,1700485571),c=m(c,d,h,u,n[f+3],10,-1894986606),u=m(u,c,d,h,n[f+10],15,-1051523),h=m(h,u,c,d,n[f+1],21,-2054922799),d=m(d,h,u,c,n[f+8],6,1873313359),c=m(c,d,h,u,n[f+15],10,-30611744),u=m(u,c,d,h,n[f+6],15,-1560198380),h=m(h,u,c,d,n[f+13],21,1309151649),d=m(d,h,u,c,n[f+4],6,-145523070),c=m(c,d,h,u,n[f+11],10,-1120210379),u=m(u,c,d,h,n[f+2],15,718787259),h=m(h,u,c,d,n[f+9],21,-343485551),d=d+w>>>0,h=h+b>>>0,u=u+v>>>0,c=c+y>>>0}return i.endian([d,h,u,c])})._ff=function(t,e,n,i,r,s,a){var o=t+(e&n|~e&i)+(r>>>0)+a;return(o<<s|o>>>32-s)+e},o._gg=function(t,e,n,i,r,s,a){var o=t+(e&i|n&~i)+(r>>>0)+a;return(o<<s|o>>>32-s)+e},o._hh=function(t,e,n,i,r,s,a){var o=t+(e^n^i)+(r>>>0)+a;return(o<<s|o>>>32-s)+e},o._ii=function(t,e,n,i,r,s,a){var o=t+(n^(e|~i))+(r>>>0)+a;return(o<<s|o>>>32-s)+e},o._blocksize=16,o._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=i.wordsToBytes(o(t,e));return e&&e.asBytes?n:e&&e.asString?a.bytesToString(n):i.bytesToHex(n)}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t){let e=t.length;for(;--e>=0;)t[e]=0}const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),i=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),s=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=new Array(576);t(a);const o=new Array(60);t(o);const l=new Array(512);t(l);const d=new Array(256);t(d);const h=new Array(29);t(h);const u=new Array(30);function c(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}let f,_,g;function p(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(u);const m=t=>t<256?l[t]:l[256+(t>>>7)],w=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},b=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},v=(t,e,n)=>{b(t,n[2*e],n[2*e+1])},y=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},k=(t,e,n)=>{const i=new Array(16);let r,s,a=0;for(r=1;r<=15;r++)i[r]=a=a+n[r-1]<<1;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=y(i[e]++,e))}},x=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},F=t=>{t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},I=(t,e,n,i)=>{const r=2*e,s=2*n;return t[r]<t[s]||t[r]===t[s]&&i[e]<=i[n]},P=(t,e,n)=>{const i=t.heap[n];let r=n<<1;for(;r<=t.heap_len&&(r<t.heap_len&&I(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!I(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i},A=(t,n,r)=>{let s,a,o,l,c=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],a=t.pending_buf[t.l_buf+c],c++,0===s?v(t,a,n):(o=d[a],v(t,o+256+1,n),l=e[o],0!==l&&(a-=h[o],b(t,a,l)),s--,o=m(s),v(t,o,r),l=i[o],0!==l&&(s-=u[o],b(t,s,l)))}while(c<t.last_lit);v(t,256,n)},B=(t,e)=>{const n=e.dyn_tree,i=e.stat_desc.static_tree,r=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,o,l,d=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<s;a++)0!==n[2*a]?(t.heap[++t.heap_len]=d=a,t.depth[a]=0):n[2*a+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=d<2?++d:0,n[2*l]=1,t.depth[l]=0,t.opt_len--,r&&(t.static_len-=i[2*l+1]);for(e.max_code=d,a=t.heap_len>>1;a>=1;a--)P(t,n,a);l=s;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],P(t,n,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,n[2*l]=n[2*a]+n[2*o],t.depth[l]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,n[2*a+1]=n[2*o+1]=l,t.heap[1]=l++,P(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,i=e.max_code,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let d,h,u,c,f,_,g=0;for(c=0;c<=15;c++)t.bl_count[c]=0;for(n[2*t.heap[t.heap_max]+1]=0,d=t.heap_max+1;d<573;d++)h=t.heap[d],c=n[2*n[2*h+1]+1]+1,c>l&&(c=l,g++),n[2*h+1]=c,h>i||(t.bl_count[c]++,f=0,h>=o&&(f=a[h-o]),_=n[2*h],t.opt_len+=_*(c+f),s&&(t.static_len+=_*(r[2*h+1]+f)));if(0!==g){do{for(c=l-1;0===t.bl_count[c];)c--;t.bl_count[c]--,t.bl_count[c+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(c=l;0!==c;c--)for(h=t.bl_count[c];0!==h;)u=t.heap[--d],u>i||(n[2*u+1]!==c&&(t.opt_len+=(c-n[2*u+1])*n[2*u],n[2*u+1]=c),h--)}})(t,e),k(n,d,t.bl_count)},S=(t,e,n)=>{let i,r,s=-1,a=e[1],o=0,l=7,d=4;for(0===a&&(l=138,d=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=e[2*(i+1)+1],++o<l&&r===a||(o<d?t.bl_tree[2*r]+=o:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=r,0===a?(l=138,d=3):r===a?(l=6,d=3):(l=7,d=4))},E=(t,e,n)=>{let i,r,s=-1,a=e[1],o=0,l=7,d=4;for(0===a&&(l=138,d=3),i=0;i<=n;i++)if(r=a,a=e[2*(i+1)+1],!(++o<l&&r===a)){if(o<d)do{v(t,r,t.bl_tree)}while(0!=--o);else 0!==r?(r!==s&&(v(t,r,t.bl_tree),o--),v(t,16,t.bl_tree),b(t,o-3,2)):o<=10?(v(t,17,t.bl_tree),b(t,o-3,3)):(v(t,18,t.bl_tree),b(t,o-11,7));o=0,s=r,0===a?(l=138,d=3):r===a?(l=6,d=3):(l=7,d=4)}};let z=!1;const O=(t,e,n,i)=>{b(t,0+(i?1:0),3),((t,e,n,i)=>{F(t),w(t,n),w(t,~n),t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n})(t,e,n)};var R={_tr_init:t=>{z||((()=>{let t,n,s,p,m;const w=new Array(16);for(s=0,p=0;p<28;p++)for(h[p]=s,t=0;t<1<<e[p];t++)d[s++]=p;for(d[s-1]=p,m=0,p=0;p<16;p++)for(u[p]=m,t=0;t<1<<i[p];t++)l[m++]=p;for(m>>=7;p<30;p++)for(u[p]=m<<7,t=0;t<1<<i[p]-7;t++)l[256+m++]=p;for(n=0;n<=15;n++)w[n]=0;for(t=0;t<=143;)a[2*t+1]=8,t++,w[8]++;for(;t<=255;)a[2*t+1]=9,t++,w[9]++;for(;t<=279;)a[2*t+1]=7,t++,w[7]++;for(;t<=287;)a[2*t+1]=8,t++,w[8]++;for(k(a,287,w),t=0;t<30;t++)o[2*t+1]=5,o[2*t]=y(t,5);f=new c(a,e,257,286,15),_=new c(o,i,0,30,15),g=new c(new Array(0),r,0,19,7)})(),z=!0),t.l_desc=new p(t.dyn_ltree,f),t.d_desc=new p(t.dyn_dtree,_),t.bl_desc=new p(t.bl_tree,g),t.bi_buf=0,t.bi_valid=0,x(t)},_tr_stored_block:O,_tr_flush_block:(t,e,n,i)=>{let r,l,d=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),B(t,t.l_desc),B(t,t.d_desc),d=(t=>{let e;for(S(t,t.dyn_ltree,t.l_desc.max_code),S(t,t.dyn_dtree,t.d_desc.max_code),B(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*s[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),r=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=r&&(r=l)):r=l=n+5,n+4<=r&&-1!==e?O(t,e,n,i):4===t.strategy||l===r?(b(t,2+(i?1:0),3),A(t,a,o)):(b(t,4+(i?1:0),3),((t,e,n,i)=>{let r;for(b(t,e-257,5),b(t,n-1,5),b(t,i-4,4),r=0;r<i;r++)b(t,t.bl_tree[2*s[r]+1],3);E(t,t.dyn_ltree,e-1),E(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,d+1),A(t,t.dyn_ltree,t.dyn_dtree)),x(t),i&&F(t)},_tr_tally:(t,e,n)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(d[n]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{b(t,2,3),v(t,256,a),(t=>{16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},T=(t,e,n,i)=>{let r=65535&t|0,s=t>>>16&65535|0,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{r=r+e[i++]|0,s=s+r|0}while(--a);r%=65521,s%=65521}return r|s<<16|0};const M=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var L=(t,e,n,i)=>{const r=M,s=i+n;t^=-1;for(let n=i;n<s;n++)t=t>>>8^r[255&(t^e[n])];return-1^t},U={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},N={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:D,_tr_stored_block:Z,_tr_flush_block:C,_tr_tally:J,_tr_align:j}=R,{Z_NO_FLUSH:H,Z_PARTIAL_FLUSH:W,Z_FULL_FLUSH:G,Z_FINISH:V,Z_BLOCK:K,Z_OK:Y,Z_STREAM_END:q,Z_STREAM_ERROR:$,Z_DATA_ERROR:X,Z_BUF_ERROR:Q,Z_DEFAULT_COMPRESSION:tt,Z_FILTERED:et,Z_HUFFMAN_ONLY:nt,Z_RLE:it,Z_FIXED:rt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:at,Z_DEFLATED:ot}=N,lt=258,dt=262,ht=103,ut=113,ct=666,ft=(t,e)=>(t.msg=U[e],e),_t=t=>(t<<1)-(t>4?9:0),gt=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let pt=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const mt=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},wt=(t,e)=>{C(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,mt(t.strm)},bt=(t,e)=>{t.pending_buf[t.pending++]=e},vt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},yt=(t,e,n,i)=>{let r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),n),1===t.state.wrap?t.adler=T(t.adler,e,r,n):2===t.state.wrap&&(t.adler=L(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)},kt=(t,e)=>{let n,i,r=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-dt?t.strstart-(t.w_size-dt):0,d=t.window,h=t.w_mask,u=t.prev,c=t.strstart+lt;let f=d[s+a-1],_=d[s+a];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(n=e,d[n+a]===_&&d[n+a-1]===f&&d[n]===d[s]&&d[++n]===d[s+1]){s+=2,n++;do{}while(d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&s<c);if(i=lt-(c-s),s=c-lt,i>a){if(t.match_start=e,a=i,i>=o)break;f=d[s+a-1],_=d[s+a]}}}while((e=u[e&h])>l&&0!=--r);return a<=t.lookahead?a:t.lookahead},xt=t=>{const e=t.w_size;let n,i,r,s,a;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-dt)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,i=t.hash_size,n=i;do{r=t.head[--n],t.head[n]=r>=e?r-e:0}while(--i);i=e,n=i;do{r=t.prev[--n],t.prev[n]=r>=e?r-e:0}while(--i);s+=e}if(0===t.strm.avail_in)break;if(i=yt(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=pt(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=pt(t,t.ins_h,t.window[a+3-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<dt&&0!==t.strm.avail_in)},Ft=(t,e)=>{let n,i;for(;;){if(t.lookahead<dt){if(xt(t),t.lookahead<dt&&e===H)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=pt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-dt&&(t.match_length=kt(t,n)),t.match_length>=3)if(i=J(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=pt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=pt(t,t.ins_h,t.window[t.strstart+1]);else i=J(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(wt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(wt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(wt(t,!1),0===t.strm.avail_out)?1:2},It=(t,e)=>{let n,i,r;for(;;){if(t.lookahead<dt){if(xt(t),t.lookahead<dt&&e===H)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=pt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-dt&&(t.match_length=kt(t,n),t.match_length<=5&&(t.strategy===et||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,i=J(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=pt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(wt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=J(t,0,t.window[t.strstart-1]),i&&wt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=J(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(wt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(wt(t,!1),0===t.strm.avail_out)?1:2};function Pt(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}const At=[new Pt(0,0,0,0,((t,e)=>{let n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(xt(t),0===t.lookahead&&e===H)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,wt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-dt&&(wt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(wt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(wt(t,!1),t.strm.avail_out),1)})),new Pt(4,4,8,4,Ft),new Pt(4,5,16,8,Ft),new Pt(4,6,32,32,Ft),new Pt(4,4,16,16,It),new Pt(8,16,32,32,It),new Pt(8,16,128,128,It),new Pt(8,32,128,256,It),new Pt(32,128,258,1024,It),new Pt(32,258,258,4096,It)];function Bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ot,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),gt(this.dyn_ltree),gt(this.dyn_dtree),gt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),gt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),gt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const St=t=>{if(!t||!t.state)return ft(t,$);t.total_in=t.total_out=0,t.data_type=at;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:ut,t.adler=2===e.wrap?0:1,e.last_flush=H,D(e),Y},Et=t=>{const e=St(t);return e===Y&&((n=t.state).window_size=2*n.w_size,gt(n.head),n.max_lazy_match=At[n.level].max_lazy,n.good_match=At[n.level].good_length,n.nice_match=At[n.level].nice_length,n.max_chain_length=At[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e;var n},zt=(t,e,n,i,r,s)=>{if(!t)return $;let a=1;if(e===tt&&(e=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),r<1||r>9||n!==ot||i<8||i>15||e<0||e>9||s<0||s>rt)return ft(t,$);8===i&&(i=9);const o=new Bt;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=n,Et(t)};var Ot=zt,Rt=(t,e)=>t&&t.state?2!==t.state.wrap?$:(t.state.gzhead=e,Y):$,Tt=(t,e)=>{let n,i;if(!t||!t.state||e>K||e<0)return t?ft(t,$):$;const r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===ct&&e!==V)return ft(t,0===t.avail_out?Q:$);r.strm=t;const s=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,bt(r,31),bt(r,139),bt(r,8),r.gzhead?(bt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),bt(r,255&r.gzhead.time),bt(r,r.gzhead.time>>8&255),bt(r,r.gzhead.time>>16&255),bt(r,r.gzhead.time>>24&255),bt(r,9===r.level?2:r.strategy>=nt||r.level<2?4:0),bt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(bt(r,255&r.gzhead.extra.length),bt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=L(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(bt(r,0),bt(r,0),bt(r,0),bt(r,0),bt(r,0),bt(r,9===r.level?2:r.strategy>=nt||r.level<2?4:0),bt(r,3),r.status=ut);else{let e=ot+(r.w_bits-8<<4)<<8,n=-1;n=r.strategy>=nt||r.level<2?0:r.level<6?1:6===r.level?2:3,e|=n<<6,0!==r.strstart&&(e|=32),e+=31-e%31,r.status=ut,vt(r,e),0!==r.strstart&&(vt(r,t.adler>>>16),vt(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(t.adler=L(t.adler,r.pending_buf,r.pending-n,n)),mt(t),n=r.pending,r.pending!==r.pending_buf_size));)bt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(t.adler=L(t.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(t.adler=L(t.adler,r.pending_buf,r.pending-n,n)),mt(t),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,bt(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>n&&(t.adler=L(t.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(t.adler=L(t.adler,r.pending_buf,r.pending-n,n)),mt(t),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,bt(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>n&&(t.adler=L(t.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.status=ht)}else r.status=ht;if(r.status===ht&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&mt(t),r.pending+2<=r.pending_buf_size&&(bt(r,255&t.adler),bt(r,t.adler>>8&255),t.adler=0,r.status=ut)):r.status=ut),0!==r.pending){if(mt(t),0===t.avail_out)return r.last_flush=-1,Y}else if(0===t.avail_in&&_t(e)<=_t(s)&&e!==V)return ft(t,Q);if(r.status===ct&&0!==t.avail_in)return ft(t,Q);if(0!==t.avail_in||0!==r.lookahead||e!==H&&r.status!==ct){let n=r.strategy===nt?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(xt(t),0===t.lookahead)){if(e===H)return 1;break}if(t.match_length=0,n=J(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(wt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(wt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(wt(t,!1),0===t.strm.avail_out)?1:2})(r,e):r.strategy===it?((t,e)=>{let n,i,r,s;const a=t.window;for(;;){if(t.lookahead<=lt){if(xt(t),t.lookahead<=lt&&e===H)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=t.strstart-1,i=a[r],i===a[++r]&&i===a[++r]&&i===a[++r])){s=t.strstart+lt;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<s);t.match_length=lt-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=J(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=J(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(wt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(wt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(wt(t,!1),0===t.strm.avail_out)?1:2})(r,e):At[r.level].func(r,e);if(3!==n&&4!==n||(r.status=ct),1===n||3===n)return 0===t.avail_out&&(r.last_flush=-1),Y;if(2===n&&(e===W?j(r):e!==K&&(Z(r,0,0,!1),e===G&&(gt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),mt(t),0===t.avail_out))return r.last_flush=-1,Y}return e!==V?Y:r.wrap<=0?q:(2===r.wrap?(bt(r,255&t.adler),bt(r,t.adler>>8&255),bt(r,t.adler>>16&255),bt(r,t.adler>>24&255),bt(r,255&t.total_in),bt(r,t.total_in>>8&255),bt(r,t.total_in>>16&255),bt(r,t.total_in>>24&255)):(vt(r,t.adler>>>16),vt(r,65535&t.adler)),mt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Y:q)},Mt=t=>{if(!t||!t.state)return $;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==ht&&e!==ut&&e!==ct?ft(t,$):(t.state=null,e===ut?ft(t,X):Y)},Lt=(t,e)=>{let n=e.length;if(!t||!t.state)return $;const i=t.state,r=i.wrap;if(2===r||1===r&&42!==i.status||i.lookahead)return $;if(1===r&&(t.adler=T(t.adler,e,n,0)),i.wrap=0,n>=i.w_size){0===r&&(gt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(n-i.w_size,n),0),e=t,n=i.w_size}const s=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,xt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=pt(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,xt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=a,t.input=o,t.avail_in=s,i.wrap=r,Y};const Ut=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Nt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)Ut(n,e)&&(t[e]=n[e])}}return t},Dt=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,i=0,r=t.length;e<r;e++){let r=t[e];n.set(r,i),i+=r.length}return n};let Zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Zt=!1}const Ct=new Uint8Array(256);for(let t=0;t<256;t++)Ct[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ct[254]=Ct[254]=1;var Jt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,i,r,s,a=t.length,o=0;for(r=0;r<a;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<a&&(i=t.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),s=0,r=0;s<o;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<a&&(i=t.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},jt=(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,r;const s=new Array(2*n);for(r=0,i=0;i<n;){let e=t[i++];if(e<128){s[r++]=e;continue}let a=Ct[e];if(a>4)s[r++]=65533,i+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&i<n;)e=e<<6|63&t[i++],a--;a>1?s[r++]=65533:e<65536?s[r++]=e:(e-=65536,s[r++]=55296|e>>10&1023,s[r++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Zt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n})(s,r)},Ht=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+Ct[t[n]]>e?n:e},Wt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Gt=Object.prototype.toString,{Z_NO_FLUSH:Vt,Z_SYNC_FLUSH:Kt,Z_FULL_FLUSH:Yt,Z_FINISH:qt,Z_OK:$t,Z_STREAM_END:Xt,Z_DEFAULT_COMPRESSION:Qt,Z_DEFAULT_STRATEGY:te,Z_DEFLATED:ee}=N;function ne(t){this.options=Nt({level:Qt,method:ee,chunkSize:16384,windowBits:15,memLevel:8,strategy:te},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Wt,this.strm.avail_out=0;let n=Ot(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==$t)throw new Error(U[n]);if(e.header&&Rt(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Jt(e.dictionary):"[object ArrayBuffer]"===Gt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Lt(this.strm,t),n!==$t)throw new Error(U[n]);this._dict_set=!0}}function ie(t,e){const n=new ne(e);if(n.push(t,!0),n.err)throw n.msg||U[n.err];return n.result}ne.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?qt:Vt,"string"==typeof t?n.input=Jt(t):"[object ArrayBuffer]"===Gt.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===Kt||s===Yt)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=Tt(n,s),r===Xt)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=Mt(this.strm),this.onEnd(r),this.ended=!0,r===$t;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ne.prototype.onData=function(t){this.chunks.push(t)},ne.prototype.onEnd=function(t){t===$t&&(this.result=Dt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var re={Deflate:ne,deflate:ie,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ie(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ie(t,e)},constants:N},se=function(t,e){let n,i,r,s,a,o,l,d,h,u,c,f,_,g,p,m,w,b,v,y,k,x,F,I;const P=t.state;n=t.next_in,F=t.input,i=n+(t.avail_in-5),r=t.next_out,I=t.output,s=r-(e-t.avail_out),a=r+(t.avail_out-257),o=P.dmax,l=P.wsize,d=P.whave,h=P.wnext,u=P.window,c=P.hold,f=P.bits,_=P.lencode,g=P.distcode,p=(1<<P.lenbits)-1,m=(1<<P.distbits)-1;t:do{f<15&&(c+=F[n++]<<f,f+=8,c+=F[n++]<<f,f+=8),w=_[c&p];e:for(;;){if(b=w>>>24,c>>>=b,f-=b,b=w>>>16&255,0===b)I[r++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=_[(65535&w)+(c&(1<<b)-1)];continue e}if(32&b){P.mode=12;break t}t.msg="invalid literal/length code",P.mode=30;break t}v=65535&w,b&=15,b&&(f<b&&(c+=F[n++]<<f,f+=8),v+=c&(1<<b)-1,c>>>=b,f-=b),f<15&&(c+=F[n++]<<f,f+=8,c+=F[n++]<<f,f+=8),w=g[c&m];n:for(;;){if(b=w>>>24,c>>>=b,f-=b,b=w>>>16&255,!(16&b)){if(0==(64&b)){w=g[(65535&w)+(c&(1<<b)-1)];continue n}t.msg="invalid distance code",P.mode=30;break t}if(y=65535&w,b&=15,f<b&&(c+=F[n++]<<f,f+=8,f<b&&(c+=F[n++]<<f,f+=8)),y+=c&(1<<b)-1,y>o){t.msg="invalid distance too far back",P.mode=30;break t}if(c>>>=b,f-=b,b=r-s,y>b){if(b=y-b,b>d&&P.sane){t.msg="invalid distance too far back",P.mode=30;break t}if(k=0,x=u,0===h){if(k+=l-b,b<v){v-=b;do{I[r++]=u[k++]}while(--b);k=r-y,x=I}}else if(h<b){if(k+=l+h-b,b-=h,b<v){v-=b;do{I[r++]=u[k++]}while(--b);if(k=0,h<v){b=h,v-=b;do{I[r++]=u[k++]}while(--b);k=r-y,x=I}}}else if(k+=h-b,b<v){v-=b;do{I[r++]=u[k++]}while(--b);k=r-y,x=I}for(;v>2;)I[r++]=x[k++],I[r++]=x[k++],I[r++]=x[k++],v-=3;v&&(I[r++]=x[k++],v>1&&(I[r++]=x[k++]))}else{k=r-y;do{I[r++]=I[k++],I[r++]=I[k++],I[r++]=I[k++],v-=3}while(v>2);v&&(I[r++]=I[k++],v>1&&(I[r++]=I[k++]))}break}}break}}while(n<i&&r<a);v=f>>3,n-=v,f-=v<<3,c&=(1<<f)-1,t.next_in=n,t.next_out=r,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=r<a?a-r+257:257-(r-a),P.hold=c,P.bits=f};const ae=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),oe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),le=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),de=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var he=(t,e,n,i,r,s,a,o)=>{const l=o.bits;let d,h,u,c,f,_,g=0,p=0,m=0,w=0,b=0,v=0,y=0,k=0,x=0,F=0,I=null,P=0;const A=new Uint16Array(16),B=new Uint16Array(16);let S,E,z,O=null,R=0;for(g=0;g<=15;g++)A[g]=0;for(p=0;p<i;p++)A[e[n+p]]++;for(b=l,w=15;w>=1&&0===A[w];w--);if(b>w&&(b=w),0===w)return r[s++]=20971520,r[s++]=20971520,o.bits=1,0;for(m=1;m<w&&0===A[m];m++);for(b<m&&(b=m),k=1,g=1;g<=15;g++)if(k<<=1,k-=A[g],k<0)return-1;if(k>0&&(0===t||1!==w))return-1;for(B[1]=0,g=1;g<15;g++)B[g+1]=B[g]+A[g];for(p=0;p<i;p++)0!==e[n+p]&&(a[B[e[n+p]]++]=p);if(0===t?(I=O=a,_=19):1===t?(I=ae,P-=257,O=oe,R-=257,_=256):(I=le,O=de,_=-1),F=0,p=0,g=m,f=s,v=b,y=0,u=-1,x=1<<b,c=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){S=g-y,a[p]<_?(E=0,z=a[p]):a[p]>_?(E=O[R+a[p]],z=I[P+a[p]]):(E=96,z=0),d=1<<g-y,h=1<<v,m=h;do{h-=d,r[f+(F>>y)+h]=S<<24|E<<16|z|0}while(0!==h);for(d=1<<g-1;F&d;)d>>=1;if(0!==d?(F&=d-1,F+=d):F=0,p++,0==--A[g]){if(g===w)break;g=e[n+a[p]]}if(g>b&&(F&c)!==u){for(0===y&&(y=b),f+=m,v=g-y,k=1<<v;v+y<w&&(k-=A[v+y],!(k<=0));)v++,k<<=1;if(x+=1<<v,1===t&&x>852||2===t&&x>592)return 1;u=F&c,r[u]=b<<24|v<<16|f-s|0}}return 0!==F&&(r[f+F]=g-y<<24|64<<16|0),o.bits=b,0};const{Z_FINISH:ue,Z_BLOCK:ce,Z_TREES:fe,Z_OK:_e,Z_STREAM_END:ge,Z_NEED_DICT:pe,Z_STREAM_ERROR:me,Z_DATA_ERROR:we,Z_MEM_ERROR:be,Z_BUF_ERROR:ve,Z_DEFLATED:ye}=N,ke=12,xe=30,Fe=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Ie(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Pe=t=>{if(!t||!t.state)return me;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,_e},Ae=t=>{if(!t||!t.state)return me;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Pe(t)},Be=(t,e)=>{let n;if(!t||!t.state)return me;const i=t.state;return e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?me:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,Ae(t))},Se=(t,e)=>{if(!t)return me;const n=new Ie;t.state=n,n.window=null;const i=Be(t,e);return i!==_e&&(t.state=null),i};let Ee,ze,Oe=!0;const Re=t=>{if(Oe){Ee=new Int32Array(512),ze=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(he(1,t.lens,0,288,Ee,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;he(2,t.lens,0,32,ze,0,t.work,{bits:5}),Oe=!1}t.lencode=Ee,t.lenbits=9,t.distcode=ze,t.distbits=5},Te=(t,e,n,i)=>{let r;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(e.subarray(n-i,n-i+r),s.wnext),(i-=r)?(s.window.set(e.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0};var Me=Ae,Le=Se,Ue=(t,e)=>{let n,i,r,s,a,o,l,d,h,u,c,f,_,g,p,m,w,b,v,y,k,x,F=0;const I=new Uint8Array(4);let P,A;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return me;n=t.state,n.mode===ke&&(n.mode=13),a=t.next_out,r=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,d=n.hold,h=n.bits,u=o,c=l,x=_e;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;h<16;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}if(2&n.wrap&&35615===d){n.check=0,I[0]=255&d,I[1]=d>>>8&255,n.check=L(n.check,I,2,0),d=0,h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",n.mode=xe;break}if((15&d)!==ye){t.msg="unknown compression method",n.mode=xe;break}if(d>>>=4,h-=4,k=8+(15&d),0===n.wbits)n.wbits=k;else if(k>n.wbits){t.msg="invalid window size",n.mode=xe;break}n.dmax=1<<n.wbits,t.adler=n.check=1,n.mode=512&d?10:ke,d=0,h=0;break;case 2:for(;h<16;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}if(n.flags=d,(255&n.flags)!==ye){t.msg="unknown compression method",n.mode=xe;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=xe;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(I[0]=255&d,I[1]=d>>>8&255,n.check=L(n.check,I,2,0)),d=0,h=0,n.mode=3;case 3:for(;h<32;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&(I[0]=255&d,I[1]=d>>>8&255,I[2]=d>>>16&255,I[3]=d>>>24&255,n.check=L(n.check,I,4,0)),d=0,h=0,n.mode=4;case 4:for(;h<16;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(I[0]=255&d,I[1]=d>>>8&255,n.check=L(n.check,I,2,0)),d=0,h=0,n.mode=5;case 5:if(1024&n.flags){for(;h<16;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(I[0]=255&d,I[1]=d>>>8&255,n.check=L(n.check,I,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(f=n.length,f>o&&(f=o),f&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+f),k)),512&n.flags&&(n.check=L(n.check,i,f,s)),o-=f,s+=f,n.length-=f),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break t;f=0;do{k=i[s+f++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&f<o);if(512&n.flags&&(n.check=L(n.check,i,f,s)),o-=f,s+=f,k)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break t;f=0;do{k=i[s+f++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&f<o);if(512&n.flags&&(n.check=L(n.check,i,f,s)),o-=f,s+=f,k)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;h<16;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}if(d!==(65535&n.check)){t.msg="header crc mismatch",n.mode=xe;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=ke;break;case 10:for(;h<32;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}t.adler=n.check=Fe(d),d=0,h=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,n.hold=d,n.bits=h,pe;t.adler=n.check=1,n.mode=ke;case ke:if(e===ce||e===fe)break t;case 13:if(n.last){d>>>=7&h,h-=7&h,n.mode=27;break}for(;h<3;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}switch(n.last=1&d,d>>>=1,h-=1,3&d){case 0:n.mode=14;break;case 1:if(Re(n),n.mode=20,e===fe){d>>>=2,h-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=xe}d>>>=2,h-=2;break;case 14:for(d>>>=7&h,h-=7&h;h<32;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}if((65535&d)!=(d>>>16^65535)){t.msg="invalid stored block lengths",n.mode=xe;break}if(n.length=65535&d,d=0,h=0,n.mode=15,e===fe)break t;case 15:n.mode=16;case 16:if(f=n.length,f){if(f>o&&(f=o),f>l&&(f=l),0===f)break t;r.set(i.subarray(s,s+f),a),o-=f,s+=f,l-=f,a+=f,n.length-=f;break}n.mode=ke;break;case 17:for(;h<14;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}if(n.nlen=257+(31&d),d>>>=5,h-=5,n.ndist=1+(31&d),d>>>=5,h-=5,n.ncode=4+(15&d),d>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=xe;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;h<3;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}n.lens[B[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},x=he(0,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,x){t.msg="invalid code lengths set",n.mode=xe;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;F=n.lencode[d&(1<<n.lenbits)-1],p=F>>>24,m=F>>>16&255,w=65535&F,!(p<=h);){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}if(w<16)d>>>=p,h-=p,n.lens[n.have++]=w;else{if(16===w){for(A=p+2;h<A;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}if(d>>>=p,h-=p,0===n.have){t.msg="invalid bit length repeat",n.mode=xe;break}k=n.lens[n.have-1],f=3+(3&d),d>>>=2,h-=2}else if(17===w){for(A=p+3;h<A;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}d>>>=p,h-=p,k=0,f=3+(7&d),d>>>=3,h-=3}else{for(A=p+7;h<A;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}d>>>=p,h-=p,k=0,f=11+(127&d),d>>>=7,h-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=xe;break}for(;f--;)n.lens[n.have++]=k}}if(n.mode===xe)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=xe;break}if(n.lenbits=9,P={bits:n.lenbits},x=he(1,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,x){t.msg="invalid literal/lengths set",n.mode=xe;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},x=he(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,x){t.msg="invalid distances set",n.mode=xe;break}if(n.mode=20,e===fe)break t;case 20:n.mode=21;case 21:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,n.hold=d,n.bits=h,se(t,c),a=t.next_out,r=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,d=n.hold,h=n.bits,n.mode===ke&&(n.back=-1);break}for(n.back=0;F=n.lencode[d&(1<<n.lenbits)-1],p=F>>>24,m=F>>>16&255,w=65535&F,!(p<=h);){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}if(m&&0==(240&m)){for(b=p,v=m,y=w;F=n.lencode[y+((d&(1<<b+v)-1)>>b)],p=F>>>24,m=F>>>16&255,w=65535&F,!(b+p<=h);){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}d>>>=b,h-=b,n.back+=b}if(d>>>=p,h-=p,n.back+=p,n.length=w,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=ke;break}if(64&m){t.msg="invalid literal/length code",n.mode=xe;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(A=n.extra;h<A;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;F=n.distcode[d&(1<<n.distbits)-1],p=F>>>24,m=F>>>16&255,w=65535&F,!(p<=h);){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}if(0==(240&m)){for(b=p,v=m,y=w;F=n.distcode[y+((d&(1<<b+v)-1)>>b)],p=F>>>24,m=F>>>16&255,w=65535&F,!(b+p<=h);){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}d>>>=b,h-=b,n.back+=b}if(d>>>=p,h-=p,n.back+=p,64&m){t.msg="invalid distance code",n.mode=xe;break}n.offset=w,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(A=n.extra;h<A;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=xe;break}n.mode=25;case 25:if(0===l)break t;if(f=c-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=xe;break}f>n.wnext?(f-=n.wnext,_=n.wsize-f):_=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=r,_=a-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{r[a++]=g[_++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;r[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;h<32;){if(0===o)break t;o--,d|=i[s++]<<h,h+=8}if(c-=l,t.total_out+=c,n.total+=c,c&&(t.adler=n.check=n.flags?L(n.check,r,c,a-c):T(n.check,r,c,a-c)),c=l,(n.flags?d:Fe(d))!==n.check){t.msg="incorrect data check",n.mode=xe;break}d=0,h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;h<32;){if(0===o)break t;o--,d+=i[s++]<<h,h+=8}if(d!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=xe;break}d=0,h=0}n.mode=29;case 29:x=ge;break t;case xe:x=we;break t;case 31:return be;default:return me}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,n.hold=d,n.bits=h,(n.wsize||c!==t.avail_out&&n.mode<xe&&(n.mode<27||e!==ue))&&Te(t,t.output,t.next_out,c-t.avail_out),u-=t.avail_in,c-=t.avail_out,t.total_in+=u,t.total_out+=c,n.total+=c,n.wrap&&c&&(t.adler=n.check=n.flags?L(n.check,r,c,t.next_out-c):T(n.check,r,c,t.next_out-c)),t.data_type=n.bits+(n.last?64:0)+(n.mode===ke?128:0)+(20===n.mode||15===n.mode?256:0),(0===u&&0===c||e===ue)&&x===_e&&(x=ve),x},Ne=t=>{if(!t||!t.state)return me;let e=t.state;return e.window&&(e.window=null),t.state=null,_e},De=(t,e)=>{if(!t||!t.state)return me;const n=t.state;return 0==(2&n.wrap)?me:(n.head=e,e.done=!1,_e)},Ze=(t,e)=>{const n=e.length;let i,r,s;return t&&t.state?(i=t.state,0!==i.wrap&&11!==i.mode?me:11===i.mode&&(r=1,r=T(r,e,n,0),r!==i.check)?we:(s=Te(t,e,n,n),s?(i.mode=31,be):(i.havedict=1,_e))):me},Ce=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Je=Object.prototype.toString,{Z_NO_FLUSH:je,Z_FINISH:He,Z_OK:We,Z_STREAM_END:Ge,Z_NEED_DICT:Ve,Z_STREAM_ERROR:Ke,Z_DATA_ERROR:Ye,Z_MEM_ERROR:qe}=N;function $e(t){this.options=Nt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Wt,this.strm.avail_out=0;let n=Le(this.strm,e.windowBits);if(n!==We)throw new Error(U[n]);if(this.header=new Ce,De(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Jt(e.dictionary):"[object ArrayBuffer]"===Je.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Ze(this.strm,e.dictionary),n!==We)))throw new Error(U[n])}function Xe(t,e){const n=new $e(e);if(n.push(t),n.err)throw n.msg||U[n.err];return n.result}$e.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(a=e===~~e?e:!0===e?He:je,"[object ArrayBuffer]"===Je.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=Ue(n,a),s===Ve&&r&&(s=Ze(n,r),s===We?s=Ue(n,a):s===Ye&&(s=Ve));n.avail_in>0&&s===Ge&&n.state.wrap>0&&0!==t[n.next_in];)Me(n),s=Ue(n,a);switch(s){case Ke:case Ye:case Ve:case qe:return this.onEnd(s),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||s===Ge))if("string"===this.options.to){let t=Ht(n.output,n.next_out),e=n.next_out-t,r=jt(n.output,t);n.next_out=e,n.avail_out=i-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==We||0!==o){if(s===Ge)return s=Ne(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},$e.prototype.onData=function(t){this.chunks.push(t)},$e.prototype.onEnd=function(t){t===We&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Dt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Qe={Inflate:$e,inflate:Xe,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Xe(t,e)},ungzip:Xe,constants:N};const{Deflate:tn,deflate:en,deflateRaw:nn,gzip:rn}=re,{Inflate:sn,inflate:an,inflateRaw:on,ungzip:ln}=Qe;var dn=n(568),hn=n.n(dn),un="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;var cn,fn,_n=Math.PI/180;function gn(t){return t*_n}function pn(){var t=new un(3);return un!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function mn(t,e,n){var i=e[0],r=e[1],s=e[2],a=n[3]*i+n[7]*r+n[11]*s+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/a,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/a,t}function wn(){var t=new un(16);return un!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function bn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vn(t,e,n){var i,r,s,a,o,l,d,h,u,c,f,_,g=n[0],p=n[1],m=n[2];return e===t?(t[12]=e[0]*g+e[4]*p+e[8]*m+e[12],t[13]=e[1]*g+e[5]*p+e[9]*m+e[13],t[14]=e[2]*g+e[6]*p+e[10]*m+e[14],t[15]=e[3]*g+e[7]*p+e[11]*m+e[15]):(i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],d=e[6],h=e[7],u=e[8],c=e[9],f=e[10],_=e[11],t[0]=i,t[1]=r,t[2]=s,t[3]=a,t[4]=o,t[5]=l,t[6]=d,t[7]=h,t[8]=u,t[9]=c,t[10]=f,t[11]=_,t[12]=i*g+o*p+u*m+e[12],t[13]=r*g+l*p+c*m+e[13],t[14]=s*g+d*p+f*m+e[14],t[15]=a*g+h*p+_*m+e[15]),t}function yn(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function kn(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],a=e[5],o=e[6],l=e[7],d=e[8],h=e[9],u=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+d*i,t[5]=a*r+h*i,t[6]=o*r+u*i,t[7]=l*r+c*i,t[8]=d*r-s*i,t[9]=h*r-a*i,t[10]=u*r-o*i,t[11]=c*r-l*i,t}function xn(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],a=e[1],o=e[2],l=e[3],d=e[8],h=e[9],u=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-d*i,t[1]=a*r-h*i,t[2]=o*r-u*i,t[3]=l*r-c*i,t[8]=s*i+d*r,t[9]=a*i+h*r,t[10]=o*i+u*r,t[11]=l*i+c*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),pn(),(fn=cn||(cn={})).UP="up",fn.DOWN="down",fn.NORTH="north",fn.EAST="east",fn.SOUTH="south",fn.WEST="west";const Fn={[cn.UP]:[0,1,0],[cn.DOWN]:[0,-1,0],[cn.NORTH]:[0,0,-1],[cn.EAST]:[1,0,0],[cn.SOUTH]:[0,0,1],[cn.WEST]:[-1,0,0]};var In,Pn,An,Bn,Sn;function En(t,e,n){if(!t[e])throw new Error(`Missing ${e} tag`);if(t[e].type!==n)throw new Error(`Expected ${e} to be of type ${n}, but found ${t[e].type}`);return t[e].value}!function(t){t.ALL=[t.UP,t.DOWN,t.NORTH,t.EAST,t.SOUTH,t.WEST],t.normal=function(t){return Fn[t]}}(cn||(cn={})),function(t){t.create=function(t,e,n){return[t,e,n]},t.offset=function(t,e,n,i){return[t[0]+e,t[1]+n,t[2]+i]},t.towards=function(e,n){return t.offset(e,...cn.normal(n))}}(In||(In={})),function(t){function e(t){return"object"==typeof t&&null!==t?t:void 0}t.readNumber=function(t){return"number"==typeof t?t:void 0},t.readInt=function(t){return"number"==typeof t?Math.floor(t):void 0},t.readString=function(t){return"string"==typeof t?t:void 0},t.readBoolean=function(t){return"boolean"==typeof t?t:void 0},t.readObject=e,t.readArray=function(t,e){if(Array.isArray(t))return t.map((t=>e(t)))},t.readMap=function(t,n){var i;const r=null!==(i=e(t))&&void 0!==i?i:{};return Object.fromEntries(Object.entries(r).map((([t,e])=>[t,n(e)])))},t.compose=function(t,e,n){const i=e(t);return i?n(i):void 0}}(Pn||(Pn={}));class zn{constructor(t,e={}){this.name=t,this.properties=e}getName(){return this.name}getProperties(){return this.properties}getProperty(t){return this.properties[t]}isFluid(){return"minecraft:water"===this.name||"minecraft:lava"===this.name}equals(t){return this.name===t.name&&Object.keys(this.properties).every((e=>t.properties[e]===this.properties[e]))}toString(){return 0===Object.keys(this.properties).length?this.name:`${this.name}[${Object.entries(this.properties).map((([t,e])=>t+"="+e)).join(",")}]`}static fromNbt(t){const e=En(t.value,"Name","string"),n=function(t,e){try{return t()}catch(t){return e}}((()=>En(t.value,"Properties","compound")),{}),i=Object.keys(n).reduce(((t,e)=>Object.assign(Object.assign({},t),{[e]:En(n,e,"string")})),{});return new zn(e,i)}static fromJson(t){var e,n;const i=null!==(e=Pn.readObject(t))&&void 0!==e?e:{},r=null!==(n=Pn.readString(i.Name))&&void 0!==n?n:"minecraft:stone",s=Pn.readMap(i.Properties,(t=>{var e;return null!==(e=Pn.readString(t))&&void 0!==e?e:""}));return new zn(r,s)}}zn.AIR=new zn("minecraft:air");class On{constructor(t){this.minY=t,this.storage=Array(On.SIZE),this.palette=[zn.AIR]}get minBlockY(){return this.minY<<4}index(t,e,n){return(t<<8)+(e<<4)+n}getBlockState(t,e,n){var i;const r=this.storage[this.index(t,e,n)];return null!==(i=this.palette[r])&&void 0!==i?i:zn.AIR}setBlockState(t,e,n,i){let r=this.palette.findIndex((t=>t.equals(i)));-1===r&&(r=this.palette.length,this.palette.push(i)),this.storage[this.index(t,e,n)]=r}}function Rn(t){return t*t}function Tn(t,e,n){return Math.max(e,Math.min(n,t))}function Mn(t,e,n){return e+t*(n-e)}function Ln(t,e,n,i,r,s){return Mn(e,Mn(t,n,i),Mn(t,r,s))}function Un(t){return t*t*t*(t*(6*t-15)+10)}On.WIDTH=16,On.SIZE=On.WIDTH*On.WIDTH*On.WIDTH,function(t){t.create=function(t,e){return[t,e]},t.fromBlockPos=function(t){return[t[0]>>4,t[2]>>4]},t.fromLong=function(t){return[4294967295&Number(t),Number(t>>BigInt(32))]},t.minBlockX=function(t){return t[0]<<4},t.minBlockZ=function(t){return t[1]<<4},t.maxBlockX=function(t){return t[0]<<19},t.maxBlockZ=function(t){return t[1]<<19}}(An||(An={}));class Nn{constructor(t){this.seed=BigInt(0),this.setSeed(t)}fork(){return new Nn(this.nextLong())}setSeed(t){this.seed=t^Nn.MULTIPLIER&Nn.MODULUS_MASK}advance(){this.seed=this.seed*Nn.MULTIPLIER+Nn.INCREMENT&Nn.MODULUS_MASK}consume(t){for(let e=0;e<t;e+=1)this.advance()}next(t){this.advance();const e=Number(this.seed>>BigInt(Nn.MODULUS_BITS-t));return e>2147483647?e-4294967296:e}nextInt(t){if(void 0===t)return this.next(32);if(0==(t&t-1))return Number(BigInt(t)*BigInt(this.next(31))>>BigInt(31));let e,n;for(;(e=this.next(31))-(n=e%t)+(t-1)<0;);return n}nextLong(){return(BigInt(this.next(32))<<BigInt(32))+BigInt(this.next(32))}nextFloat(){return this.next(24)*Nn.FLOAT_MULTIPLIER}nextDouble(){const t=this.next(30);return this.advance(),t*Nn.DOUBLE_MULTIPLIER}}Nn.MODULUS_BITS=48,Nn.MODULUS_MASK=BigInt("281474976710655"),Nn.MULTIPLIER=BigInt("25214903917"),Nn.INCREMENT=BigInt("11"),Nn.FLOAT_MULTIPLIER=1/Math.pow(2,24),Nn.DOUBLE_MULTIPLIER=1/Math.pow(2,30);class Dn{constructor(t){this.seed=[BigInt(0),BigInt(0)],this.seed=t}static create(t){return new Dn(Dn.upgradeSeedTo128bit(t))}static mixStafford13(t){return((t=((t=(t^t>>BigInt(30))*BigInt("-4658895280553007687")&BigInt("0xFFFFFFFFFFFFFFFF"))^t>>BigInt(27))*BigInt("-7723592293110705685")&BigInt("0xFFFFFFFFFFFFFFFF"))^t>>BigInt(31))&BigInt("0xFFFFFFFFFFFFFFFF")}static upgradeSeedTo128bit(t){t<0&&(t+=BigInt("0x10000000000000000"));const e=t^Dn.SILVER_RATIO_64,n=e+Dn.GOLDEN_RATIO_64&BigInt("0xFFFFFFFFFFFFFFFF");return[Dn.mixStafford13(e),Dn.mixStafford13(n)]}static rotateLeft(t,e){return t<<e&BigInt("0xFFFFFFFFFFFFFFFF")|t>>BigInt(64)-e}setSeed(t){this.seed=Dn.upgradeSeedTo128bit(t)}fork(){return new Dn([this.next(),this.next()])}static getSeed(t,e,n){let i=t*BigInt(3129871)^n*BigInt(116129781)^e;return i=i*i*BigInt(42317861)+i*BigInt(11),i>>BigInt(16)}forkAt(t,e,n){const i=Dn.getSeed(t,e,n)^this.seed[0];return new Dn([i,this.seed[1]])}static LongfromBytes(t,e,n,i,r,s,a,o){return BigInt(t)<<BigInt(56)|BigInt(e)<<BigInt(48)|BigInt(n)<<BigInt(40)|BigInt(i)<<BigInt(32)|BigInt(r)<<BigInt(24)|BigInt(s)<<BigInt(16)|BigInt(a)<<BigInt(8)|BigInt(o)}forkWithHashOf(t){const e=hn()(t,{asBytes:!0}),n=Dn.LongfromBytes(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),i=Dn.LongfromBytes(e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]);return new Dn([n^this.seed[0],i^this.seed[1]])}next(){const t=this.seed[0];let e=this.seed[1];const n=Dn.rotateLeft(t+e&BigInt("0xFFFFFFFFFFFFFFFF"),BigInt(17))+t&BigInt("0xFFFFFFFFFFFFFFFF");return e^=t,this.seed=[Dn.rotateLeft(t,BigInt(49))^e^e<<BigInt(21)&BigInt("0xFFFFFFFFFFFFFFFF"),Dn.rotateLeft(e,BigInt(28))],n}nextLong(){let t=this.next();return t>BigInt("0x8000000000000000")&&(t-=BigInt("0x10000000000000000")),t}consume(t){let e=this.seed[0],n=this.seed[1];for(let i=0;i<t;i+=1)n^=e,e=Dn.rotateLeft(e,BigInt(49))^n^n<<BigInt(21),n=Dn.rotateLeft(n,BigInt(28));this.seed=[e,n]}nextBits(t){return this.next()>>BigInt(64-t)}nextInt(t){var e=this.next()&BigInt(4294967295);if(t){const a=BigInt(t);var n=e*a,i=n&BigInt(4294967295);if(i<a)for(var r=((~a&BigInt(4294967295))+BigInt(1))%a;i<r;)i=(n=(e=this.next()&BigInt(4294967295))*a)&BigInt(4294967295);var s=n>>BigInt(32);return Number(s)}var a=Number(e);return a>=2147483648&&(a-=4294967296),a}nextFloat(){return Number(this.nextBits(24))*Dn.FLOAT_MULTIPLIER}nextDouble(){return Number(this.nextBits(53))*Dn.DOUBLE_MULTIPLIER}parityConfigString(){return"seedLo: "+this.seed[0]+", seedHi: "+this.seed[1]}}Dn.SILVER_RATIO_64=BigInt("7640891576956012809"),Dn.GOLDEN_RATIO_64=BigInt("-7046029254386353131"),Dn.FLOAT_MULTIPLIER=1/Math.pow(2,24),Dn.DOUBLE_MULTIPLIER=11102230246251565e-32;class Zn{constructor(t){this.xo=256*t.nextDouble(),this.yo=256*t.nextDouble(),this.zo=256*t.nextDouble(),this.p=Array(256);for(let t=0;t<256;t+=1)this.p[t]=t;for(let e=0;e<256;e+=1){const n=t.nextInt(256-e),i=this.p[e];this.p[e]=this.p[e+n],this.p[e+n]=i}}sample2D(t,e){let n,i,r;const s=(t+e)*Zn.F2,a=Math.floor(t+s),o=t-(a-(n=(a+(i=Math.floor(e+s)))*Zn.G2));let l,d;o>(r=e-(i-n))?(l=1,d=0):(l=0,d=1);const h=o-l+Zn.G2,u=r-d+Zn.G2,c=o-1+2*Zn.G2,f=r-1+2*Zn.G2,_=255&a,g=255&i,p=this.P(_+this.P(g))%12,m=this.P(_+l+this.P(g+d))%12,w=this.P(_+1+this.P(g+1))%12;return 70*(this.getCornerNoise3D(p,o,r,0,.5)+this.getCornerNoise3D(m,h,u,0,.5)+this.getCornerNoise3D(w,c,f,0,.5))}sample(t,e,n){const i=.3333333333333333*(t+e+n),r=Math.floor(t+i),s=Math.floor(e+i),a=Math.floor(n+i),o=.16666666666666666*(r+s+a),l=t-(r-o),d=e-(s-o),h=n-(a-o);let u,c,f,_,g,p;l>=d?d>=h?(u=1,c=0,f=0,_=1,g=1,p=0):l>=h?(u=1,c=0,f=0,_=1,g=0,p=1):(u=0,c=0,f=1,_=1,g=0,p=1):d<h?(u=0,c=0,f=1,_=0,g=1,p=1):l<h?(u=0,c=1,f=0,_=0,g=1,p=1):(u=0,c=1,f=0,_=1,g=1,p=0);const m=l-u+.16666666666666666,w=d-c+.16666666666666666,b=h-f+.16666666666666666,v=l-_+.3333333333333333,y=d-g+.3333333333333333,k=h-p+.3333333333333333,x=l-.5,F=d-.5,I=h-.5,P=255&r,A=255&s,B=255&a,S=this.P(P+this.P(A+this.P(B)))%12,E=this.P(P+u+this.P(A+c+this.P(B+f)))%12,z=this.P(P+_+this.P(A+g+this.P(B+p)))%12,O=this.P(P+1+this.P(A+1+this.P(B+1)))%12;return 32*(this.getCornerNoise3D(S,l,d,h,.6)+this.getCornerNoise3D(E,m,w,b,.6)+this.getCornerNoise3D(z,v,y,k,.6)+this.getCornerNoise3D(O,x,F,I,.6))}P(t){return this.p[255&t]}getCornerNoise3D(t,e,n,i,r){let s,a=r-e*e-n*n-i*i;return a<0?s=0:(a*=a,s=a*a*Zn.gradDot(t,e,n,i)),s}static gradDot(t,e,n,i){const r=Zn.GRADIENT[15&t];return r[0]*e+r[1]*n+r[2]*i}}Zn.GRADIENT=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1],[1,1,0],[0,-1,1],[-1,1,0],[0,-1,-1]],Zn.F2=.5*(Math.sqrt(3)-1),Zn.G2=(3-Math.sqrt(3))/6;class Cn{constructor(t){this.xo=256*t.nextDouble(),this.yo=256*t.nextDouble(),this.zo=256*t.nextDouble(),this.p=Array(256);for(let t=0;t<256;t+=1)this.p[t]=t>127?t-256:t;for(let e=0;e<256;e+=1){const n=t.nextInt(256-e),i=this.p[e];this.p[e]=this.p[e+n],this.p[e+n]=i}}sample(t,e,n,i=0,r=0){const s=t+this.xo,a=e+this.yo,o=n+this.zo,l=Math.floor(s),d=Math.floor(a),h=Math.floor(o),u=s-l,c=a-d,f=o-h;let _=0;if(0!==i){const t=r>=0&&r<c?r:c;_=Math.floor(t/i+1e-7)*i}return this.sampleAndLerp(l,d,h,u,c-_,f,c)}sampleAndLerp(t,e,n,i,r,s,a){const o=this.P(t),l=this.P(t+1),d=this.P(o+e),h=this.P(o+e+1),u=this.P(l+e),c=this.P(l+e+1),f=Zn.gradDot(this.P(d+n),i,r,s),_=Zn.gradDot(this.P(u+n),i-1,r,s),g=Zn.gradDot(this.P(h+n),i,r-1,s),p=Zn.gradDot(this.P(c+n),i-1,r-1,s),m=Zn.gradDot(this.P(d+n+1),i,r,s-1),w=Zn.gradDot(this.P(u+n+1),i-1,r,s-1),b=Zn.gradDot(this.P(h+n+1),i,r-1,s-1),v=Zn.gradDot(this.P(c+n+1),i-1,r-1,s-1);return function(t,e,n,i,r,s,a,o,l,d,h){return Mn(n,Ln(t,e,i,r,s,a),Ln(t,e,o,l,d,h))}(Un(i),Un(a),Un(s),f,_,g,p,m,w,b,v)}P(t){return 255&this.p[255&t]}}class Jn{constructor(t,e,n){if(t instanceof Dn){const i=t.fork();this.noiseLevels=Array(n.length);for(let t=0;t<n.length;t++)if(0!==n[t]){const n=e+t;this.noiseLevels[t]=new Cn(i.forkWithHashOf("octave_"+n))}}else{if(1-e<n.length)throw new Error("Positive octaves are not allowed when using LegacyRandom");this.noiseLevels=Array(n.length);for(let i=-e;i>=0;i-=1)i<n.length&&0!==n[i]?this.noiseLevels[i]=new Cn(t):t.consume(262)}this.amplitudes=n,this.lowestFreqInputFactor=Math.pow(2,e),this.lowestFreqValueFactor=Math.pow(2,n.length-1)/(Math.pow(2,n.length)-1)}sample(t,e,n,i=0,r=0,s=!1){let a=0,o=this.lowestFreqInputFactor,l=this.lowestFreqValueFactor;for(let d=0;d<this.noiseLevels.length;d+=1){const h=this.noiseLevels[d];h&&(a+=this.amplitudes[d]*l*h.sample(Jn.wrap(t*o),s?-h.yo:Jn.wrap(e*o),Jn.wrap(n*o),i*o,r*o)),o*=2,l/=2}return a}getOctaveNoise(t){return this.noiseLevels[this.noiseLevels.length-1-t]}static wrap(t){return t-33554432*Math.floor(t/33554432+.5)}}!function(t){t.fromJson=function(t){var e,n,i,r,s;const a=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{xzScale:null!==(n=Pn.readNumber(a.xz_scale))&&void 0!==n?n:1,yScale:null!==(i=Pn.readNumber(a.y_scale))&&void 0!==i?i:1,xzFactor:null!==(r=Pn.readNumber(a.xz_factor))&&void 0!==r?r:80,yFactor:null!==(s=Pn.readNumber(a.y_factor))&&void 0!==s?s:80}}}(Bn||(Bn={}));class jn{constructor(t,{firstOctave:e,amplitudes:n}){this.first=new Jn(t,e,n),this.second=new Jn(t,e,n);let i=1/0,r=-1/0;for(let t=0;t<n.length;t+=1)0!==n[t]&&(i=Math.min(i,t),r=Math.max(r,t));const s=.1*(1+1/(r-i+1));this.valueFactor=1/6/s}sample(t,e,n){const i=t*jn.INPUT_FACTOR,r=e*jn.INPUT_FACTOR,s=n*jn.INPUT_FACTOR;return(this.first.sample(t,e,n)+this.second.sample(i,r,s))*this.valueFactor}}jn.INPUT_FACTOR=1.0181268882175227,function(t){t.fromJson=function(t){var e,n,i;const r=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{firstOctave:null!==(n=Pn.readInt(r.firstOctave))&&void 0!==n?n:0,amplitudes:null!==(i=Pn.readArray(r.amplitudes,(t=>{var e;return null!==(e=Pn.readNumber(t))&&void 0!==e?e:0})))&&void 0!==i?i:[]}}}(Sn||(Sn={}));class Hn{constructor(t,e,n=[],i=[],r=[]){this.name=t,this.coordinate=e,this.locations=n,this.values=i,this.derivatives=r}apply(t){const e=this.coordinate(t),n=function(t,e,n){let i=e-t;for(;i>0;){const e=Math.floor(i/2),r=t+e;n(r)?i=e:(t=r+1,i-=e+1)}return t}(0,this.locations.length,(t=>e<this.locations[t]))-1,i=this.locations.length-1;if(n<0)return this.values[0](t)+this.derivatives[0]*(e-this.locations[0]);if(n===i)return this.values[i](t)+this.derivatives[i]*(e-this.locations[i]);const r=this.locations[n],s=this.locations[n+1],a=this.derivatives[n],o=this.derivatives[n+1],l=(e-r)/(s-r),d=this.values[n](t),h=this.values[n+1](t),u=a*(s-r)-(h-d),c=-o*(s-r)+(h-d);return Mn(l,d,h)+l*(1-l)*Mn(l,u,c)}addPoint(t,e,n=0){return this.locations.push(t),this.values.push("number"==typeof e?()=>e:e.apply.bind(e)),this.derivatives.push(n),this}}const Wn=t=>[(t>>16&255)/256,(t>>8&255)/256,(255&t)/256],Gn=[124/256,189/256,107/256],Vn=Wn(6396257),Kn=Wn(8431445),Yn=Wn(4764952),qn=Wn(4159204),$n=Wn(8431445),Xn=Wn(2129968),Qn=t=>[t/8,1-t/32,64*t],ti={large_fern:()=>Gn,tall_grass:()=>Gn,grass_block:()=>Gn,fern:()=>Gn,grass:()=>Gn,potted_fern:()=>Gn,spruce_leaves:()=>Vn,birch_leaves:()=>Kn,oak_leaves:()=>Yn,jungle_leaves:()=>Yn,acacia_leaves:()=>Yn,dark_oak_leaves:()=>Yn,vine:()=>Yn,water:()=>qn,bubble_column:()=>qn,cauldron:()=>qn,redstone_wire:t=>{var e;return(t=>{const e=t/15;return[.6*e+(e>0?.4:.3),Tn(e*e*.7-.5,0,1),Tn(e*e*.6-.7,0,1)]})(parseInt(null!==(e=t.power)&&void 0!==e?e:"0"))},sugar_cane:()=>Gn,attached_melon_stem:()=>$n,attached_pumpkin_stem:()=>$n,melon_stem:t=>{var e;return Qn(parseInt(null!==(e=t.age)&&void 0!==e?e:"0"))},pumpkin_stem:t=>{var e;return Qn(parseInt(null!==(e=t.age)&&void 0!==e?e:"0"))},lily_pad:()=>Xn};var ei;function ni(...t){let e=0;for(const n of t)e+=n.length;const n=new Float32Array(e);let i=0;for(const e of t)n.set(e,i),i+=e.length;return n}function ii(t,e){const n=pn();for(let i=0;i<t.length;i+=3)n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],mn(n,n,e),t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2]}!function(t){t.rotate=function(t,e,n){let{up:i,down:r,north:s,east:a,south:o,west:l}=t;switch(n){case 90:[s,a,o,l]=[a,o,l,s];break;case 180:[s,a,o,l]=[o,l,s,a];break;case 270:[s,a,o,l]=[l,s,a,o]}switch(e){case 90:[i,s,r,o]=[s,r,o,i];break;case 180:[i,s,r,o]=[r,o,i,s];break;case 270:[i,s,r,o]=[o,i,s,r]}return{up:i,down:r,north:s,east:a,south:o,west:l}}}(ei||(ei={}));class ri{constructor(t,e,n){this.id=t,this.variants=e,this.multipart=n,this.variants=e}getModelVariants(t){if(this.variants){const e=Object.keys(this.variants).filter((e=>this.matchesVariant(e,t)));if(0===e.length)return[];const n=this.variants[e[0]];return[Array.isArray(n)?n[0]:n]}return this.multipart?this.multipart.filter((e=>!e.when||this.matchesCase(e.when,t))).map((t=>Array.isArray(t.apply)?t.apply[0]:t.apply)):[]}getBuffers(t,e,n,i,r,s){var a,o,l,d;const h=this.getModelVariants(e),u=[],c=[],f=[],_=[];for(const g of h){const h=ei.rotate(s,null!==(a=g.x)&&void 0!==a?a:0,null!==(o=g.y)&&void 0!==o?o:0),p=i.getBlockModel(g.model).getBuffers(t,e,n,r,h);if(g.x||g.y){const t=wn();bn(t),vn(t,t,[8,8,8]),xn(t,t,-gn(null!==(l=g.y)&&void 0!==l?l:0)),kn(t,t,-gn(null!==(d=g.x)&&void 0!==d?d:0)),vn(t,t,[-8,-8,-8]),ii(p.position,t)}u.push(p.position),c.push(...p.texCoord),f.push(...p.tintColor),_.push(...p.index),r+=p.texCoord.length/2}const g=wn();bn(g),yn(g,g,[.0625,.0625,.0625]);const p=ni(...u);return ii(p,g),{position:p,texCoord:c,tintColor:f,index:_}}matchesVariant(t,e){return t.split(",").every((t=>{const[n,i]=t.split("=");return e[n]===i}))}matchesCase(t,e){if(Array.isArray(t.OR))return t.OR.some((t=>this.matchesCase(t,e)));const n=t;return Object.keys(n).every((t=>n[t].split("|").includes(e[t])))}static fromJson(t,e){return new ri(t,e.variants,e.multipart)}}const si={0:[0,3,2,3,2,1,0,1],90:[2,3,2,1,0,1,0,3],180:[2,1,0,1,0,3,2,3],270:[0,1,0,3,2,3,2,1]},ai={x:[1,0,0],y:[0,1,0],z:[0,0,1]},oi=1.41421356237,li={x:[1,oi,oi],y:[oi,1,oi],z:[oi,oi,1]};class di{constructor(t,e,n,i){this.id=t,this.parent=e,this.textures=n,this.elements=i,this.flattened=!1}getBuffers(t,e,n,i,r){var s;const a=[],o=[],l=[],d=[];for(const h of null!==(s=this.elements)&&void 0!==s?s:[]){const s=this.getElementBuffers(t,e,h,i,n,r);a.push(s.position),o.push(...s.texCoord),l.push(...s.tintColor),d.push(...s.index),i+=s.texCoord.length/2}return{position:ni(...a),texCoord:o,tintColor:l,index:d}}getElementBuffers(t,e,n,i,r,s){var a,o,l,d,h,u,c,f,_,g,p,m;const w=n.from[0],b=n.from[1],v=n.from[2],y=n.to[0],k=n.to[1],x=n.to[2],F=[],I=[],P=[],A=[],B=(n,s,a)=>{var o,l,d,h,u,c,f,_,g,p,m,w;const[b,v,y,k]=r.getTextureUV(this.getTexture(n.texture)),x=(y-b)/16,B=(k-v)/16,S=x/16,E=B/16;s[0]=(null!==(l=null===(o=n.uv)||void 0===o?void 0:o[0])&&void 0!==l?l:s[0])*x+S,s[1]=(null!==(h=null===(d=n.uv)||void 0===d?void 0:d[1])&&void 0!==h?h:s[1])*B+E,s[2]=(null!==(c=null===(u=n.uv)||void 0===u?void 0:u[2])&&void 0!==c?c:s[2])*x-S,s[3]=(null!==(_=null===(f=n.uv)||void 0===f?void 0:f[3])&&void 0!==_?_:s[3])*B-E;const z=si[null!==(g=n.rotation)&&void 0!==g?g:0];I.push(b+s[z[0]],v+s[z[1]],b+s[z[2]],v+s[z[3]],b+s[z[4]],v+s[z[5]],b+s[z[6]],v+s[z[7]]);const O=(null!==(p=n.tintindex)&&void 0!==p?p:-1)>=0&&null!==(w=null===(m=ti[t.slice(10)])||void 0===m?void 0:m.call(ti,e))&&void 0!==w?w:[1,1,1];P.push(...O,...O,...O,...O),F.push(...a),A.push(i,i+1,i+2,i,i+2,i+3),i+=4};!(null===(o=null===(a=n.faces)||void 0===a?void 0:a.up)||void 0===o?void 0:o.texture)||n.faces.up.cullface&&s[n.faces.up.cullface]||B(n.faces.up,[w,16-x,y,16-v],[w,k,x,y,k,x,y,k,v,w,k,v]),!(null===(d=null===(l=n.faces)||void 0===l?void 0:l.down)||void 0===d?void 0:d.texture)||n.faces.down.cullface&&s[n.faces.down.cullface]||B(n.faces.down,[16-x,16-y,16-v,16-w],[w,b,v,y,b,v,y,b,x,w,b,x]),!(null===(u=null===(h=n.faces)||void 0===h?void 0:h.south)||void 0===u?void 0:u.texture)||n.faces.south.cullface&&s[n.faces.south.cullface]||B(n.faces.south,[w,16-k,y,16-b],[w,b,x,y,b,x,y,k,x,w,k,x]),!(null===(f=null===(c=n.faces)||void 0===c?void 0:c.north)||void 0===f?void 0:f.texture)||n.faces.north.cullface&&s[n.faces.north.cullface]||B(n.faces.north,[16-y,16-k,16-w,16-b],[y,b,v,w,b,v,w,k,v,y,k,v]),!(null===(g=null===(_=n.faces)||void 0===_?void 0:_.east)||void 0===g?void 0:g.texture)||n.faces.east.cullface&&s[n.faces.east.cullface]||B(n.faces.east,[16-x,16-k,16-v,16-b],[y,b,x,y,b,v,y,k,v,y,k,x]),!(null===(m=null===(p=n.faces)||void 0===p?void 0:p.west)||void 0===m?void 0:m.texture)||n.faces.west.cullface&&s[n.faces.west.cullface]||B(n.faces.west,[v,16-k,x,16-b],[w,b,v,w,b,x,w,k,x,w,k,v]);const S=wn();if(bn(S),n.rotation){const t=function(t,e,n){var i=new un(3);return i[0]=t,i[1]=e,i[2]=n,i}(...n.rotation.origin);vn(S,S,t),function(t,e,n,i){var r,s,a,o,l,d,h,u,c,f,_,g,p,m,w,b,v,y,k,x,F,I,P,A,B=i[0],S=i[1],E=i[2],z=Math.hypot(B,S,E);z<1e-6||(B*=z=1/z,S*=z,E*=z,r=Math.sin(n),a=1-(s=Math.cos(n)),o=e[0],l=e[1],d=e[2],h=e[3],u=e[4],c=e[5],f=e[6],_=e[7],g=e[8],p=e[9],m=e[10],w=e[11],b=B*B*a+s,v=S*B*a+E*r,y=E*B*a-S*r,k=B*S*a-E*r,x=S*S*a+s,F=E*S*a+B*r,I=B*E*a+S*r,P=S*E*a-B*r,A=E*E*a+s,t[0]=o*b+u*v+g*y,t[1]=l*b+c*v+p*y,t[2]=d*b+f*v+m*y,t[3]=h*b+_*v+w*y,t[4]=o*k+u*x+g*F,t[5]=l*k+c*x+p*F,t[6]=d*k+f*x+m*F,t[7]=h*k+_*x+w*F,t[8]=o*I+u*P+g*A,t[9]=l*I+c*P+p*A,t[10]=d*I+f*P+m*A,t[11]=h*I+_*P+w*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(S,S,gn(n.rotation.angle),ai[n.rotation.axis]),n.rotation.rescale&&yn(S,S,li[n.rotation.axis]),function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2]}(t,t),vn(S,S,t)}const E=new Float32Array(F);return ii(E,S),{position:E,texCoord:I,tintColor:P,index:A}}getTexture(t){for(var e,n;t.startsWith("#");)t=null!==(n=null===(e=this.textures)||void 0===e?void 0:e[t.slice(1)])&&void 0!==n?n:"";return t.startsWith("minecraft:")||(t="minecraft:"+t),t}flatten(t){var e;if(!this.flattened&&this.parent){const n=t.getBlockModel(this.parent);if(!n)return console.warn(`parent ${this.parent} does not exist!`),void(this.flattened=!0);n.flatten(t),this.elements||(this.elements=n.elements),this.textures||(this.textures={}),Object.keys(null!==(e=n.textures)&&void 0!==e?e:{}).forEach((t=>{this.textures[t]||(this.textures[t]=n.textures[t])})),this.flattened=!0}}static fromJson(t,e){let n=e.parent;return n&&!n.startsWith("minecraft:")&&(n="minecraft:"+n),new di(t,n,e.textures,e.elements)}}function hi(t,e,n,i,r){const s=new ri("",{"":{model:""}},void 0),a={getBlockModel:()=>r};return r.flatten(a),s.getBuffers(t,{},e,a,n,i)}function ui(t,e,n,i,r,s){const a=r.up?16:[14.2,12.5,10.5,9,7,5.3,3.7,1.9,16,16,16,16,16,16,16,16][n];return hi(`minecraft:${t}`,i,e,r,new di("","",{still:`minecraft:block/${t}_still`,flow:`minecraft:block/${t}_flow`},[{from:[0,0,0],to:[16,a,16],faces:{up:{texture:"#still",tintindex:s,cullface:cn.UP},down:{texture:"#still",tintindex:s,cullface:cn.DOWN},north:{texture:"#flow",tintindex:s,cullface:cn.NORTH},east:{texture:"#flow",tintindex:s,cullface:cn.EAST},south:{texture:"#flow",tintindex:s,cullface:cn.SOUTH},west:{texture:"#flow",tintindex:s,cullface:cn.WEST}}}]))}const ci={"minecraft:water":(t,e,n,i)=>ui("water",t,parseInt(e.level),n,i,0),"minecraft:lava":(t,e,n,i)=>ui("lava",t,parseInt(e.level),n,i),"minecraft:chest":(t,e,n)=>function(t,e,n,i){return hi("minecraft:chest",i,t,{},new di("","",{0:"minecraft:block/chest"},[{from:[1,0,1],to:[15,14,15],faces:{up:{texture:"#0"},down:{texture:"#0"},north:{texture:"#0"},east:{texture:"#0"},south:{texture:"#0"},west:{texture:"#0"}}}]))}(t,e.facing,e.type,n)};var fi,_i,gi,pi,mi,wi,bi,vi,yi;new Set(Object.keys(ci)),function(t){function e(t,e){return"number"==typeof t?new n(t,null!=e?e:t):t}t.target=function(t,e,n,i,s,a){return new r(t,e,n,i,s,a)},t.parameters=function(t,n,r,s,a,o,l){return new i(e(t),e(n),e(r),e(s),e(a),e(o),l)},t.param=e;class n{constructor(t,e){this.min=t,this.max=e}distance(t){const e=("number"==typeof t?t:t.min)-this.max,n=this.min-("number"==typeof t?t:t.max);return e>0?e:Math.max(n,0)}union(t){return new n(Math.min(this.min,t.min),Math.max(this.max,t.max))}static fromJson(t){var e;if("number"==typeof t)return new n(t,t);const[i,r]=null!==(e=Pn.readArray(t,(t=>Pn.readNumber(t))))&&void 0!==e?e:[];return new n(null!=i?i:0,null!=r?r:0)}}t.Param=n;class i{constructor(t,e,n,i,r,s,a){this.temperature=t,this.humidity=e,this.continentalness=n,this.erosion=i,this.depth=r,this.weirdness=s,this.offset=a}fittness(t){return Rn(this.temperature.distance(t.temperature))+Rn(this.humidity.distance(t.humidity))+Rn(this.continentalness.distance(t.continentalness))+Rn(this.erosion.distance(t.erosion))+Rn(this.depth.distance(t.depth))+Rn(this.weirdness.distance(t.weirdness))+Rn(this.offset-t.offset)}space(){return[this.temperature,this.humidity,this.continentalness,this.erosion,this.depth,this.weirdness,new n(this.offset,this.offset)]}static fromJson(t){var e,r;const s=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return new i(n.fromJson(s.temperature),n.fromJson(s.humidity),n.fromJson(s.continentalness),n.fromJson(s.erosion),n.fromJson(s.depth),n.fromJson(s.weirdness),null!==(r=Pn.readInt(s.offset))&&void 0!==r?r:0)}}t.ParamPoint=i;class r{constructor(t,e,n,i,r,s){this.temperature=t,this.humidity=e,this.continentalness=n,this.erosion=i,this.depth=r,this.weirdness=s}get offset(){return 0}toArray(){return[this.temperature,this.humidity,this.continentalness,this.erosion,this.depth,this.weirdness,this.offset]}}t.TargetPoint=r,t.Parameters=class{constructor(t){this.things=t,this.index=new s(t)}find(t){return this.index.search(t,((t,e)=>t.distance(e)))}};class s{constructor(t){this.root=s.build(t.map((([t,e])=>new l(t,e))))}static build(t){if(1===t.length)return t[0];if(t.length<=s.CHILDREN_PER_NODE){const e=t.map((t=>{let e=0;for(let n=0;n<7;n+=1){const i=t.space[n];e+=Math.abs((i.min+i.max)/2)}return{key:e,node:t}})).sort(((t,e)=>t.key-e.key)).map((({node:t})=>t));return new o(e)}let e=1/0,n=-1,i=[];for(let r=0;r<7;++r){t=s.sort(t,r,!1),i=s.bucketize(t);let a=0;for(const t of i)a+=s.area(t.space);e>a&&(e=a,n=r)}return t=s.sort(t,n,!1),i=s.bucketize(t),i=s.sort(i,n,!0),new o(i.map((t=>s.build(t.children))))}static sort(t,e,n){return t.map((t=>{const i=t.space[e],r=(i.min+i.max)/2;return{key:n?Math.abs(r):r,node:t}})).sort(((t,e)=>t.key-e.key)).map((({node:t})=>t))}static bucketize(t){const e=[];let n=[];const i=Math.pow(10,Math.floor(Math.log(t.length-.01)/Math.log(10)));for(const r of t)n.push(r),n.length<i||(e.push(new o(n)),n=[]);return 0!==n.length&&e.push(new o(n)),e}static area(t){let e=0;for(const n of t)e+=Math.abs(n.max-n.min);return e}search(t,e){return this.root.search(t.toArray(),e).thing()}}s.CHILDREN_PER_NODE=10,t.RTree=s;class a{constructor(t){this.space=t}distance(t){let e=0;for(let n=0;n<7;n+=1)e+=Rn(this.space[n].distance(t[n]));return e}}t.RNode=a;class o extends a{constructor(t){super(o.buildSpace(t)),this.children=t}static buildSpace(t){let e=[...Array(7)].map((()=>new n(1/0,-1/0)));for(const n of t)e=[...Array(7)].map(((t,i)=>e[i].union(n.space[i])));return e}search(t,e){let n=1/0,i=null;for(const r of this.children){const s=e(r,t);if(n<=s)continue;const a=r.search(t,e),o=r==a?s:e(a,t);n<=o||(n=o,i=a)}return i}}t.RSubTree=o;class l extends a{constructor(t,e){super(t.space()),this.thing=e}search(){return this}}t.RLeaf=l}(fi||(fi={}));class ki{constructor(t,e,n){this.offsetSampler=t,this.factorSampler=e,this.jaggednessSampler=n}static fromJson(t){var e;const n=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return new ki(this.splineFromJson(n.offset),this.splineFromJson(n.factor),this.splineFromJson(n.offset))}static splineFromJson(t){var e,n,i,r,s;if("number"==typeof t)return()=>t;const a=null!==(e=Pn.readObject(t))&&void 0!==e?e:{},o=null!==(n=Pn.readString(a.coordinate))&&void 0!==n?n:"continents",l=new Hn(o,(t=>t[o])),d=null!==(i=Pn.readArray(a.points,(t=>{var e;return null!==(e=Pn.readObject(t))&&void 0!==e?e:{}})))&&void 0!==i?i:[];if(0===d.length)return()=>0;for(const t of d){const e=null!==(r=Pn.readNumber(t.location))&&void 0!==r?r:0,n=this.splineFromJson(t.value),i=null!==(s=Pn.readNumber(t.derivative))&&void 0!==s?s:0;l.addPoint(e,n,i)}return l}offset(t){return this.offsetSampler.apply(t)+ki.GLOBAL_OFFSET}factor(t){return this.factorSampler.apply(t)}jaggedness(t){return this.jaggednessSampler.apply(t)}static point(t,e,n){return{continents:t,erosion:e,weirdness:n,ridges:this.peaksAndValleys(n)}}static peaksAndValleys(t){return 3*-(Math.abs(Math.abs(t)-.6666667)-.33333334)}static overworld(){const t=this.buildErosionOffsetSpline("beachSpline",-.05,0,0,.1,0,-.03,!1,!1),e=this.buildErosionOffsetSpline("lowSpline",-.1,.03,.1,.1,.01,-.03,!1,!1),n=this.buildErosionOffsetSpline("midSpline",-.1,.03,.1,.7,.01,-.03,!0,!0),i=this.buildErosionOffsetSpline("highSpline",.3,.03,.1,1,.01,.01,!0,!0),r=new Hn("Offset",(t=>t.continents)).addPoint(-1.1,.044).addPoint(-1.02,-.2222).addPoint(-.51,-.2222).addPoint(-.44,-.12).addPoint(-.18,-.12).addPoint(-.16,t).addPoint(-.15,t).addPoint(-.1,e).addPoint(.25,n).addPoint(1,i),s=new Hn("Factor",(t=>t.continents)).addPoint(-.19,3.95).addPoint(-.15,this.getErosionFactor("erosionCoast",6.25,!0)).addPoint(-.1,this.getErosionFactor("erosionInland",5.47,!0)).addPoint(.03,this.getErosionFactor("erosionMidInland",5.08,!0)).addPoint(.06,this.getErosionFactor("erosionFarInland",4.69,!1)),a=new Hn("Jaggedness",(t=>t.continents)).addPoint(.11,0).addPoint(.03,this.buildErosionJaggednessSpline(1,.5,0,0)).addPoint(.65,this.buildErosionJaggednessSpline(1,1,1,0));return new ki(r,s,a)}static getErosionFactor(t,e,n){const i=new Hn("weirdness",(t=>t.weirdness)).addPoint(-.2,6.3).addPoint(.2,e),r=new Hn(t,(t=>t.erosion)).addPoint(-.6,i).addPoint(-.5,new Hn("weirdness",(t=>t.weirdness)).addPoint(-.05,6.3).addPoint(.05,2.67)).addPoint(-.35,i).addPoint(-.25,i).addPoint(-.1,new Hn("weirdness",(t=>t.weirdness)).addPoint(-.05,2.67).addPoint(.05,6.3)).addPoint(.03,i);if(n){const t=new Hn("weirdnessShattered",(t=>t.weirdness)).addPoint(0,e).addPoint(.1,.625),n=new Hn("ridgesShattered",(t=>t.ridges)).addPoint(-.9,e).addPoint(-.69,t);r.addPoint(.35,e).addPoint(.45,n).addPoint(.55,n).addPoint(.62,e)}else{const t=new Hn("ridges",(t=>t.ridges)).addPoint(-.7,i).addPoint(-.15,1.37),n=new Hn("ridges",(t=>t.ridges)).addPoint(.45,i).addPoint(.7,1.56);r.addPoint(.05,n).addPoint(.4,n).addPoint(.45,t).addPoint(.55,t).addPoint(.58,e)}return r}static buildErosionOffsetSpline(t,e,n,i,r,s,a,o,l){const d=this.buildMountainRidgeSplineWithPoints(Mn(r,.6,1.5),l),h=this.buildMountainRidgeSplineWithPoints(Mn(r,.6,1),l),u=this.buildMountainRidgeSplineWithPoints(r,l),c=this.ridgeSpline(t+"-widePlateau",e-.15,.5*r,Mn(.5,.5,.5)*r,.5*r,.6*r,.5),f=this.ridgeSpline(t+"-narrowPlateau",e,s*r,n*r,.5*r,.6*r,.5),_=this.ridgeSpline(t+"-plains",e,s,s,n,i,.5),g=this.ridgeSpline(t+"-plainsFarInland",e,s,s,n,i,.5),p=new Hn(t,(t=>t.ridges)).addPoint(-1,e).addPoint(-.4,_).addPoint(0,i+.07),m=this.ridgeSpline(t+"-swamps",-.02,a,a,n,i,0),w=new Hn(t,(t=>t.erosion)).addPoint(-.85,d).addPoint(-.7,h).addPoint(-.4,u).addPoint(-.35,c).addPoint(-.1,f).addPoint(.2,_);return o&&w.addPoint(.4,g).addPoint(.45,p).addPoint(.55,p).addPoint(.58,g),w.addPoint(.7,m),w}static buildMountainRidgeSplineWithPoints(t,e){const n=new Hn(`M-spline for continentalness: ${t} ${e}`,(t=>t.ridges)),i=this.mountainContinentalness(-1,t,-.7),r=this.mountainContinentalness(1,t,-.7),s=this.calculateMountainRidgeZeroContinentalnessPoint(t);if(-.65<s&&s<1){const e=this.mountainContinentalness(-.65,t,-.7),a=this.mountainContinentalness(-.75,t,-.7),o=this.calculateSlope(i,a,-1,-.75);n.addPoint(-1,i,o),n.addPoint(-.75,a),n.addPoint(-.65,e);const l=this.mountainContinentalness(s,t,-.7),d=this.calculateSlope(l,r,s,1);n.addPoint(s-.01,l),n.addPoint(s,l,d),n.addPoint(1,r,d)}else{const t=this.calculateSlope(i,r,-1,1);e?(n.addPoint(-1,Math.max(.2,i)),n.addPoint(0,Mn(.5,i,r),t)):n.addPoint(-1,i,t),n.addPoint(1,r,t)}return n}static mountainContinentalness(t,e,n){const i=.46082947*(t+1.17)*(1-.5*(1-e))-.5*(1-e);return t<n?Math.max(i,-.2222):Math.max(i,0)}static calculateMountainRidgeZeroContinentalnessPoint(t){return.5*(1-t)/(.46082947*(1-.5*(1-t)))-1.17}static calculateSlope(t,e,n,i){return(e-t)/(i-n)}static ridgeSpline(t,e,n,i,r,s,a){const o=Math.max(.5*(n-e),a),l=5*(i-n);return new Hn(t,(t=>t.ridges)).addPoint(-1,e,o).addPoint(-.4,n,Math.min(o,l)).addPoint(0,i,l).addPoint(.4,r,2*(r-i)).addPoint(1,s,.7*(s-r))}static buildErosionJaggednessSpline(t,e,n,i){const r=this.buildRidgeJaggednessSpline(t,n),s=this.buildRidgeJaggednessSpline(e,i);return new Hn("Jaggedness-erosion",(t=>t.erosion)).addPoint(-1,r).addPoint(-.78,s).addPoint(-.5775,s).addPoint(-.375,0)}static buildRidgeJaggednessSpline(t,e){const n=ki.peaksAndValleys(.4),i=(n+ki.peaksAndValleys(.56666666))/2;return new Hn("Jaggedness-ridges",(t=>t.ridges)).addPoint(n,0).addPoint(i,e>0?this.buildWeirdnessJaggednessSpline(e):0).addPoint(1,t>0?this.buildWeirdnessJaggednessSpline(t):0)}static buildWeirdnessJaggednessSpline(t){return new Hn("Jaggedness-weirdness",(t=>t.weirdness)).addPoint(-.01,.63*t).addPoint(.01,.3*t)}}ki.GLOBAL_OFFSET=-.50375,function(t){t.fromList=function(t){return(e,n,i,r)=>{for(const s of t){const t=s(e,n,i,r);if(t)return t}return null}}}(_i||(_i={})),function(t){t.create=function(t,e,n){return{offset:t,factor:e,jaggedness:n}}}(gi||(gi={})),function(t){t.create=function(t,e,n){const i=e+t.getOffset(e,0,n),r=n+t.getOffset(n,e,0),s=t.getContinentalness(i,r),a=t.getWeirdness(i,r),o=t.getErosion(i,r);return{shiftedX:i,shiftedZ:r,continentalness:s,weirdness:a,erosion:o,terrainInfo:t.getTerrainInfo(i<<2,r<<2,s,a,o)}}}(pi||(pi={})),function(t){t.fromJson=function(t){var e,n,i,r,s,a,o,l,d,h,u,c;const f=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{minY:null!==(n=Pn.readInt(f.min_y))&&void 0!==n?n:0,height:null!==(i=Pn.readInt(f.height))&&void 0!==i?i:256,xzSize:null!==(r=Pn.readInt(f.size_horizontal))&&void 0!==r?r:1,ySize:null!==(s=Pn.readInt(f.size_vertical))&&void 0!==s?s:1,densityFactor:null!==(a=Pn.readNumber(f.density_factor))&&void 0!==a?a:0,densityOffset:null!==(o=Pn.readNumber(f.density_offset))&&void 0!==o?o:0,sampling:Bn.fromJson(f.sampling),topSlide:wi.fromJson(f.top_slide),bottomSlide:wi.fromJson(f.bottom_slide),terrainShaper:ki.fromJson(f.terrain_shaper),useSimplexSurfaceNoise:null!==(l=Pn.readBoolean(f.simplex_surface_noise))&&void 0!==l&&l,randomDensityOffset:null!==(d=Pn.readBoolean(f.random_density_offset))&&void 0!==d&&d,islandNoiseOverride:null!==(h=Pn.readBoolean(f.island_noise_override))&&void 0!==h&&h,isAmplified:null!==(u=Pn.readBoolean(f.amplified))&&void 0!==u&&u,useLegacyRandom:null!==(c=Pn.readBoolean(f.use_legacy_random))&&void 0!==c&&c}}}(mi||(mi={})),function(t){t.fromJson=function(t){var e,n,i,r;const s=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{target:null!==(n=Pn.readNumber(s.target))&&void 0!==n?n:0,size:null!==(i=Pn.readInt(s.size))&&void 0!==i?i:0,offset:null!==(r=Pn.readInt(s.offset))&&void 0!==r?r:0}},t.apply=function(t,e,n){if(t.size<=0)return e;const i=(n-t.offset)/t.size;return function(t,e,n){return n<0?t:n>1?e:Mn(n,t,e)}(t.target,e,i)}}(wi||(wi={})),function(t){t.fromJson=function(t){var e,n,i,r,s,a,o,l,d,h,u;const c=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{structures:vi.fromJson(c.structures),noise:mi.fromJson(c.noise),octaves:yi.fromJson(c.octaves),defaultBlock:zn.fromJson(c.default_block),defaultFluid:zn.fromJson(c.default_fluid),bedrockRoofPosition:null!==(n=Pn.readInt(c.bedrock_roof_position))&&void 0!==n?n:0,bedrockFloorPosition:null!==(i=Pn.readInt(c.bedrock_floor_position))&&void 0!==i?i:0,seaLevel:null!==(r=Pn.readInt(c.sea_level))&&void 0!==r?r:0,disableMobGeneration:null!==(s=Pn.readBoolean(c.disable_mob_generation))&&void 0!==s&&s,aquifersEnabled:null!==(a=Pn.readBoolean(c.aquifers_enabled))&&void 0!==a&&a,noiseCavesEnabled:null!==(o=Pn.readBoolean(c.noise_caves_enabled))&&void 0!==o&&o,deepslateEnabled:null!==(l=Pn.readBoolean(c.deepslate_enabled))&&void 0!==l&&l,oreVeinsEnabled:null!==(d=Pn.readBoolean(c.ore_veins_enabled))&&void 0!==d&&d,noodleCavesEnabled:null!==(h=Pn.readBoolean(c.noodle_caves_enabled))&&void 0!==h&&h,legacyRandomSource:null!==(u=Pn.readBoolean(c.legacy_random_source))&&void 0!==u&&u}}}(bi||(bi={})),function(t){t.fromJson=function(t){var e;const n=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{stronghold:Pn.compose(n.stronghold,Pn.readObject,(t=>{var e,n,i;return{distance:null!==(e=Pn.readInt(t.distance))&&void 0!==e?e:0,spread:null!==(n=Pn.readInt(t.spread))&&void 0!==n?n:0,count:null!==(i=Pn.readInt(t.count))&&void 0!==i?i:0}})),structures:Pn.readMap(n.structures,(t=>{var e;return(t=>{var e,n,i;return{spacing:null!==(e=Pn.readInt(t.spacing))&&void 0!==e?e:0,separation:null!==(n=Pn.readInt(t.separation))&&void 0!==n?n:0,salt:null!==(i=Pn.readInt(t.salt))&&void 0!==i?i:0}})(null!==(e=Pn.readObject(t))&&void 0!==e?e:{})}))}}}(vi||(vi={})),function(t){t.fromJson=function(t){var e;const n=null!==(e=Pn.readObject(t))&&void 0!==e?e:{};return{temperature:Sn.fromJson(n.temperature),humidity:Sn.fromJson(n.humidity),continentalness:Sn.fromJson(n.continentalness),erosion:Sn.fromJson(n.erosion),weirdness:Sn.fromJson(n.weirdness),shift:Sn.fromJson(n.shift)}}}(yi||(yi={}));var xi=function(){function t(){}return t.prototype.getMultiNoiseValues=function(t,e,n){if(!this.temperature)return{t:0,h:0,c:0,e:0,w:0,d:0};var i=t+this.getShift(t,0,n),r=e+this.getShift(e,n,t),s=n+this.getShift(n,t,0);return{t:this.temperature.sample(i,r,s),h:this.humidity.sample(i,r,s),c:this.continentalness.sample(i,0,s),e:this.erosion.sample(i,0,s),w:this.weirdness.sample(i,0,s),d:-.01}},t.prototype.getShift=function(t,e,n){return 4*this.shift.sample(t,e,n)},t.prototype.setNoises=function(t,e,n){if(n)this.temperature=new jn(new Nn(t),e.temperature),this.humidity=new jn(new Nn(t+BigInt(1)),e.humidity),this.continentalness=new jn(new Nn(t+BigInt(2)),e.continentalness),this.erosion=new jn(new Nn(t+BigInt(3)),e.erosion),this.weirdness=new jn(new Nn(t+BigInt(4)),e.weirdness),this.shift=new jn(new Nn(t+BigInt(5)),e.shift);else{var i=Dn.create(t).fork();this.temperature=new jn(i.forkWithHashOf("minecraft:temperature"),e.temperature),this.humidity=new jn(i.forkWithHashOf("minecraft:vegetation"),e.humidity),this.continentalness=new jn(i.forkWithHashOf("minecraft:continentalness"),e.continentalness),this.erosion=new jn(i.forkWithHashOf("minecraft:erosion"),e.erosion),this.weirdness=new jn(i.forkWithHashOf("minecraft:ridge"),e.weirdness),this.shift=new jn(i.forkWithHashOf("minecraft:offset"),e.shift)}},t}(),Fi=new xi;function Ii(t,e,n){return(1-n)*t+n*e}function Pi(t,e,n){return{w:Ii(t.w,e.w,n),c:Ii(t.c,e.c,n),e:Ii(t.e,e.e,n),h:Ii(t.h,e.h,n),t:Ii(t.t,e.t,n),d:Ii(t.d,e.d,n)}}self.onmessage=function(t){if("calculate"===t.data.task)try{for(var e=[],n=0;n<t.data.coords.size/2+1;n++){e[n]=[];for(var i=0;i<t.data.coords.size/2+1;i++)e[n][i]=Fi.getMultiNoiseValues(t.data.coords.x+n*t.data.coords.step*2,0,t.data.coords.z+i*t.data.coords.step*2)}var r=[];for(n=0;n<t.data.coords.size;n++)for(r[n]=[],i=0;i<t.data.coords.size;i++){var s=Math.floor(n/2),a=Math.floor(i/2),o=n%2/2,l=i%2/2;r[n][i]=Pi(Pi(e[s][a],e[s+1][a],o),Pi(e[s][a+1],e[s+1][a+1],o),l)}postMessage({key:t.data.key,values:r})}catch(t){console.error(t)}else"updateNoiseSettings"===t.data.task&&Fi.setNoises(t.data.seed,t.data.params,t.data.useLegacyRandom)}})()})();
//# sourceMappingURL=multinoiseworker.js.map